[package]
name = "letsql"
version = "0.1.0"
edition = "2021"

[features]
default = ["mimalloc"]
protoc = ["datafusion-substrait/protoc"]

[dependencies]
tokio = { version = "1.24", features = ["macros", "rt", "rt-multi-thread", "sync"] }
rand = "0.8"
pyo3 = { version = "0.19", features = ["extension-module", "abi3", "abi3-py38"] }
datafusion = { version = "31.0.0", features = ["pyarrow", "avro"] }
datafusion-common = { version = "31.0.0", features = ["pyarrow"] }
datafusion-expr = { version = "31.0.0" }
datafusion-optimizer = { version = "31.0.0" }
datafusion-sql = { version = "31.0.0" }
datafusion-substrait = { version = "31.0.0" }
prost = "0.11"
prost-types = "0.11"
uuid = { version = "1.3", features = ["v4"] }
mimalloc = { version = "0.1", optional = true, default-features = false }
async-trait = "0.1"
futures = "0.3"
object_store = { version = "0.7.0", features = ["aws", "gcp", "azure"] }
parking_lot = "0.12"
regex-syntax = "0.7.1"
syn = "2.0.37"
url = "2.2"
# Remote query execution for a variety of DBs
connectorx = { git = "https://github.com/mesejo/connector-x.git", branch = "main", features = [ "dst_arrow", "src_postgres" ] }
itertools = "0.11.0"
arrow = "46.0.0"
arrow-schema = "46.0.0"
arrow-buffer = "46.0.0"



[build-dependencies]
pyo3-build-config = "0.19.0"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html
[lib]
name = "letsql"
crate-type = ["cdylib", "rlib"]

[profile.release]
lto = true
codegen-units = 1
