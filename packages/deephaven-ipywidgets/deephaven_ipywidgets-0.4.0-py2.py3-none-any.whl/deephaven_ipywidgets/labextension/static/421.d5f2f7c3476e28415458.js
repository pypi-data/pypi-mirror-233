(self.webpackChunk_deephaven_ipywidgets=self.webpackChunk_deephaven_ipywidgets||[]).push([[421],{421:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BROADCAST_CHANNEL_NAME:()=>ee,BROADCAST_LOGIN_MESSAGE:()=>te,BROADCAST_LOGOUT_MESSAGE:()=>re,BooleanColumnFormatter:()=>c,CharColumnFormatter:()=>m,DateTimeColumnFormatter:()=>p,DateUtils:()=>C,DecimalColumnFormatter:()=>y,DefaultColumnFormatter:()=>S,FETCH_TIMEOUT:()=>i,Formatter:()=>B,FormatterUtils:()=>Y,IntegerColumnFormatter:()=>F,LOGIN_OPTIONS_REQUEST:()=>K,NoConsolesError:()=>fe,SESSION_DETAILS_REQUEST:()=>J,StringColumnFormatter:()=>w,TableColumnFormatter:()=>u,TableUtils:()=>V,createConnection:()=>ye,createCoreClient:()=>be,createKeyFromOffsetRow:()=>Ie,createOnTableUpdatedHandler:()=>_e,createSessionWrapper:()=>Se,defaultRowDeserializer:()=>Pe,fetchVariableDefinition:()=>o,generateEmptyKeyedItems:()=>Ae,getColumnFormats:()=>W,getDateTimeFormatterOptions:()=>G,getItemsFromListData:()=>Re,getSessionDetails:()=>we,getSize:()=>Le,getWindowParent:()=>ue,isBroadcastLoginMessage:()=>ae,isBroadcastLogoutMessage:()=>ie,isClosed:()=>xe,isCustomColumnFormatDefined:()=>Q,isMessage:()=>ne,isNoConsolesError:()=>de,isResponse:()=>oe,loadSessionWrapper:()=>Ce,makeMessage:()=>le,makeResponse:()=>se,padFirstAndLastRow:()=>je,requestParentResponse:()=>ce});class n extends Error{constructor(){var e,t,r;super(...arguments),e=this,r=!0,(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t="isTimeout"))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}}const a=n;var i=1e4;function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return new Promise(((n,i)=>{var o,l=setTimeout((()=>{var e;null===(e=o)||void 0===e||e(),i(new a("Variable ".concat(t," not found")))}),r);o=e.subscribeToFieldUpdates((function(e){var r,a=e.created.find((e=>e.title===t));null!=a&&(clearTimeout(l),null===(r=o)||void 0===r||r(),n(a))}))}))}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{static isValid(e,t){return!0}static isSameFormat(e,t){throw new Error("isSameFormat not implemented")}static makeFormat(e,t,r){return{label:e,formatString:t,type:r}}format(e,t){return""}}l(s,"TYPE_GLOBAL","type-global"),l(s,"TYPE_CONTEXT_PRESET","type-context-preset"),l(s,"TYPE_CONTEXT_CUSTOM","type-context-custom");const u=s,c=class extends u{format(e){switch(e){case 1:case!0:return"true";case 0:case!1:return"false";default:return""}}},m=class extends u{format(e){return String.fromCharCode(e)}};var f=r(939),d=r.n(f);function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=d().module("DateTimeColumnFormatter");class p extends u{static isValid(e,t){try{return e.i18n.DateTimeFormat.format(t.formatString,new Date),!0}catch(e){return!1}}static makeFormat(e,t){return{label:e,formatString:t,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.TYPE_CONTEXT_PRESET}}static isSameFormat(e,t){return e===t||null!==e&&null!==t&&e.type===t.type&&e.formatString===t.formatString}static makeGlobalFormatStringMap(e,t){var r=t?"'T'":" ",n=e?" z":"";return new Map([["yyyy-MM-dd HH:mm:ss","yyyy-MM-dd".concat(r,"HH:mm:ss").concat(n)],["yyyy-MM-dd HH:mm:ss.SSS","yyyy-MM-dd".concat(r,"HH:mm:ss.SSS").concat(n)],["yyyy-MM-dd HH:mm:ss.SSSSSSSSS","yyyy-MM-dd".concat(r,"HH:mm:ss.SSSSSSSSS").concat(n)]])}static getGlobalFormats(e,t){return[...p.makeGlobalFormatStringMap(e,t).keys()]}static makeFormatStringMap(e,t){var r=void 0!==t&&t?"'T'":" ",n=void 0!==e&&e?" z":"";return new Map([["yyyy-MM-dd","yyyy-MM-dd".concat(n)],["MM-dd-yyyy","MM-dd-yyyy".concat(n)],["HH:mm:ss","HH:mm:ss".concat(n)],["HH:mm:ss.SSS","HH:mm:ss.SSS".concat(n)],["HH:mm:ss.SSSSSSSSS","HH:mm:ss.SSSSSSSSS".concat(n)],["yyyy-MM-dd HH:mm:ss","yyyy-MM-dd".concat(r,"HH:mm:ss").concat(n)],["yyyy-MM-dd HH:mm:ss.SSS","yyyy-MM-dd".concat(r,"HH:mm:ss.SSS").concat(n)],["yyyy-MM-dd HH:mm:ss.SSSSSSSSS","yyyy-MM-dd".concat(r,"HH:mm:ss.SSSSSSSSS").concat(n)]])}static getFormats(e,t){return[...p.makeFormatStringMap(e,t).keys()]}constructor(e){var{timeZone:t="",showTimeZone:r=!0,showTSeparator:n=!1,defaultDateTimeFormatString:a=p.DEFAULT_DATETIME_FORMAT_STRING}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),g(this,"dh",void 0),g(this,"dhTimeZone",void 0),g(this,"defaultDateTimeFormatString",void 0),g(this,"showTimeZone",void 0),g(this,"showTSeparator",void 0),g(this,"formatStringMap",void 0);var i=t||p.DEFAULT_TIME_ZONE_ID;try{this.dhTimeZone=e.i18n.TimeZone.getTimeZone(i)}catch(t){h.error("Unsupported time zone id",i),this.dhTimeZone=e.i18n.TimeZone.getTimeZone(p.DEFAULT_TIME_ZONE_ID)}this.dh=e,this.defaultDateTimeFormatString=a,this.showTimeZone=r,this.showTSeparator=n,this.formatStringMap=p.makeFormatStringMap(r,n)}getEffectiveFormatString(e){var t;return null!==(t=this.formatStringMap.get(e))&&void 0!==t?t:e}format(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!=t.formatString&&""!==t.formatString?t.formatString:this.defaultDateTimeFormatString,n=this.getEffectiveFormatString(r);try{return this.dh.i18n.DateTimeFormat.format(n,e,this.dhTimeZone)}catch(e){h.error("Invalid format arguments")}return""}}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}g(p,"DEFAULT_DATETIME_FORMAT_STRING","yyyy-MM-dd HH:mm:ss.SSS"),g(p,"DEFAULT_TIME_ZONE_ID","America/New_York");var T=d().module("DecimalColumnFormatter");class y extends u{static isValid(e,t){try{return e.i18n.NumberFormat.format(t.formatString,0),!0}catch(e){return!1}}static makeFormat(e,t){return{label:e,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.TYPE_CONTEXT_PRESET,formatString:t,multiplier:arguments.length>3?arguments[3]:void 0}}static makePresetFormat(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;return y.makeFormat(e,t,u.TYPE_CONTEXT_PRESET,r)}static makeCustomFormat(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return y.makeFormat("Custom Format",e,u.TYPE_CONTEXT_CUSTOM,t)}static isSameFormat(e,t){return e===t||null!=e&&null!=t&&e.type===t.type&&e.formatString===t.formatString&&e.multiplier===t.multiplier}constructor(e){var{defaultFormatString:t=y.DEFAULT_FORMAT_STRING}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),v(this,"defaultFormatString",void 0),v(this,"dh",void 0),this.dh=e,this.defaultFormatString=t}format(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!=t.formatString&&""!==t.formatString?t.formatString:this.defaultFormatString,n=null!=t.multiplier&&0!==t.multiplier?e*t.multiplier:e;try{return this.dh.i18n.NumberFormat.format(r,n)}catch(e){T.error("Invalid format arguments")}return""}}v(y,"DEFAULT_FORMAT_STRING","###,##0.0000"),v(y,"FORMAT_PERCENT",y.makePresetFormat("Percent","##0.00%")),v(y,"FORMAT_BASIS_POINTS",y.makePresetFormat("Basis Points","###,##0 bp",1e4)),v(y,"FORMAT_MILLIONS",y.makePresetFormat("Millions","###,##0.000 mm",1e-6)),v(y,"FORMAT_SCIENTIFIC_NOTATION",y.makePresetFormat("Scientific Notation","0.0000E0")),v(y,"FORMAT_ROUND",y.makePresetFormat("Round","###,##0")),v(y,"FORMAT_ROUND_TWO_DECIMALS",y.makePresetFormat("0.00","###,##0.00")),v(y,"FORMAT_ROUND_FOUR_DECIMALS",y.makePresetFormat("0.0000","###,##0.0000"));const S=class extends u{format(e){return"".concat(e)}};function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=d().module("IntegerColumnFormatter");class F extends u{static isValid(e,t){try{return e.i18n.NumberFormat.format(t.formatString,0),!0}catch(e){return!1}}static makeFormat(e,t){return{label:e,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.TYPE_CONTEXT_PRESET,formatString:t,multiplier:arguments.length>3?arguments[3]:void 0}}static makePresetFormat(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;return F.makeFormat(e,t,u.TYPE_CONTEXT_PRESET,r)}static makeCustomFormat(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return F.makeFormat("Custom Format",e,u.TYPE_CONTEXT_CUSTOM,t)}static isSameFormat(e,t){return e===t||null!=e&&null!=t&&e.type===t.type&&e.formatString===t.formatString&&e.multiplier===t.multiplier}constructor(e){var{defaultFormatString:t=F.DEFAULT_FORMAT_STRING}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),E(this,"dh",void 0),E(this,"defaultFormatString",void 0),this.dh=e,this.defaultFormatString=t}format(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!=t.formatString&&""!==t.formatString?t.formatString:this.defaultFormatString,n=null!=t.multiplier&&0!==t.multiplier?e*t.multiplier:e;try{return this.dh.i18n.NumberFormat.format(r,n)}catch(e){b.error("Invalid format arguments")}return""}}E(F,"DEFAULT_FORMAT_STRING","###,##0"),E(F,"FORMAT_MILLIONS",F.makePresetFormat("Millions","###,##0.000 mm",1e-6)),E(F,"FORMAT_SCIENTIFIC_NOTATION",F.makePresetFormat("Scientific Notation","0.0000E0"));class w extends u{format(e){return e}}function N(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class C{static makeDateWrapper(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;if(!t)throw new Error("No timezone provided");var u="".concat(r).padStart(4,"0"),c="".concat(n+1).padStart(2,"0"),m="".concat(a).padStart(2,"0"),f="".concat(i).padStart(2,"0"),d="".concat(o).padStart(2,"0"),g="".concat(l).padStart(2,"0"),h="".concat(s).padStart(9,"0"),p="".concat(u,"-").concat(c,"-").concat(m," ").concat(f,":").concat(d,":").concat(g,".").concat(h);return e.i18n.DateTimeFormat.parse(C.FULL_DATE_FORMAT,p,e.i18n.TimeZone.getTimeZone(t))}static getNextNanos(e){var t=parseInt(e,10),r="0".repeat(9-e.length),n="".concat(t+1).concat(r);return parseInt(n,10)}static getNextDate(e,t,r,n){var{year:a,month:i,date:o,hours:l,minutes:s,seconds:u,nanos:c}=r;if(null!=t.nanos){if(9===t.nanos.length)return null;(c=C.getNextNanos(t.nanos))>999999999&&(u+=1,c=0)}else null!=t.seconds?u+=1:null!=t.minutes?s+=1:null!=t.hours?l+=1:null!=t.date?o+=1:null!=t.month?i+=1:a+=1;var m=new Date(a,i,o,l,s,u);return C.makeDateWrapper(e,n,m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),c)}static parseMonth(e){var t=parseInt(e,10);if(!Number.isNaN(t))return t>=1&&t<=12?t-1:NaN;var r=e.trim().toLowerCase();if(r.length>=3)for(var n=0;n<C.months.length;n+=1)if(C.months[n].startsWith(r))return n;return NaN}static parseDateValues(e,t,r,n,a,i,o){var l=parseInt(e,10),s=null!=t?this.parseMonth(t):0,u=null!=r?parseInt(r,10):1,c=null!=n?parseInt(n,10):0,m=null!=a?parseInt(a,10):0,f=null!=i?parseInt(i,10):0,d=null!=o?parseInt(o.padEnd(9,"0"),10):0;return Number.isNaN(l)||Number.isNaN(s)||Number.isNaN(u)||Number.isNaN(c)||Number.isNaN(m)||Number.isNaN(f)||Number.isNaN(d)?null:{year:l,month:s,date:u,hours:c,minutes:m,seconds:f,nanos:d}}static parseDateTimeString(e){var t=/\s*(\d{4})([-./]([\da-z]+))?([-./](\d{1,2}))?([tT\s](\d{2})([:](\d{2}))?([:](\d{2}))?([.](\d{1,9}))?)?(.*)/.exec(e);if(null==t)throw new Error("Unexpected date string: ".concat(e));var[,r,,n,,a,,i,,o,,l,,s,u]=t;if(null!=u&&u.length>0)throw new Error("Unexpected characters after date string '".concat(e,"': ").concat(u));return{year:r,month:n,date:a,hours:i,minutes:o,seconds:l,nanos:s}}static parseDateRange(e,t,r){var n=t.trim().toLowerCase();if(0===n.length)throw new Error("Cannot parse date range from empty string");if("null"===n)return[null,null];if("today"===n){var a=new Date(Date.now()),i=C.makeDateWrapper(e,r,a.getFullYear(),a.getMonth(),a.getDate()),o=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1);return[i,C.makeDateWrapper(e,r,o.getFullYear(),o.getMonth(),o.getDate())]}if("yesterday"===n){var l=new Date(Date.now()),s=new Date(l.getFullYear(),l.getMonth(),l.getDate()-1);return[C.makeDateWrapper(e,r,s.getFullYear(),s.getMonth(),s.getDate()),C.makeDateWrapper(e,r,l.getFullYear(),l.getMonth(),l.getDate())]}if("now"===n){var u=new Date(Date.now());return[e.DateWrapper.ofJsDate(u),null]}var c=C.parseDateTimeString(n);if(null==c.year&&null==c.month&&null==c.date)throw new Error("Unable to extract year, month, or day ".concat(n));var m=C.parseDateValues(c.year,c.month,c.date,c.hours,c.minutes,c.seconds,c.nanos);if(null==m)throw new Error("Unable to extract date values from ".concat(c));return[C.makeDateWrapper(e,r,m.year,m.month,m.date,m.hours,m.minutes,m.seconds,m.nanos),C.getNextDate(e,c,m,r)]}static getJsDate(e){return"number"==typeof e?new Date(e):e.asDate()}}N(C,"FULL_DATE_FORMAT","yyyy-MM-dd HH:mm:ss.SSSSSSSSS"),N(C,"months",["january","february","march","april","may","june","july","august","september","october","november","december"]);const M=C;function D(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class O{}function k(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}D(O,"eq","eq"),D(O,"eqIgnoreCase","eqIgnoreCase"),D(O,"notEq","notEq"),D(O,"notEqIgnoreCase","notEqIgnoreCase"),D(O,"greaterThan","greaterThan"),D(O,"greaterThanOrEqualTo","greaterThanOrEqualTo"),D(O,"lessThan","lessThan"),D(O,"lessThanOrEqualTo","lessThanOrEqualTo"),D(O,"in","in"),D(O,"inIgnoreCase","inIgnoreCase"),D(O,"notIn","notIn"),D(O,"notInIgnoreCase","notInIgnoreCase"),D(O,"isTrue","isTrue"),D(O,"isFalse","isFalse"),D(O,"isNull","isNull"),D(O,"invoke","invoke"),D(O,"contains","contains"),D(O,"notContains","notContains"),D(O,"containsIgnoreCase","containsIgnoreCase"),D(O,"startsWith","startsWith"),D(O,"endsWith","endsWith"),D(O,"containsAny","containsAny");class I{}k(I,"not","not"),k(I,"and","and"),k(I,"or","or");class _ extends Error{constructor(){var e,t,r;super(...arguments),e=this,r=!0,(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t="isCanceled"))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}}const P=_;class A{static makeCancelable(e,t){var r,n,a=!1,i=new Promise(((i,o)=>{n=o,Promise.resolve(e).then((e=>{a?t&&t(e):(r=e,i(e))})).catch((e=>o(e)))}));return i.cancel=()=>{a=!0,n(new P),null!=r&&t&&t(r)},i}static isCanceled(e){return e instanceof P}static isTimedOut(e){return e instanceof a}static withTimeout(e,t){return new Promise(((r,n)=>{setTimeout((()=>{try{r(t())}catch(e){n(e)}}),e)}))}}const R=class{static join(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and";if(null==e||0===e.length)return"";if(1===e.length)return e[0];if(2===e.length)return"".concat(e[0]," ").concat(t," ").concat(e[1]);var r=e.slice(0,e.length-1).join(", "),n=e[e.length-1];return"".concat(r,", ").concat(t," ").concat(n)}static toLower(e){if(null==e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])return"";throw new Error("Null string passed in to TextUtils.toLower")}return e.toLowerCase()}static sort(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e<t?r?-1:1:e>t?r?1:-1:0}};function L(e,t,r,n,a,i,o){try{var l=e[i](o),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,a)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){L(i,n,a,o,l,"next",e)}function l(e){L(i,n,a,o,l,"throw",e)}o(void 0)}))}}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var q=d().module("TableUtils");class V{static getSortIndex(e,t){for(var r=0;r<e.length;r+=1){var n;if((null===(n=e[r].column)||void 0===n?void 0:n.name)===t)return r}return null}static getSortForColumn(e,t){var r=V.getSortIndex(e,t);return null!=r?e[r]:null}static getFilterText(e){return e?e.toString():null}static getFilterTypes(e){return V.isBooleanType(e)?[O.isTrue,O.isFalse,O.isNull]:V.isCharType(e)||V.isNumberType(e)||V.isDateType(e)?[O.eq,O.notEq,O.greaterThan,O.greaterThanOrEqualTo,O.lessThan,O.lessThanOrEqualTo]:V.isTextType(e)?[O.eq,O.eqIgnoreCase,O.notEq,O.notEqIgnoreCase,O.contains,O.notContains,O.startsWith,O.endsWith]:[]}static getNextSort(e,t,r){if(r<0||r>=e.length)return null;var n=V.getSortForColumn(t,e[r].name);return null===n?e[r].sort().asc():n.direction===V.sortDirection.ascending?n.desc():null}static makeColumnSort(e,t,r,n){if(t<0||t>=e.length)return null;if(r===V.sortDirection.none)return null;var a=e[t].sort();switch(r){case V.sortDirection.ascending:a=a.asc();break;case V.sortDirection.descending:a=a.desc()}return n&&(a=a.abs()),a}static toggleSortForColumn(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r<0||r>=t.length)return[];var a=V.getNextSort(t,e,r);return V.setSortForColumn(e,t[r].name,a,n)}static sortColumn(e,t,r,n,a,i){if(r<0||r>=t.length)return[];var o=V.makeColumnSort(t,r,n,a);return V.setSortForColumn(e,t[r].name,o,i)}static setSortForColumn(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=V.getSortIndex(e,t),i=[];return n&&(i=i.concat(e.filter((e=>{var{direction:t}=e;return t!==V.sortDirection.reverse}))),null!==a&&i.splice(a,1)),null!==r&&i.push(r),i}static getNormalizedType(e){switch(e){case"boolean":case"java.lang.Boolean":case V.dataType.BOOLEAN:return V.dataType.BOOLEAN;case"char":case"java.lang.Character":case V.dataType.CHAR:return V.dataType.CHAR;case"java.lang.String":case V.dataType.STRING:return V.dataType.STRING;case"io.deephaven.db.tables.utils.DBDateTime":case"io.deephaven.time.DateTime":case"com.illumon.iris.db.tables.utils.DBDateTime":case"java.time.Instant":case"java.time.ZonedDateTime":case V.dataType.DATETIME:return V.dataType.DATETIME;case"double":case"java.lang.Double":case"float":case"java.lang.Float":case"java.math.BigDecimal":case V.dataType.DECIMAL:return V.dataType.DECIMAL;case"int":case"java.lang.Integer":case"long":case"java.lang.Long":case"short":case"java.lang.Short":case"byte":case"java.lang.Byte":case"java.math.BigInteger":case V.dataType.INT:return V.dataType.INT;default:return V.dataType.UNKNOWN}}static isLongType(e){switch(e){case"long":case"java.lang.Long":return!0;default:return!1}}static isDateType(e){switch(e){case"io.deephaven.db.tables.utils.DBDateTime":case"io.deephaven.time.DateTime":case"java.time.Instant":case"java.time.ZonedDateTime":case"com.illumon.iris.db.tables.utils.DBDateTime":return!0;default:return!1}}static isNumberType(e){return V.isIntegerType(e)||V.isDecimalType(e)}static isIntegerType(e){switch(e){case"int":case"java.lang.Integer":case"java.math.BigInteger":case"long":case"java.lang.Long":case"short":case"java.lang.Short":case"byte":case"java.lang.Byte":return!0;default:return!1}}static isDecimalType(e){switch(e){case"double":case"java.lang.Double":case"java.math.BigDecimal":case"float":case"java.lang.Float":return!0;default:return!1}}static isBigDecimalType(e){return"java.math.BigDecimal"===e}static isBigIntegerType(e){return"java.math.BigInteger"===e}static isBooleanType(e){switch(e){case"boolean":case"java.lang.Boolean":return!0;default:return!1}}static isCharType(e){switch(e){case"char":case"java.lang.Character":return!0;default:return!1}}static isStringType(e){return"java.lang.String"===e}static isTextType(e){return this.isStringType(e)||this.isCharType(e)}static getBaseType(e){return e.split("[]")[0]}static isCompatibleType(e,t){return V.getNormalizedType(e)===V.getNormalizedType(t)}static quoteValue(e){return e.length>=2&&('"'===e.charAt(0)&&'"'===e.charAt(e.length-1)||"'"===e.charAt(0)&&"'"===e.charAt(e.length-1))?e:'"'.concat(e,'"')}static isRangeOperation(e){switch(e){case"<":case"<=":case"=<":case">":case">=":case"=>":return!0;default:return!1}}static makeRangeFilterWithOperation(e,t,r){switch(t){case"=":return e.eq(r);case"<":return e.lessThan(r);case"<=":case"=<":return e.lessThanOrEqualTo(r);case">":return e.greaterThan(r);case">=":case"=>":return e.greaterThanOrEqualTo(r);case"!=":case"!":return e.notEq(r);default:return null}}static makeCancelableTablePromise(e){return A.makeCancelable(e,(e=>{e.close()}))}static makeCancelableTableEventPromise(e,t){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=!0,s=new Promise(((s,u)=>{n=setTimeout((()=>{r(),l=!1,u(new a('Event "'.concat(t,'" timed out.')))}),i),r=e.addEventListener(t,(e=>{null==o||o(e)?(q.debug2("Event triggered, resolving."),r(),clearTimeout(n),l=!1,s(e)):q.debug2("Event triggered, but matcher returned false.")}))}));return s.cancel=()=>{if(l)return q.debug2("Pending promise cleanup."),r(),clearTimeout(n),void(l=!1);q.debug2("Ignoring non-pending promise cancel.")},s}static removeCommas(e){return e.replace(/[\s|,]/g,"")}static makeBooleanValue(e){if(""===e&&arguments.length>1&&void 0!==arguments[1]&&arguments[1])return null;switch(null==e?void 0:e.toLowerCase()){case"null":return null;case"0":case"f":case"fa":case"fal":case"fals":case"false":case"n":case"no":return!1;case"1":case"t":case"tr":case"tru":case"true":case"y":case"ye":case"yes":return!0;default:throw new Error("Invalid boolean '".concat(e,"'"))}}static makeNumberValue(e){if("null"===e||""===e)return null;var t=e.toLowerCase().trim();if("∞"===t||"infinity"===t||"inf"===t)return Number.POSITIVE_INFINITY;if("-∞"===t||"-infinity"===t||"-inf"===t)return Number.NEGATIVE_INFINITY;var r=V.removeCommas(t);if(V.NUMBER_REGEX.test(r))return parseFloat(r);throw new Error("Invalid number '".concat(e,"'"))}static getFilterOperatorString(e){switch(e){case O.eq:return"=";case O.notEq:return"!=";case O.greaterThan:return">";case O.greaterThanOrEqualTo:return">=";case O.lessThan:return"<";case O.lessThanOrEqualTo:return"<=";case O.contains:return"~";case O.notContains:return"!~";default:throw new Error("Unexpected filter type ".concat(e))}}static isTreeTable(e){return null!=e&&void 0!==e.expand&&void 0!==e.collapse}static sortColumns(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return[...e].sort(((e,r)=>{var n=e.name.toUpperCase(),a=r.name.toUpperCase();return R.sort(n,a,t)}))}constructor(e){j(this,"dh",void 0),this.dh=e}makeQuickFilter(e,t,r){for(var n=t.split("||"),a=null,i=0;i<n.length;i+=1){for(var o=n[i].split("&&"),l=null,s=0;s<o.length;s+=1){var u=o[s].trim();if(u.length>0){var c=this.makeQuickFilterFromComponent(e,u,r);if(!c)throw new Error("Unable to parse quick filter from text ".concat(t));l=l?l.and(c):c}}a=a&&l?a.or(l):l}return a}makeQuickFilterFromComponent(e,t,r){var{type:n}=e;return V.isNumberType(n)?this.makeQuickNumberFilter(e,t):V.isBooleanType(n)?this.makeQuickBooleanFilter(e,t):null!=r&&V.isDateType(n)?this.makeQuickDateFilter(e,t,r):V.isCharType(n)?this.makeQuickCharFilter(e,t):this.makeQuickTextFilter(e,t)}makeQuickNumberFilter(e,t){var r=e.filter(),{dh:n}=this,a=null,i=/\s*(>=|<=|=>|=<|>|<|!=|=|!)?(\s*-\s*)?(\s*\d*(?:,\d{3})*(?:\.\d*)?\s*)?(null|nan|infinity|inf|\u221E)?(.*)/i.exec(t),o=null,l=null,s=null,u=null,c=null;if(null!==i&&i.length>3&&([,o,l,s,u,c]=i),null!=c&&c.trim().length>0)return null;if(null==o&&(o="="),null!=u){if("="!==o&&"!"!==o&&"!="!==o)return null;switch(u=u.trim().toLowerCase()){case"null":a=r.isNull();break;case"nan":a=n.FilterCondition.invoke("isNaN",r);break;case"infinity":case"inf":case"∞":a=null!=l?n.FilterCondition.invoke("isInf",r).and(r.lessThan(n.FilterValue.ofNumber(0))):n.FilterCondition.invoke("isInf",r).and(r.greaterThan(n.FilterValue.ofNumber(0)))}return null===a||"!"!==o&&"!="!==o||(a=a.not()),a}if(null==s)return null;if(s=V.removeCommas(s),V.isLongType(e.type))try{s=n.FilterValue.ofNumber(n.LongWrapper.ofString("".concat(null!=l?"-":"").concat(s)))}catch(e){return q.warn("Unable to create long filter",e),null}else{if(null==(s=parseFloat(s))||Number.isNaN(s))return null;s=n.FilterValue.ofNumber(null!=l?0-s:s)}return a=e.filter(),V.makeRangeFilterWithOperation(a,o,s)}makeQuickTextFilter(e,t){var{dh:r}=this,n="".concat(t).trim(),a=/^(!~|!=|~|=|!)?(.*)/.exec(n),i=null,o=null;if(null!==a&&a.length>2&&([,i,o]=a,null!=o&&(o=o.trim())),null==o||0===o.length)return null;null==i&&(i="=");var l=e.filter();if("null"===o.toLowerCase())switch(i){case"=":return l.isNull();case"!=":case"!":return l.isNull().not()}var s=null,u=null;switch(o.startsWith("*")?(s="*",o=o.substring(1)):o.endsWith("*")&&!o.endsWith("\\*")&&(u="*",o=o.substring(0,o.length-1)),o=o.replace("\\",""),i){case"~":return l.isNull().not().and(l.invoke("matches",r.FilterValue.ofString("(?s)(?i).*\\Q".concat(o,"\\E.*"))));case"!~":return l.isNull().or(l.invoke("matches",r.FilterValue.ofString("(?s)(?i).*\\Q".concat(o,"\\E.*"))).not());case"!=":return"*"===s?l.isNull().or(l.invoke("matches",r.FilterValue.ofString("(?s)(?i).*\\Q".concat(o,"\\E$"))).not()):"*"===u?l.isNull().or(l.invoke("matches",r.FilterValue.ofString("(?s)(?i)^\\Q".concat(o,"\\E.*"))).not()):l.notEqIgnoreCase(r.FilterValue.ofString(o.toLowerCase()));case"=":return"*"===s?l.isNull().not().and(l.invoke("matches",r.FilterValue.ofString("(?s)(?i).*\\Q".concat(o,"\\E$")))):"*"===u?l.isNull().not().and(l.invoke("matches",r.FilterValue.ofString("(?s)(?i)^\\Q".concat(o,"\\E.*")))):l.eqIgnoreCase(r.FilterValue.ofString(o.toLowerCase()))}return null}makeQuickBooleanFilter(e,t){var r=/^(!=|=|!)?(.*)/.exec("".concat(t).trim());if(null===r)return null;var[,n,a]=r,i="!"===n||"!="===n,o=a.trim().toLowerCase(),l=e.filter();try{var s=V.makeBooleanValue(o);return l=null!=s&&s?l.isTrue():null===s?l.isNull():l.isFalse(),i?l.not():l}catch(e){return null}}makeQuickDateFilter(e,t,r){var n=t.trim(),a=/\s*(>=|<=|=>|=<|>|<|!=|!|=)?(.*)/.exec(n);if(null==a||a.length<=2)throw new Error("Unable to parse date filter: ".concat(t));var i=null,o=null;[,i,o]=a;var l=O.eq;switch(i){case"<":l=O.lessThan;break;case"<=":case"=<":l=O.lessThanOrEqualTo;break;case">":l=O.greaterThan;break;case">=":case"=>":l=O.greaterThanOrEqualTo;break;case"!=":case"!":l=O.notEq;break;default:l=O.eq}return this.makeQuickDateFilterWithOperation(e,o,l,r)}makeQuickDateFilterWithOperation(e,t,r,n){var{dh:a}=this,[i,o]=M.parseDateRange(a,t,n),l=null!=i?a.FilterValue.ofNumber(i):null,s=null!=o?a.FilterValue.ofNumber(o):null,u=e.filter();if(null==l)return r===O.notEq?u.isNull().not():u.isNull();switch(r){case O.eq:if(null!=s){var c=u.greaterThanOrEqualTo(l),m=u.lessThan(s);return c.and(m)}return u.eq(l);case O.lessThan:return u.lessThan(l);case O.lessThanOrEqualTo:return null!=s?u.lessThan(s):u.lessThanOrEqualTo(l);case O.greaterThan:return null!=s?u.greaterThanOrEqualTo(s):u.greaterThan(l);case O.greaterThanOrEqualTo:return u.greaterThanOrEqualTo(l);case O.notEq:if(null!=s){var f=u.lessThan(l),d=u.greaterThanOrEqualTo(s);return f.or(d)}return u.notEq(l);default:throw new Error("Invalid operator: ".concat(r))}}makeQuickCharFilter(e,t){var{dh:r}=this,n="".concat(t).trim(),a=/^(>=|<=|=>|=<|>|<|!=|=|!)?(null|"."|'.'|.)?(.*)/.exec(n),i=null,o=null,l=null;if(null!==a&&a.length>3&&([,i,o,l]=a),null!=l&&l.trim().length>0)return null;if(null==o||0===o.length)return null;null==i&&(i="=");var s=e.filter();if("null"===o.toLowerCase())switch(i){case"=":return s.isNull();case"!=":case"!":return s.isNull().not();default:return null}var u=r.FilterValue.ofString(V.isRangeOperation(i)?V.quoteValue(o):o);return V.makeRangeFilterWithOperation(s,i,u)}makeAdvancedFilter(e,t,r){for(var{filterItems:n,filterOperators:a,invertSelection:i,selectedValues:o}=t,l=null,s=0;s<n.length;s+=1){var u=n[s],{selectedType:c,value:m}=u;if(null!=c&&c.length>0&&null!=m&&m.length>0)try{var f=this.makeAdvancedValueFilter(e,c,m,r);if(null!=f){if(0===s)l=f;else if(null!==l&&s-1<a.length){var d=a[s-1];if(d===I.and)l=l.and(f);else{if(d!==I.or){q.error("Unexpected filter operator",d,f),l=null;break}l=l.or(f)}}}else q.debug2("Empty filter ignored for",c,m)}catch(e){q.error("Unable to create filter",e),l=null;break}}var g=this.makeSelectValueFilter(e,o,i);return null!=g&&(l=null!=l?l.and(g):g),l}makeAdvancedValueFilter(e,t,r,n){var{dh:a}=this;if(V.isDateType(e.type))return this.makeQuickDateFilterWithOperation(e,r,t,n);if(V.isNumberType(e.type)||V.isCharType(e.type))return this.makeQuickFilter(e,"".concat(V.getFilterOperatorString(t)).concat(r));var i=this.makeFilterValue(e.type,r),o=e.filter();switch(t){case O.eq:return o.eq(i);case O.eqIgnoreCase:return o.eqIgnoreCase(i);case O.notEq:return o.notEq(i);case O.notEqIgnoreCase:return o.notEqIgnoreCase(i);case O.greaterThan:return o.greaterThan(i);case O.greaterThanOrEqualTo:return o.greaterThanOrEqualTo(i);case O.lessThan:return o.lessThan(i);case O.lessThanOrEqualTo:return o.lessThanOrEqualTo(i);case O.isTrue:return o.isTrue();case O.isFalse:return o.isFalse();case O.isNull:return o.isNull();case O.contains:return o.isNull().not().and(o.invoke("matches",a.FilterValue.ofString("(?s)(?i).*\\Q".concat(r,"\\E.*"))));case O.notContains:return o.isNull().or(o.invoke("matches",a.FilterValue.ofString("(?s)(?i).*\\Q".concat(r,"\\E.*"))).not());case O.startsWith:return o.isNull().not().and(o.invoke("matches",a.FilterValue.ofString("(?s)(?i)^\\Q".concat(r,"\\E.*"))));case O.endsWith:return o.isNull().not().and(o.invoke("matches",a.FilterValue.ofString("(?s)(?i).*\\Q".concat(r,"\\E$"))));default:throw new Error("Unexpected filter operation: ".concat(t))}}applyNeverFilter(e,t){var r=arguments,n=this;return x((function*(){var a=r.length>2&&void 0!==r[2]?r[2]:V.APPLY_TABLE_CHANGE_TIMEOUT_MS;if(null==e)return null;var i=e.findColumn(t),o=[n.makeNeverFilter(i)];return yield n.applyFilter(e,o,a),e}))()}applyCustomColumns(e,t){var r=arguments,n=this;return x((function*(){var a=r.length>2&&void 0!==r[2]?r[2]:V.APPLY_TABLE_CHANGE_TIMEOUT_MS,{dh:i}=n;return V.executeAndWaitForEvent((e=>null==e?void 0:e.applyCustomColumns(t)),e,i.Table.EVENT_CUSTOMCOLUMNSCHANGED,a)}))()}applyFilter(e,t){var r=arguments,n=this;return x((function*(){var a=r.length>2&&void 0!==r[2]?r[2]:V.APPLY_TABLE_CHANGE_TIMEOUT_MS,{dh:i}=n;return V.executeAndWaitForEvent((e=>null==e?void 0:e.applyFilter(t)),e,i.Table.EVENT_FILTERCHANGED,a)}))()}applySort(e,t){var r=arguments,n=this;return x((function*(){var a=r.length>2&&void 0!==r[2]?r[2]:V.APPLY_TABLE_CHANGE_TIMEOUT_MS,{dh:i}=n;return V.executeAndWaitForEvent((e=>null==e?void 0:e.applySort(t)),e,i.Table.EVENT_SORTCHANGED,a)}))()}makeNeverFilter(e){var t,{dh:r}=this;t=V.isTextType(e.type)?r.FilterValue.ofString("a"):V.isBooleanType(e.type)?r.FilterValue.ofBoolean(!0):V.isDateType(e.type)?r.FilterValue.ofNumber(r.DateWrapper.ofJsDate(new Date)):r.FilterValue.ofNumber(0);var n=e.filter().eq(t),a=e.filter().notEq(t);return n.and(a)}makeFilterValue(e,t){var{dh:r}=this,n=V.getBaseType(e);return V.isTextType(n)?r.FilterValue.ofString(t):V.isLongType(n)?r.FilterValue.ofNumber(r.LongWrapper.ofString(V.removeCommas(t))):r.FilterValue.ofNumber(V.removeCommas(t))}makeFilterRawValue(e,t){var{dh:r}=this;return V.isTextType(e)?r.FilterValue.ofString(t):V.isBooleanType(e)?r.FilterValue.ofBoolean(t):r.FilterValue.ofNumber(t)}makeValue(e,t,r){var{dh:n}=this;if("null"===t)return null;if(V.isTextType(e))return t;if(V.isLongType(e))return n.LongWrapper.ofString(V.removeCommas(t));if(V.isBooleanType(e))return V.makeBooleanValue(t,!0);if(V.isDateType(e)){var[a]=M.parseDateRange(n,t,r);return a}return V.isNumberType(e)?V.makeNumberValue(t):(q.error("Unexpected column type",e),null)}makeSelectValueFilter(e,t,r){var{dh:n}=this;if(0===t.length)return r?null:this.makeNeverFilter(e);for(var a=[],i=!1,o=0;o<t.length;o+=1){var l=t[o];null==l?i=!0:V.isTextType(e.type)?a.push(n.FilterValue.ofString("number"==typeof l?String.fromCharCode(l):l)):V.isBooleanType(e.type)?a.push(n.FilterValue.ofBoolean(Boolean(l))):a.push(n.FilterValue.ofNumber(l))}return i?a.length>0?r?e.filter().isNull().not().and(e.filter().notIn(a)):e.filter().isNull().or(e.filter().in(a)):r?e.filter().isNull().not():e.filter().isNull():r?e.filter().notIn(a):e.filter().in(a)}}j(V,"dataType",{BOOLEAN:"boolean",CHAR:"char",DATETIME:"datetime",DECIMAL:"decimal",INT:"int",STRING:"string",UNKNOWN:"unknown"}),j(V,"sortDirection",{ascending:"ASC",descending:"DESC",reverse:"REVERSE",none:null}),j(V,"APPLY_TABLE_CHANGE_TIMEOUT_MS",3e4),j(V,"REVERSE_TYPE",Object.freeze({NONE:"none",PRE_SORT:"pre-sort",POST_SORT:"post-sort"})),j(V,"NUMBER_REGEX",/^-?\d+(\.\d+)?$/),j(V,"executeAndWaitForEvent",function(){var e=x((function*(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V.APPLY_TABLE_CHANGE_TIMEOUT_MS;if(null==t)return null;var a=V.makeCancelableTableEventPromise(t,r,n);return e(t),yield a,t}));return function(t,r,n){return e.apply(this,arguments)}}());const U=V;function H(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class B{static makeColumnFormatMap(e){return null==e?new Map:e.reduce(((e,t)=>{var r=U.getNormalizedType(t.columnType);if(null===r)return e;e.has(r)||e.set(r,new Map);var n=e.get(r);return null==n||n.set(t.columnName,t.format),e}),new Map)}static makeColumnFormattingRule(e,t,r){return{columnType:e,columnName:t,format:r}}constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];H(this,"defaultColumnFormatter",void 0),H(this,"typeFormatterMap",void 0),H(this,"columnFormatMap",void 0),H(this,"truncateNumbersWithPound",void 0),this.defaultColumnFormatter=new S,this.typeFormatterMap=new Map([[U.dataType.BOOLEAN,new c],[U.dataType.CHAR,new m],[U.dataType.DATETIME,new p(e,r)],[U.dataType.DECIMAL,new y(e,n)],[U.dataType.INT,new F(e,a)],[U.dataType.STRING,new w]]),this.columnFormatMap=B.makeColumnFormatMap(t),this.truncateNumbersWithPound=i}getColumnFormatMapForType(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=U.getNormalizedType(e);if(null!==r)return t&&!this.columnFormatMap.has(r)&&this.columnFormatMap.set(r,new Map),this.columnFormatMap.get(r)}getColumnFormat(e,t){var r,n=this.getColumnFormatMapForType(e);return null!==(r=null==n?void 0:n.get(t))&&void 0!==r?r:null}getColumnTypeFormatter(e){var t,r=U.getNormalizedType(e),n=this.defaultColumnFormatter;return r&&(n=null!==(t=this.typeFormatterMap.get(r))&&void 0!==t?t:n),n}getFormattedString(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;if(null==e)return"";var a=this.getColumnTypeFormatter(t),i=n||this.getColumnFormat(t,r);return a.format(e,null!=i?i:void 0)}get timeZone(){var e,t=this.typeFormatterMap.get(U.dataType.DATETIME);return null==t||null===(e=t.dhTimeZone)||void 0===e?void 0:e.id}}function W(e){if(e&&e.formatter){var{formatter:t}=e;return t}}function G(e){return{timeZone:null==e?void 0:e.timeZone,defaultDateTimeFormatString:null==e?void 0:e.defaultDateTimeFormat,showTimeZone:null==e?void 0:e.showTimeZone,showTSeparator:null==e?void 0:e.showTSeparator}}function Q(e,t,r){var n=e.getColumnFormat(r,t);return null!=n&&(n.type===u.TYPE_CONTEXT_PRESET||n.type===u.TYPE_CONTEXT_CUSTOM)}const Y={getColumnFormats:W,getDateTimeFormatterOptions:G,isCustomColumnFormatDefined:Q};var Z=r(670),z=r.n(Z);function X(e,t,r,n,a,i,o){try{var l=e[i](o),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,a)}var $=d().module("MessageUtils"),K="io.deephaven.message.LoginOptions.request",J="io.deephaven.message.SessionDetails.request",ee="io.deephaven.broadcast",te="io.deephaven.broadcast.Login",re="io.deephaven.broadcast.Logout";function ne(e){var t=e;return null!=t&&"string"==typeof t.id&&"string"==typeof t.message}function ae(e){return ne(e)&&e.message===te}function ie(e){return ne(e)&&e.message===re}function oe(e){return null!=e&&"string"==typeof e.id}function le(e){return{message:e,id:arguments.length>1&&void 0!==arguments[1]?arguments[1]:z()(),payload:arguments.length>2?arguments[2]:void 0}}function se(e,t){return{id:e,payload:t}}function ue(){return null!=window.opener?window.opener:null!=window.parent&&window.parent!==window?window.parent:null}function ce(e){return me.apply(this,arguments)}function me(){var e;return e=function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,r=ue();if(null==r)throw new Error("window parent is null, unable to send request.");return new Promise(((n,i)=>{var o,l=z()(),s=e=>{var{data:t}=e;oe(t)?($.debug("Received message",t),(null==t?void 0:t.id)===l?(window.clearTimeout(o),window.removeEventListener("message",s),n(t.payload)):$.debug("Ignore message, id doesn't match",t)):$.debug("Ignoring non-deephaven response",t)};window.addEventListener("message",s),o=window.setTimeout((()=>{window.removeEventListener("message",s),i(new a("Request timed out"))}),t),r.postMessage(le(e,l),"*")}))},me=function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){X(i,n,a,o,l,"next",e)}function l(e){X(i,n,a,o,l,"throw",e)}o(void 0)}))},me.apply(this,arguments)}class fe extends Error{constructor(){var e,t,r;super(...arguments),e=this,r=!0,(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t="isNoConsolesError"))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}}function de(e){return e.isNoConsolesError}const ge=fe;var he=r(748);function pe(e,t,r,n,a,i,o){try{var l=e[i](o),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,a)}function ve(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){pe(i,n,a,o,l,"next",e)}function l(e){pe(i,n,a,o,l,"throw",e)}o(void 0)}))}}var Te=d().module("SessionUtils");function ye(e,t){return Te.info("Starting connection to '".concat(t,"'...")),new e.IdeConnection(t)}function Se(e,t,r){return Ee.apply(this,arguments)}function Ee(){return(Ee=ve((function*(e,t,r){Te.info("Getting console types...");var n=yield t.getConsoleTypes();if(0===n.length)throw new ge("No console types available");Te.info("Available types:",n);var a=n[0];Te.info("Starting session with type",a);var i=yield t.startSession(a),o={type:a,id:z().generate()};return Te.info("Console session established",o),{session:i,config:o,connection:t,details:r,dh:e}}))).apply(this,arguments)}function be(e,t,r){return Te.info("createCoreClient",t),new e.CoreClient(t,r)}function Fe(){return(Fe=ve((function*(){var e,t=yield(0,he.requestParentResponse)(he.SESSION_DETAILS_REQUEST);if(null==(e=t)||"object"!=typeof e)throw new Error("Unexpected session details response: ".concat(t));return t}))).apply(this,arguments)}function we(){return Ne.apply(this,arguments)}function Ne(){return Ne=ve((function*(){return"parent"===new URLSearchParams(window.location.search).get("authProvider")?function(){return Fe.apply(this,arguments)}():{}})),Ne.apply(this,arguments)}function Ce(e,t,r){return Me.apply(this,arguments)}function Me(){return(Me=ve((function*(e,t,r){var n;try{n=yield Se(e,t,r)}catch(e){if(!de(e))throw e}return n}))).apply(this,arguments)}var De=r(378),Oe=r.n(De),ke=d().module("ViewportDataUtils");function Ie(e,t){return String(e.offsetInSnapshot+t)}function _e(e,t){return function(r){var{columns:n,offset:a,rows:i}=r.detail;ke.debug("table updated",r.detail),i.forEach((r=>{var i=t(r,n),o={key:Ie(r,a),item:i};null!=e.getItem(o.key)?e.update(o.key,o):e.append(o)}))}}function Pe(e,t){return t.reduce(((t,r)=>(t[r.name]=e.get(r),t)),{})}function*Ae(e,t){for(var r=e;r<=t;++r)yield{key:String(r)}}function Re(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.map((t=>e.getItem(t)))}function Le(e){return null==e||xe(e)?0:e.size}function xe(e){return"isClosed"in e&&e.isClosed}function je(e,t,r,n){var a=e+t-1,[i,o]=[0,n-1];return[Oe()(e-r,i,o),Oe()(a+r,i,o)]}},378:e=>{var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,a=/^0o[0-7]+$/i,i=parseInt,o=Object.prototype.toString;function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==o.call(e)}(e))return NaN;if(l(e)){var s="function"==typeof e.valueOf?e.valueOf():e;e=l(s)?s+"":s}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var u=n.test(e);return u||a.test(e)?i(e.slice(2),u?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=s(r))==r?r:0),void 0!==t&&(t=(t=s(t))==t?t:0),function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}(s(e),t,r)}},670:(e,t,r)=>{"use strict";e.exports=r(607)},829:(e,t,r)=>{"use strict";var n,a,i,o=r(946),l="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function s(){i=!1}function u(e){if(e){if(e!==n){if(e.length!==l.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,r){return t!==r.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. These characters were not unique: "+t.join(", "));n=e,s()}}else n!==l&&(n=l,s())}function c(){return i||(i=function(){n||u(l);for(var e,t=n.split(""),r=[],a=o.nextValue();t.length>0;)a=o.nextValue(),e=Math.floor(a*t.length),r.push(t.splice(e,1)[0]);return r.join("")}())}e.exports={get:function(){return n||l},characters:function(e){return u(e),n},seed:function(e){o.seed(e),a!==e&&(s(),a=e)},lookup:function(e){return c()[e]},shuffled:c}},719:(e,t,r)=>{"use strict";var n,a,i=r(416);r(829),e.exports=function(e){var t="",r=Math.floor(.001*(Date.now()-1567752802062));return r===a?n++:(n=0,a=r),t+=i(7),t+=i(e),n>0&&(t+=i(n)),t+i(r)}},416:(e,t,r)=>{"use strict";var n=r(829),a=r(766),i=r(296);e.exports=function(e){for(var t,r=0,o="";!t;)o+=i(a,n.get(),1),t=e<Math.pow(16,r+1),r++;return o}},607:(e,t,r)=>{"use strict";var n=r(829),a=r(719),i=r(82),o=r(636)||0;function l(){return a(o)}e.exports=l,e.exports.generate=l,e.exports.seed=function(t){return n.seed(t),e.exports},e.exports.worker=function(t){return o=t,e.exports},e.exports.characters=function(e){return void 0!==e&&n.characters(e),n.shuffled()},e.exports.isValid=i},82:(e,t,r)=>{"use strict";var n=r(829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+n.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},766:e=>{"use strict";var t,r="object"==typeof window&&(window.crypto||window.msCrypto);t=r&&r.getRandomValues?function(e){return r.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],r=0;r<e;r++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},946:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},636:e=>{"use strict";e.exports=0},296:e=>{e.exports=function(e,t,r){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,a=-~(1.6*n*r/t.length),i="";;)for(var o=e(a),l=a;l--;)if((i+=t[o[l]&n]||"").length===+r)return i}}}]);