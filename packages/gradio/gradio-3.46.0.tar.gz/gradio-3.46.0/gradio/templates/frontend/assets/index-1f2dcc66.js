import{S as be,e as ge,s as we,y as de,o as H,Q as qe,h as A,p as O,w as z,r as P,u as G,v as Q,k as T,a0 as Fe,a1 as Le,C as Me,a5 as Ve,F as q,G as F,H as L,a7 as Xe,R as te,E as ne,I as Z,m as S,g as w,K as N,N as R,j as I,aq as We,O as ke,M as W,B as Ke,t as ve,x as je,Z as Oe,ae as Pe,V as Qe,W as Ue}from"./index-54c53184.js";import{n as ie,B as Ze}from"./Button-d872f1fb.js";import{B as ye}from"./BlockLabel-87a2d65d.js";import{I as Je}from"./IconButton-33b7db6d.js";import{E as Ye}from"./Empty-5901c526.js";import{S as pe}from"./ShareButton-66080830.js";import{M as xe}from"./ModifyUpload-c21a7a2a.js";import{D as $e}from"./Download-8f89405e.js";import{I as ze}from"./Image-8024caa8.js";import{u as el}from"./utils-c3e3db58.js";import"./Undo-23dfec0c.js";async function ll(e){return e?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(e.map(async([l,n])=>l===null?"":await el(l.data,"url")))).map(l=>`<img src="${l}" style="height: 400px" />`).join("")}</div>`:""}const{window:Be}=Ve;function ae(e,t,l){const n=e.slice();return n[39]=t[l][0],n[40]=t[l][1],n[42]=l,n}function oe(e,t,l){const n=e.slice();return n[39]=t[l],n[43]=t,n[42]=l,n}function fe(e){let t,l;return t=new ye({props:{show_label:e[0],Icon:ze,label:e[1]||"Gallery"}}),{c(){q(t.$$.fragment)},m(n,i){F(t,n,i),l=!0},p(n,i){const s={};i[0]&1&&(s.show_label=n[0]),i[0]&2&&(s.label=n[1]||"Gallery"),t.$set(s)},i(n){l||(z(t.$$.fragment,n),l=!0)},o(n){G(t.$$.fragment,n),l=!1},d(n){L(t,n)}}}function tl(e){let t,l,n,i,s,m,a=e[11]!==null&&e[6]&&se(e),f=e[8]&&ce(e),k=Z(e[10]),o=[];for(let h=0;h<k.length;h+=1)o[h]=me(ae(e,k,h));return{c(){a&&a.c(),t=H(),l=S("div"),n=S("div"),f&&f.c(),i=H();for(let h=0;h<o.length;h+=1)o[h].c();w(n,"class","grid-container svelte-fiatpe"),N(n,"--grid-cols",e[3]),N(n,"--grid-rows",e[4]),N(n,"--object-fit",e[7]),N(n,"height",e[5]),R(n,"pt-6",e[0]),w(l,"class","grid-wrap svelte-fiatpe"),de(()=>e[34].call(l)),R(l,"fixed-height",!e[5]||e[5]=="auto")},m(h,u){a&&a.m(h,u),A(h,t,u),A(h,l,u),I(l,n),f&&f.m(n,null),I(n,i);for(let _=0;_<o.length;_+=1)o[_]&&o[_].m(n,null);s=We(l,e[34].bind(l)),m=!0},p(h,u){if(h[11]!==null&&h[6]?a?(a.p(h,u),u[0]&2112&&z(a,1)):(a=se(h),a.c(),z(a,1),a.m(t.parentNode,t)):a&&(P(),G(a,1,1,()=>{a=null}),Q()),h[8]?f?(f.p(h,u),u[0]&256&&z(f,1)):(f=ce(h),f.c(),z(f,1),f.m(n,i)):f&&(P(),G(f,1,1,()=>{f=null}),Q()),u[0]&3072){k=Z(h[10]);let _;for(_=0;_<k.length;_+=1){const d=ae(h,k,_);o[_]?o[_].p(d,u):(o[_]=me(d),o[_].c(),o[_].m(n,null))}for(;_<o.length;_+=1)o[_].d(1);o.length=k.length}(!m||u[0]&8)&&N(n,"--grid-cols",h[3]),(!m||u[0]&16)&&N(n,"--grid-rows",h[4]),(!m||u[0]&128)&&N(n,"--object-fit",h[7]),(!m||u[0]&32)&&N(n,"height",h[5]),(!m||u[0]&1)&&R(n,"pt-6",h[0]),(!m||u[0]&32)&&R(l,"fixed-height",!h[5]||h[5]=="auto")},i(h){m||(z(a),z(f),m=!0)},o(h){G(a),G(f),m=!1},d(h){h&&(T(t),T(l)),a&&a.d(h),f&&f.d(),ke(o,h),s()}}}function nl(e){let t,l;return t=new Ye({props:{unpadded_box:!0,size:"large",$$slots:{default:[il]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(n,i){F(t,n,i),l=!0},p(n,i){const s={};i[1]&8192&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){l||(z(t.$$.fragment,n),l=!0)},o(n){G(t.$$.fragment,n),l=!1},d(n){L(t,n)}}}function se(e){let t,l,n,i,s,m,a,f,k,o,h,u,_,d,C,M,v=e[9]&&re(e);i=new xe({props:{absolute:!1}}),i.$on("clear",e[26]);let B=e[10][e[11]][1]&&ue(e),E=Z(e[10]),j=[];for(let b=0;b<E.length;b+=1)j[b]=_e(oe(e,E,b));return{c(){t=S("button"),l=S("div"),v&&v.c(),n=H(),q(i.$$.fragment),s=H(),m=S("button"),a=S("img"),h=H(),B&&B.c(),u=H(),_=S("div");for(let b=0;b<j.length;b+=1)j[b].c();w(l,"class","icon-buttons svelte-fiatpe"),w(a,"data-testid","detailed-image"),W(a.src,f=e[10][e[11]][0].data)||w(a,"src",f),w(a,"alt",k=e[10][e[11]][1]||""),w(a,"title",o=e[10][e[11]][1]||null),w(a,"loading","lazy"),w(a,"class","svelte-fiatpe"),R(a,"with-caption",!!e[10][e[11]][1]),w(m,"class","image-button svelte-fiatpe"),N(m,"height","calc(100% - "+(e[10][e[11]][1]?"80px":"60px")+")"),w(m,"aria-label","detailed view of selected image"),w(_,"class","thumbnails scroll-hide svelte-fiatpe"),w(_,"data-testid","container_el"),w(t,"class","preview svelte-fiatpe")},m(b,D){A(b,t,D),I(t,l),v&&v.m(l,null),I(l,n),F(i,l,null),I(t,s),I(t,m),I(m,a),I(t,h),B&&B.m(t,null),I(t,u),I(t,_);for(let g=0;g<j.length;g+=1)j[g]&&j[g].m(_,null);e[30](_),d=!0,C||(M=[O(m,"click",e[27]),O(t,"keydown",e[18])],C=!0)},p(b,D){if(b[9]?v?(v.p(b,D),D[0]&512&&z(v,1)):(v=re(b),v.c(),z(v,1),v.m(l,n)):v&&(P(),G(v,1,1,()=>{v=null}),Q()),(!d||D[0]&3072&&!W(a.src,f=b[10][b[11]][0].data))&&w(a,"src",f),(!d||D[0]&3072&&k!==(k=b[10][b[11]][1]||""))&&w(a,"alt",k),(!d||D[0]&3072&&o!==(o=b[10][b[11]][1]||null))&&w(a,"title",o),(!d||D[0]&3072)&&R(a,"with-caption",!!b[10][b[11]][1]),(!d||D[0]&3072)&&N(m,"height","calc(100% - "+(b[10][b[11]][1]?"80px":"60px")+")"),b[10][b[11]][1]?B?B.p(b,D):(B=ue(b),B.c(),B.m(t,u)):B&&(B.d(1),B=null),D[0]&7168){E=Z(b[10]);let g;for(g=0;g<E.length;g+=1){const V=oe(b,E,g);j[g]?j[g].p(V,D):(j[g]=_e(V),j[g].c(),j[g].m(_,null))}for(;g<j.length;g+=1)j[g].d(1);j.length=E.length}},i(b){d||(z(v),z(i.$$.fragment,b),d=!0)},o(b){G(v),G(i.$$.fragment,b),d=!1},d(b){b&&T(t),v&&v.d(),L(i),B&&B.d(),ke(j,b),e[30](null),C=!1,Ke(M)}}}function re(e){let t,l,n,i;return l=new Je({props:{Icon:$e,label:e[16]("common.download")}}),{c(){t=S("a"),q(l.$$.fragment),w(t,"href",n=x(e[2][e[11]])),w(t,"target",window.__is_colab__?"_blank":null),w(t,"download","image"),w(t,"class","svelte-fiatpe")},m(s,m){A(s,t,m),F(l,t,null),i=!0},p(s,m){const a={};m[0]&65536&&(a.label=s[16]("common.download")),l.$set(a),(!i||m[0]&2052&&n!==(n=x(s[2][s[11]])))&&w(t,"href",n)},i(s){i||(z(l.$$.fragment,s),i=!0)},o(s){G(l.$$.fragment,s),i=!1},d(s){s&&T(t),L(l)}}}function ue(e){let t,l=e[10][e[11]][1]+"",n;return{c(){t=S("caption"),n=ve(l),w(t,"class","caption svelte-fiatpe")},m(i,s){A(i,t,s),I(t,n)},p(i,s){s[0]&3072&&l!==(l=i[10][i[11]][1]+"")&&je(n,l)},d(i){i&&T(t)}}}function _e(e){let t,l,n,i,s,m,a=e[42],f,k;const o=()=>e[28](t,a),h=()=>e[28](null,a);function u(){return e[29](e[42])}return{c(){t=S("button"),l=S("img"),s=H(),W(l.src,n=e[39][0].data)||w(l,"src",n),w(l,"title",i=e[39][1]||null),w(l,"alt",""),w(l,"loading","lazy"),w(l,"class","svelte-fiatpe"),w(t,"class","thumbnail-item thumbnail-small svelte-fiatpe"),w(t,"aria-label",m="Thumbnail "+(e[42]+1)+" of "+e[10].length),R(t,"selected",e[11]===e[42])},m(_,d){A(_,t,d),I(t,l),I(t,s),o(),f||(k=O(t,"click",u),f=!0)},p(_,d){e=_,d[0]&1024&&!W(l.src,n=e[39][0].data)&&w(l,"src",n),d[0]&1024&&i!==(i=e[39][1]||null)&&w(l,"title",i),d[0]&1024&&m!==(m="Thumbnail "+(e[42]+1)+" of "+e[10].length)&&w(t,"aria-label",m),a!==e[42]&&(h(),a=e[42],o()),d[0]&2048&&R(t,"selected",e[11]===e[42])},d(_){_&&T(t),h(),f=!1,k()}}}function ce(e){let t,l,n;return l=new pe({props:{value:e[10],formatter:ll}}),l.$on("share",e[31]),l.$on("error",e[32]),{c(){t=S("div"),q(l.$$.fragment),w(t,"class","icon-button svelte-fiatpe")},m(i,s){A(i,t,s),F(l,t,null),n=!0},p(i,s){const m={};s[0]&1024&&(m.value=i[10]),l.$set(m)},i(i){n||(z(l.$$.fragment,i),n=!0)},o(i){G(l.$$.fragment,i),n=!1},d(i){i&&T(t),L(l)}}}function he(e){let t,l=e[40]+"",n;return{c(){t=S("div"),n=ve(l),w(t,"class","caption-label svelte-fiatpe")},m(i,s){A(i,t,s),I(t,n)},p(i,s){s[0]&1024&&l!==(l=i[40]+"")&&je(n,l)},d(i){i&&T(t)}}}function me(e){let t,l,n,i,s,m,a,f,k,o=e[40]&&he(e);function h(){return e[33](e[42])}return{c(){t=S("button"),l=S("img"),s=H(),o&&o.c(),m=H(),w(l,"alt",n=e[40]||""),W(l.src,i=typeof e[39]=="string"?e[39]:e[39].data)||w(l,"src",i),w(l,"loading","lazy"),w(l,"class","svelte-fiatpe"),w(t,"class","thumbnail-item thumbnail-lg svelte-fiatpe"),w(t,"aria-label",a="Thumbnail "+(e[42]+1)+" of "+e[10].length),R(t,"selected",e[11]===e[42])},m(u,_){A(u,t,_),I(t,l),I(t,s),o&&o.m(t,null),I(t,m),f||(k=O(t,"click",h),f=!0)},p(u,_){e=u,_[0]&1024&&n!==(n=e[40]||"")&&w(l,"alt",n),_[0]&1024&&!W(l.src,i=typeof e[39]=="string"?e[39]:e[39].data)&&w(l,"src",i),e[40]?o?o.p(e,_):(o=he(e),o.c(),o.m(t,m)):o&&(o.d(1),o=null),_[0]&1024&&a!==(a="Thumbnail "+(e[42]+1)+" of "+e[10].length)&&w(t,"aria-label",a),_[0]&2048&&R(t,"selected",e[11]===e[42])},d(u){u&&T(t),o&&o.d(),f=!1,k()}}}function il(e){let t,l;return t=new ze({}),{c(){q(t.$$.fragment)},m(n,i){F(t,n,i),l=!0},i(n){l||(z(t.$$.fragment,n),l=!0)},o(n){G(t.$$.fragment,n),l=!1},d(n){L(t,n)}}}function al(e){let t,l,n,i,s,m,a;de(e[25]);let f=e[0]&&fe(e);const k=[nl,tl],o=[];function h(u,_){return u[2]===null||u[10]===null||u[10].length===0?0:1}return l=h(e),n=o[l]=k[l](e),{c(){f&&f.c(),t=H(),n.c(),i=qe()},m(u,_){f&&f.m(u,_),A(u,t,_),o[l].m(u,_),A(u,i,_),s=!0,m||(a=O(Be,"resize",e[25]),m=!0)},p(u,_){u[0]?f?(f.p(u,_),_[0]&1&&z(f,1)):(f=fe(u),f.c(),z(f,1),f.m(t.parentNode,t)):f&&(P(),G(f,1,1,()=>{f=null}),Q());let d=l;l=h(u),l===d?o[l].p(u,_):(P(),G(o[d],1,1,()=>{o[d]=null}),Q(),n=o[l],n?n.p(u,_):(n=o[l]=k[l](u),n.c()),z(n,1),n.m(i.parentNode,i))},i(u){s||(z(f),z(n),s=!0)},o(u){G(f),G(n),s=!1},d(u){u&&(T(t),T(i)),f&&f.d(u),o[l].d(u),m=!1,a()}}}function ol(e){return typeof e=="object"&&e!==null&&"data"in e}function x(e){return ol(e)?e.data:typeof e=="string"?e:Array.isArray(e)?x(e[0]):""}function fl(e,t,l){let n,i,s;Fe(e,Le,r=>l(16,s=r));let{show_label:m=!0}=t,{label:a}=t,{root:f=""}=t,{root_url:k=null}=t,{value:o=null}=t,{columns:h=[2]}=t,{rows:u=void 0}=t,{height:_="auto"}=t,{preview:d}=t,{allow_preview:C=!0}=t,{object_fit:M="cover"}=t,{show_share_button:v=!1}=t,{show_download_button:B=!1}=t;const E=Me();let j=!0,b=null,D=o,g=d&&o?.length?0:null,V=g;function U(r){const K=r.target,Y=r.clientX,p=K.offsetWidth/2;Y<p?l(11,g=n):l(11,g=i)}function y(r){switch(r.code){case"Escape":r.preventDefault(),l(11,g=null);break;case"ArrowLeft":r.preventDefault(),l(11,g=n);break;case"ArrowRight":r.preventDefault(),l(11,g=i);break}}let c=[],X;async function De(r){if(typeof r!="number")return;await Xe(),c[r].focus();const{left:K,width:Y}=X.getBoundingClientRect(),{left:ee,width:p}=c[r].getBoundingClientRect(),le=ee-K+p/2-Y/2+X.scrollLeft;X?.scrollTo({left:le<0?0:le,behavior:"smooth"})}let J=0,$=0;function Ge(){l(15,$=Be.innerHeight)}const Ie=()=>l(11,g=null),Se=r=>U(r);function Ae(r,K){te[r?"unshift":"push"](()=>{c[K]=r,l(12,c)})}const Te=r=>l(11,g=r);function Ee(r){te[r?"unshift":"push"](()=>{X=r,l(13,X)})}function He(r){ne.call(this,e,r)}function Ce(r){ne.call(this,e,r)}const Ne=r=>l(11,g=r);function Re(){J=this.clientHeight,l(14,J)}return e.$$set=r=>{"show_label"in r&&l(0,m=r.show_label),"label"in r&&l(1,a=r.label),"root"in r&&l(19,f=r.root),"root_url"in r&&l(20,k=r.root_url),"value"in r&&l(2,o=r.value),"columns"in r&&l(3,h=r.columns),"rows"in r&&l(4,u=r.rows),"height"in r&&l(5,_=r.height),"preview"in r&&l(21,d=r.preview),"allow_preview"in r&&l(6,C=r.allow_preview),"object_fit"in r&&l(7,M=r.object_fit),"show_share_button"in r&&l(8,v=r.show_share_button),"show_download_button"in r&&l(9,B=r.show_download_button)},e.$$.update=()=>{e.$$.dirty[0]&4194308&&l(22,j=o==null||o.length==0?!0:j),e.$$.dirty[0]&1572868&&l(10,b=o===null?null:o.map(r=>Array.isArray(r)?[ie(r[0],f,k),r[1]]:[ie(r,f,k),null])),e.$$.dirty[0]&14682116&&D!==o&&(j?(l(11,g=d&&o?.length?0:null),l(22,j=!1)):l(11,g=g!==null&&o!==null&&g<o.length?g:null),l(23,D=o)),e.$$.dirty[0]&3072&&(n=((g??0)+(b?.length??0)-1)%(b?.length??0)),e.$$.dirty[0]&3072&&(i=((g??0)+1)%(b?.length??0)),e.$$.dirty[0]&16780288&&g!==V&&(l(24,V=g),g!==null&&E("select",{index:g,value:b?.[g][1]})),e.$$.dirty[0]&2112&&C&&De(g)},[m,a,o,h,u,_,C,M,v,B,b,g,c,X,J,$,s,U,y,f,k,d,j,D,V,Ge,Ie,Se,Ae,Te,Ee,He,Ce,Ne,Re]}class sl extends be{constructor(t){super(),ge(this,t,fl,al,we,{show_label:0,label:1,root:19,root_url:20,value:2,columns:3,rows:4,height:5,preview:21,allow_preview:6,object_fit:7,show_share_button:8,show_download_button:9},null,[-1,-1])}}function rl(e){let t,l,n,i;const s=[e[0]];let m={};for(let a=0;a<s.length;a+=1)m=Oe(m,s[a]);return t=new Pe({props:m}),n=new sl({props:{label:e[2],value:e[8],show_label:e[1],root:e[3],root_url:e[4],columns:e[12],rows:e[13],height:e[14],preview:e[15],object_fit:e[17],allow_preview:e[16],show_share_button:e[18],show_download_button:e[19]}}),n.$on("select",e[21]),n.$on("share",e[22]),n.$on("error",e[23]),{c(){q(t.$$.fragment),l=H(),q(n.$$.fragment)},m(a,f){F(t,a,f),A(a,l,f),F(n,a,f),i=!0},p(a,f){const k=f&1?Qe(s,[Ue(a[0])]):{};t.$set(k);const o={};f&4&&(o.label=a[2]),f&256&&(o.value=a[8]),f&2&&(o.show_label=a[1]),f&8&&(o.root=a[3]),f&16&&(o.root_url=a[4]),f&4096&&(o.columns=a[12]),f&8192&&(o.rows=a[13]),f&16384&&(o.height=a[14]),f&32768&&(o.preview=a[15]),f&131072&&(o.object_fit=a[17]),f&65536&&(o.allow_preview=a[16]),f&262144&&(o.show_share_button=a[18]),f&524288&&(o.show_download_button=a[19]),n.$set(o)},i(a){i||(z(t.$$.fragment,a),z(n.$$.fragment,a),i=!0)},o(a){G(t.$$.fragment,a),G(n.$$.fragment,a),i=!1},d(a){a&&T(l),L(t,a),L(n,a)}}}function ul(e){let t,l;return t=new Ze({props:{visible:e[7],variant:"solid",padding:!1,elem_id:e[5],elem_classes:e[6],container:e[9],scale:e[10],min_width:e[11],allow_overflow:!1,height:typeof e[14]=="number"?e[14]:void 0,$$slots:{default:[rl]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(n,i){F(t,n,i),l=!0},p(n,[i]){const s={};i&128&&(s.visible=n[7]),i&32&&(s.elem_id=n[5]),i&64&&(s.elem_classes=n[6]),i&512&&(s.container=n[9]),i&1024&&(s.scale=n[10]),i&2048&&(s.min_width=n[11]),i&16384&&(s.height=typeof n[14]=="number"?n[14]:void 0),i&18870559&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){l||(z(t.$$.fragment,n),l=!0)},o(n){G(t.$$.fragment,n),l=!1},d(n){L(t,n)}}}function _l(e,t,l){let{loading_status:n}=t,{show_label:i}=t,{label:s}=t,{root:m}=t,{root_url:a}=t,{elem_id:f=""}=t,{elem_classes:k=[]}=t,{visible:o=!0}=t,{value:h=null}=t,{container:u=!0}=t,{scale:_=null}=t,{min_width:d=void 0}=t,{columns:C=[2]}=t,{rows:M=void 0}=t,{height:v="auto"}=t,{preview:B}=t,{allow_preview:E=!0}=t,{object_fit:j="cover"}=t,{show_share_button:b=!1}=t,{show_download_button:D=!1}=t,{gradio:g}=t;const V=c=>g.dispatch("select",c.detail),U=c=>g.dispatch("share",c.detail),y=c=>g.dispatch("error",c.detail);return e.$$set=c=>{"loading_status"in c&&l(0,n=c.loading_status),"show_label"in c&&l(1,i=c.show_label),"label"in c&&l(2,s=c.label),"root"in c&&l(3,m=c.root),"root_url"in c&&l(4,a=c.root_url),"elem_id"in c&&l(5,f=c.elem_id),"elem_classes"in c&&l(6,k=c.elem_classes),"visible"in c&&l(7,o=c.visible),"value"in c&&l(8,h=c.value),"container"in c&&l(9,u=c.container),"scale"in c&&l(10,_=c.scale),"min_width"in c&&l(11,d=c.min_width),"columns"in c&&l(12,C=c.columns),"rows"in c&&l(13,M=c.rows),"height"in c&&l(14,v=c.height),"preview"in c&&l(15,B=c.preview),"allow_preview"in c&&l(16,E=c.allow_preview),"object_fit"in c&&l(17,j=c.object_fit),"show_share_button"in c&&l(18,b=c.show_share_button),"show_download_button"in c&&l(19,D=c.show_download_button),"gradio"in c&&l(20,g=c.gradio)},[n,i,s,m,a,f,k,o,h,u,_,d,C,M,v,B,E,j,b,D,g,V,U,y]}class cl extends be{constructor(t){super(),ge(this,t,_l,ul,we,{loading_status:0,show_label:1,label:2,root:3,root_url:4,elem_id:5,elem_classes:6,visible:7,value:8,container:9,scale:10,min_width:11,columns:12,rows:13,height:14,preview:15,allow_preview:16,object_fit:17,show_share_button:18,show_download_button:19,gradio:20})}}const Gl=cl;export{Gl as default};
//# sourceMappingURL=index-1f2dcc66.js.map
