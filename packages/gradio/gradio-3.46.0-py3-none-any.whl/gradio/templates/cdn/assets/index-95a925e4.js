import{S as X,e as x,s as $,f as O,g as f,h as p,j as M,n as S,k as y,m as L,o as q,p as Z,w as d,r as D,u as b,v as P,aj as De,F as E,G as N,H as A,B as ie,Q as _e,N as j,ak as ce,af as Pe,C as Ve,al as Ue,am as Ze,I as ne,O as Ee,E as Y,R as qe,K as Ie,M as J,t as Fe,x as Oe,Z as Re,ae as Ge,V as Ke,W as Qe}from"./index-09fadcb3.js";import{u as me,c as We}from"./utils-c3e3db58.js";import{g as de,B as Ye,n as be}from"./Button-deed83ad.js";import{S as Je}from"./ShareButton-a39d1285.js";import{M as Xe}from"./StaticMarkdown-b09b7c7e.js";import{C as xe,a as $e}from"./Copy-8b15eef4.js";import{B as el}from"./BlockLabel-2f35da01.js";import"./IconButton-5457c1c3.js";function ll(l){let e,n,t;return{c(){e=O("svg"),n=O("path"),t=O("path"),f(n,"fill","currentColor"),f(n,"d","M17.74 30L16 29l4-7h6a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h9v2H6a4 4 0 0 1-4-4V8a4 4 0 0 1 4-4h20a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4h-4.84Z"),f(t,"fill","currentColor"),f(t,"d","M8 10h16v2H8zm0 6h10v2H8z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),f(e,"aria-hidden","true"),f(e,"role","img"),f(e,"class","iconify iconify--carbon"),f(e,"width","100%"),f(e,"height","100%"),f(e,"preserveAspectRatio","xMidYMid meet"),f(e,"viewBox","0 0 32 32")},m(i,o){p(i,e,o),M(e,n),M(e,t)},p:S,i:S,o:S,d(i){i&&y(e)}}}class tl extends X{constructor(e){super(),x(this,e,null,ll,$,{})}}function nl(l){let e,n,t,i;return{c(){e=O("svg"),n=O("path"),t=O("path"),f(n,"stroke","currentColor"),f(n,"stroke-width","1.5"),f(n,"stroke-linecap","round"),f(n,"d","M16.472 3.5H4.1a.6.6 0 0 0-.6.6v9.8a.6.6 0 0 0 .6.6h2.768a2 2 0 0 1 1.715.971l2.71 4.517a1.631 1.631 0 0 0 2.961-1.308l-1.022-3.408a.6.6 0 0 1 .574-.772h4.575a2 2 0 0 0 1.93-2.526l-1.91-7A2 2 0 0 0 16.473 3.5Z"),f(t,"stroke","currentColor"),f(t,"stroke-width","1.5"),f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","M7 14.5v-11"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"width","15px"),f(e,"height","15px"),f(e,"viewBox","0 0 24 24"),f(e,"fill",i=l[0]?"currentColor":"none"),f(e,"stroke-width","1.5"),f(e,"color","currentColor")},m(o,s){p(o,e,s),M(e,n),M(e,t)},p(o,[s]){s&1&&i!==(i=o[0]?"currentColor":"none")&&f(e,"fill",i)},i:S,o:S,d(o){o&&y(e)}}}function il(l,e,n){let{actioned:t}=e;return l.$$set=i=>{"actioned"in i&&n(0,t=i.actioned)},[t]}class al extends X{constructor(e){super(),x(this,e,il,nl,$,{actioned:0})}}function sl(l){let e,n,t,i;return{c(){e=O("svg"),n=O("path"),t=O("path"),f(n,"stroke","currentColor"),f(n,"stroke-width","1.5"),f(n,"stroke-linecap","round"),f(n,"d","M16.472 20H4.1a.6.6 0 0 1-.6-.6V9.6a.6.6 0 0 1 .6-.6h2.768a2 2 0 0 0 1.715-.971l2.71-4.517a1.631 1.631 0 0 1 2.961 1.308l-1.022 3.408a.6.6 0 0 0 .574.772h4.575a2 2 0 0 1 1.93 2.526l-1.91 7A2 2 0 0 1 16.473 20Z"),f(t,"stroke","currentColor"),f(t,"stroke-width","1.5"),f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","M7 20V9"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"width","15px"),f(e,"height","15px"),f(e,"viewBox","0 0 24 24"),f(e,"fill",i=l[0]?"currentColor":"none"),f(e,"stroke-width","1.5"),f(e,"color","currentColor")},m(o,s){p(o,e,s),M(e,n),M(e,t)},p(o,[s]){s&1&&i!==(i=o[0]?"currentColor":"none")&&f(e,"fill",i)},i:S,o:S,d(o){o&&y(e)}}}function rl(l,e,n){let{actioned:t}=e;return l.$$set=i=>{"actioned"in i&&n(0,t=i.actioned)},[t]}class ol extends X{constructor(e){super(),x(this,e,rl,sl,$,{actioned:0})}}const fl=async l=>(await Promise.all(l.map(async n=>await Promise.all(n.map(async(t,i)=>{if(t===null)return"";let o=i===0?"ðŸ˜ƒ":"ðŸ¤–",s="";if(typeof t=="string"){const r={audio:/<audio.*?src="(\/file=.*?)"/g,video:/<video.*?src="(\/file=.*?)"/g,image:/<img.*?src="(\/file=.*?)".*?\/>|!\[.*?\]\((\/file=.*?)\)/g};s=t;for(let[a,u]of Object.entries(r)){let _;for(;(_=u.exec(t))!==null;){const h=_[1]||_[2],g=await me(h,"url");s=s.replace(h,g)}}}else{const r=await me(t.data,"url");t.mime_type?.includes("audio")?s=`<audio controls src="${r}"></audio>`:t.mime_type?.includes("video")?s=r:t.mime_type?.includes("image")&&(s=`<img src="${r}" />`)}return`${o}: ${s}`}))))).map(n=>n.join(n[0]!==""&&n[1]!==""?`
`:"")).join(`
`);function he(l){let e,n;return e=new xe({}),{c(){E(e.$$.fragment)},m(t,i){N(e,t,i),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function ge(l){let e,n;return e=new $e({}),{c(){E(e.$$.fragment)},m(t,i){N(e,t,i),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function ul(l){let e,n,t,i,o,s,r=!l[0]&&he(),a=l[0]&&ge();return{c(){e=L("button"),r&&r.c(),n=q(),a&&a.c(),f(e,"title","copy"),f(e,"aria-label",t=l[0]?"Copied message":"Copy message"),f(e,"class","svelte-11hlfrc")},m(u,_){p(u,e,_),r&&r.m(e,null),M(e,n),a&&a.m(e,null),i=!0,o||(s=Z(e,"click",l[1]),o=!0)},p(u,[_]){u[0]?r&&(D(),b(r,1,1,()=>{r=null}),P()):r?_&1&&d(r,1):(r=he(),r.c(),d(r,1),r.m(e,n)),u[0]?a?_&1&&d(a,1):(a=ge(),a.c(),d(a,1),a.m(e,null)):a&&(D(),b(a,1,1,()=>{a=null}),P()),(!i||_&1&&t!==(t=u[0]?"Copied message":"Copy message"))&&f(e,"aria-label",t)},i(u){i||(d(r),d(a),i=!0)},o(u){b(r),b(a),i=!1},d(u){u&&y(e),r&&r.d(),a&&a.d(),o=!1,s()}}}function _l(l,e,n){let t=!1,{value:i}=e,o;function s(){n(0,t=!0),o&&clearTimeout(o),o=setTimeout(()=>{n(0,t=!1)},2e3)}async function r(){if("clipboard"in navigator)await navigator.clipboard.writeText(i),s();else{const a=document.createElement("textarea");a.value=i,a.style.position="absolute",a.style.left="-999999px",document.body.prepend(a),a.select();try{document.execCommand("copy"),s()}catch(u){console.error(u)}finally{a.remove()}}}return De(()=>{o&&clearTimeout(o)}),l.$$set=a=>{"value"in a&&n(2,i=a.value)},[t,r,i]}class cl extends X{constructor(e){super(),x(this,e,_l,ul,$,{value:2})}}function ml(l){let e,n,t,i,o,s,r;return n=new l[3]({props:{actioned:l[2]}}),{c(){e=L("button"),E(n.$$.fragment),f(e,"title",t=l[0]+" message"),f(e,"aria-label",i=l[2]?`clicked ${l[0]}`:l[0]),f(e,"class","svelte-3snf3m")},m(a,u){p(a,e,u),N(n,e,null),o=!0,s||(r=[Z(e,"click",l[5]),Z(e,"keydown",l[6])],s=!0)},p(a,[u]){const _={};u&4&&(_.actioned=a[2]),n.$set(_),(!o||u&1&&t!==(t=a[0]+" message"))&&f(e,"title",t),(!o||u&5&&i!==(i=a[2]?`clicked ${a[0]}`:a[0]))&&f(e,"aria-label",i)},i(a){o||(d(n.$$.fragment,a),o=!0)},o(a){b(n.$$.fragment,a),o=!1},d(a){a&&y(e),A(n),s=!1,ie(r)}}}function dl(l,e,n){let{action:t}=e,{handle_action:i}=e,o=!1,s=t==="like"?ol:al;function r(){n(2,o=!0)}const a=()=>{r(),i()},u=_=>{_.key==="Enter"&&(r(),i())};return l.$$set=_=>{"action"in _&&n(0,t=_.action),"handle_action"in _&&n(1,i=_.handle_action)},[t,i,o,s,r,a,u]}class ke extends X{constructor(e){super(),x(this,e,dl,ml,$,{action:0,handle_action:1})}}function we(l){let e;return{c(){e=L("div"),e.innerHTML=`<span class="sr-only">Loading content</span> <div class="dot-flashing svelte-1x5t4th"></div>
		Â 
		<div class="dot-flashing svelte-1x5t4th"></div>
		Â 
		<div class="dot-flashing svelte-1x5t4th"></div>`,f(e,"class","message pending svelte-1x5t4th"),f(e,"role","status"),f(e,"aria-label","Loading response"),f(e,"aria-live","polite")},m(n,t){p(n,e,t)},d(n){n&&y(e)}}}function bl(l){let e,n=l[0]&&we();return{c(){n&&n.c(),e=_e()},m(t,i){n&&n.m(t,i),p(t,e,i)},p(t,[i]){t[0]?n||(n=we(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:S,o:S,d(t){t&&y(e),n&&n.d(t)}}}function hl(l,e,n){let{pending_message:t=!1}=e;return l.$$set=i=>{"pending_message"in i&&n(0,t=i.pending_message)},[t]}class gl extends X{constructor(e){super(),x(this,e,hl,bl,$,{pending_message:0})}}function ve(l,e,n){const t=l.slice();return t[36]=e[n],t[38]=n,t}function Ce(l,e,n){const t=l.slice();return t[39]=e[n],t[41]=n,t}function je(l){let e,n,t;return n=new Je({props:{formatter:fl,value:l[0]}}),n.$on("error",l[27]),n.$on("share",l[28]),{c(){e=L("div"),E(n.$$.fragment),f(e,"class","share-button svelte-1pjfiar")},m(i,o){p(i,e,o),N(n,e,null),t=!0},p(i,o){const s={};o[0]&1&&(s.value=i[0]),n.$set(s)},i(i){t||(d(n.$$.fragment,i),t=!0)},o(i){b(n.$$.fragment,i),t=!1},d(i){i&&y(e),A(n)}}}function pe(l){let e,n,t=ne(l[0]),i=[];for(let s=0;s<t.length;s+=1)i[s]=Le(ve(l,t,s));const o=s=>b(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=_e()},m(s,r){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,r);p(s,e,r),n=!0},p(s,r){if(r[0]&983003){t=ne(s[0]);let a;for(a=0;a<t.length;a+=1){const u=ve(s,t,a);i[a]?(i[a].p(u,r),d(i[a],1)):(i[a]=Le(u),i[a].c(),d(i[a],1),i[a].m(e.parentNode,e))}for(D(),a=t.length;a<i.length;a+=1)o(a);P()}},i(s){if(!n){for(let r=0;r<t.length;r+=1)d(i[r]);n=!0}},o(s){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)b(i[r]);n=!1},d(s){s&&y(e),Ee(i,s)}}}function ye(l){let e,n,t;return{c(){e=L("div"),n=L("img"),f(n,"class","avatar-image svelte-1pjfiar"),J(n.src,t=de(l[8][l[41]],l[13],l[14]))||f(n,"src",t),f(n,"alt",(l[41]==0?"user":"bot")+" avatar"),f(e,"class","avatar-container svelte-1pjfiar")},m(i,o){p(i,e,o),M(e,n)},p(i,o){o[0]&24832&&!J(n.src,t=de(i[8][i[41]],i[13],i[14]))&&f(n,"src",t)},d(i){i&&y(e)}}}function kl(l){let e,n=(l[39].orig_name||l[39].name)+"",t,i,o;return{c(){e=L("a"),t=Fe(n),f(e,"data-testid","chatbot-file"),f(e,"href",i=l[39].data),f(e,"target","_blank"),f(e,"download",o=window.__is_colab__?null:l[39].orig_name||l[39].name),f(e,"class","svelte-1pjfiar")},m(s,r){p(s,e,r),M(e,t)},p(s,r){r[0]&1&&n!==(n=(s[39].orig_name||s[39].name)+"")&&Oe(t,n),r[0]&1&&i!==(i=s[39].data)&&f(e,"href",i),r[0]&1&&o!==(o=window.__is_colab__?null:s[39].orig_name||s[39].name)&&f(e,"download",o)},i:S,o:S,d(s){s&&y(e)}}}function wl(l){let e,n,t;return{c(){e=L("img"),f(e,"data-testid","chatbot-image"),J(e.src,n=l[39].data)||f(e,"src",n),f(e,"alt",t=l[39].alt_text),f(e,"class","svelte-1pjfiar")},m(i,o){p(i,e,o)},p(i,o){o[0]&1&&!J(e.src,n=i[39].data)&&f(e,"src",n),o[0]&1&&t!==(t=i[39].alt_text)&&f(e,"alt",t)},i:S,o:S,d(i){i&&y(e)}}}function vl(l){let e,n,t,i,o,s;return{c(){e=L("video"),n=L("track"),f(n,"kind","captions"),f(n,"class","svelte-1pjfiar"),f(e,"data-testid","chatbot-video"),e.controls=!0,J(e.src,t=l[39].data)||f(e,"src",t),f(e,"title",i=l[39].alt_text),f(e,"preload","auto"),f(e,"class","svelte-1pjfiar")},m(r,a){p(r,e,a),M(e,n),o||(s=[Z(e,"play",l[24]),Z(e,"pause",l[25]),Z(e,"ended",l[26])],o=!0)},p(r,a){a[0]&1&&!J(e.src,t=r[39].data)&&f(e,"src",t),a[0]&1&&i!==(i=r[39].alt_text)&&f(e,"title",i)},i:S,o:S,d(r){r&&y(e),o=!1,ie(s)}}}function Cl(l){let e,n,t,i,o;return{c(){e=L("audio"),f(e,"data-testid","chatbot-audio"),e.controls=!0,f(e,"preload","metadata"),J(e.src,n=l[39].data)||f(e,"src",n),f(e,"title",t=l[39].alt_text),f(e,"class","svelte-1pjfiar")},m(s,r){p(s,e,r),i||(o=[Z(e,"play",l[21]),Z(e,"pause",l[22]),Z(e,"ended",l[23])],i=!0)},p(s,r){r[0]&1&&!J(e.src,n=s[39].data)&&f(e,"src",n),r[0]&1&&t!==(t=s[39].alt_text)&&f(e,"title",t)},i:S,o:S,d(s){s&&y(e),i=!1,ie(o)}}}function jl(l){let e,n;return e=new Xe({props:{message:l[39],latex_delimiters:l[1],sanitize_html:l[9],render_markdown:l[11],line_breaks:l[12]}}),e.$on("load",l[17]),{c(){E(e.$$.fragment)},m(t,i){N(e,t,i),n=!0},p(t,i){const o={};i[0]&1&&(o.message=t[39]),i[0]&2&&(o.latex_delimiters=t[1]),i[0]&512&&(o.sanitize_html=t[9]),i[0]&2048&&(o.render_markdown=t[11]),i[0]&4096&&(o.line_breaks=t[12]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function ze(l){let e,n,t,i,o=l[4]&&l[41]==1&&Be(l),s=l[7]&&l[39]&&typeof l[39]=="string"&&He(l);return{c(){e=L("div"),o&&o.c(),n=q(),s&&s.c(),f(e,"class",t="message-buttons-"+(l[41]==0?"user":"bot")+" message-buttons-"+l[15]+" "+(l[8][l[41]]!==null&&"with-avatar")+" svelte-1pjfiar"),j(e,"message-buttons-fit",l[15]==="bubble"&&!l[10]),j(e,"bubble-buttons-user",l[15]==="bubble")},m(r,a){p(r,e,a),o&&o.m(e,null),M(e,n),s&&s.m(e,null),i=!0},p(r,a){r[4]&&r[41]==1?o?(o.p(r,a),a[0]&16&&d(o,1)):(o=Be(r),o.c(),d(o,1),o.m(e,n)):o&&(D(),b(o,1,1,()=>{o=null}),P()),r[7]&&r[39]&&typeof r[39]=="string"?s?(s.p(r,a),a[0]&129&&d(s,1)):(s=He(r),s.c(),d(s,1),s.m(e,null)):s&&(D(),b(s,1,1,()=>{s=null}),P()),(!i||a[0]&33024&&t!==(t="message-buttons-"+(r[41]==0?"user":"bot")+" message-buttons-"+r[15]+" "+(r[8][r[41]]!==null&&"with-avatar")+" svelte-1pjfiar"))&&f(e,"class",t),(!i||a[0]&34048)&&j(e,"message-buttons-fit",r[15]==="bubble"&&!r[10]),(!i||a[0]&33024)&&j(e,"bubble-buttons-user",r[15]==="bubble")},i(r){i||(d(o),d(s),i=!0)},o(r){b(o),b(s),i=!1},d(r){r&&y(e),o&&o.d(),s&&s.d()}}}function Be(l){let e,n,t,i;function o(){return l[31](l[38],l[41],l[39])}e=new ke({props:{action:"like",handle_action:o}});function s(){return l[32](l[38],l[41],l[39])}return t=new ke({props:{action:"dislike",handle_action:s}}),{c(){E(e.$$.fragment),n=q(),E(t.$$.fragment)},m(r,a){N(e,r,a),p(r,n,a),N(t,r,a),i=!0},p(r,a){l=r;const u={};a[0]&1&&(u.handle_action=o),e.$set(u);const _={};a[0]&1&&(_.handle_action=s),t.$set(_)},i(r){i||(d(e.$$.fragment,r),d(t.$$.fragment,r),i=!0)},o(r){b(e.$$.fragment,r),b(t.$$.fragment,r),i=!1},d(r){r&&y(n),A(e,r),A(t,r)}}}function He(l){let e,n;return e=new cl({props:{value:l[39]}}),{c(){E(e.$$.fragment)},m(t,i){N(e,t,i),n=!0},p(t,i){const o={};i[0]&1&&(o.value=t[39]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function Me(l){let e,n,t,i,o,s,r,a,u,_,h,g,z,T,B,I,R,H=l[8][l[41]]!==null&&ye(l);const G=[jl,Cl,vl,wl,kl],C=[];function F(v,w){return w[0]&1&&(o=null),w[0]&1&&(s=null),w[0]&1&&(r=null),typeof v[39]=="string"?0:(o==null&&(o=!!(v[39]!==null&&v[39].mime_type?.includes("audio"))),o?1:(s==null&&(s=!!(v[39]!==null&&v[39].mime_type?.includes("video"))),s?2:(r==null&&(r=!!(v[39]!==null&&v[39].mime_type?.includes("image"))),r?3:v[39]!==null&&v[39].data!==null?4:-1)))}~(a=F(l,[-1,-1]))&&(u=C[a]=G[a](l));function K(){return l[29](l[38],l[41],l[39])}function Q(...v){return l[30](l[38],l[41],l[39],...v)}let k=(l[4]&&l[41]!==0||l[7]&&l[39]&&typeof l[39]=="string")&&ze(l);return{c(){e=L("div"),H&&H.c(),n=q(),t=L("div"),i=L("button"),u&&u.c(),g=q(),k&&k.c(),z=q(),f(i,"data-testid",l[41]==0?"user":"bot"),f(i,"dir",_=l[6]?"rtl":"ltr"),f(i,"aria-label",h=(l[41]==0?"user":"bot")+"'s message:' "+l[39]),f(i,"class","svelte-1pjfiar"),j(i,"latest",l[38]===l[0].length-1),j(i,"message-markdown-disabled",!l[11]),j(i,"selectable",l[3]),Ie(i,"text-align","left"),f(t,"class","message "+(l[41]==0?"user":"bot")+" svelte-1pjfiar"),j(t,"message-fit",l[15]==="bubble"&&!l[10]),j(t,"panel-full-width",l[15]==="panel"),j(t,"message-bubble-border",l[15]==="bubble"),j(t,"message-markdown-disabled",!l[11]),f(e,"class",T="message-row "+l[15]+" "+(l[41]==0?"user-row":"bot-row")+" svelte-1pjfiar"),j(e,"hide",l[39]===null)},m(v,w){p(v,e,w),H&&H.m(e,null),M(e,n),M(e,t),M(t,i),~a&&C[a].m(i,null),M(e,g),k&&k.m(e,null),M(e,z),B=!0,I||(R=[Z(i,"click",K),Z(i,"keydown",Q)],I=!0)},p(v,w){l=v,l[8][l[41]]!==null?H?H.p(l,w):(H=ye(l),H.c(),H.m(e,n)):H&&(H.d(1),H=null);let W=a;a=F(l,w),a===W?~a&&C[a].p(l,w):(u&&(D(),b(C[W],1,1,()=>{C[W]=null}),P()),~a?(u=C[a],u?u.p(l,w):(u=C[a]=G[a](l),u.c()),d(u,1),u.m(i,null)):u=null),(!B||w[0]&64&&_!==(_=l[6]?"rtl":"ltr"))&&f(i,"dir",_),(!B||w[0]&1&&h!==(h=(l[41]==0?"user":"bot")+"'s message:' "+l[39]))&&f(i,"aria-label",h),(!B||w[0]&1)&&j(i,"latest",l[38]===l[0].length-1),(!B||w[0]&2048)&&j(i,"message-markdown-disabled",!l[11]),(!B||w[0]&8)&&j(i,"selectable",l[3]),(!B||w[0]&33792)&&j(t,"message-fit",l[15]==="bubble"&&!l[10]),(!B||w[0]&32768)&&j(t,"panel-full-width",l[15]==="panel"),(!B||w[0]&32768)&&j(t,"message-bubble-border",l[15]==="bubble"),(!B||w[0]&2048)&&j(t,"message-markdown-disabled",!l[11]),l[4]&&l[41]!==0||l[7]&&l[39]&&typeof l[39]=="string"?k?(k.p(l,w),w[0]&145&&d(k,1)):(k=ze(l),k.c(),d(k,1),k.m(e,z)):k&&(D(),b(k,1,1,()=>{k=null}),P()),(!B||w[0]&32768&&T!==(T="message-row "+l[15]+" "+(l[41]==0?"user-row":"bot-row")+" svelte-1pjfiar"))&&f(e,"class",T),(!B||w[0]&32769)&&j(e,"hide",l[39]===null)},i(v){B||(d(u),d(k),B=!0)},o(v){b(u),b(k),B=!1},d(v){v&&y(e),H&&H.d(),~a&&C[a].d(),k&&k.d(),I=!1,ie(R)}}}function Le(l){let e,n,t=ne(l[36]),i=[];for(let s=0;s<t.length;s+=1)i[s]=Me(Ce(l,t,s));const o=s=>b(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=_e()},m(s,r){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,r);p(s,e,r),n=!0},p(s,r){if(r[0]&983003){t=ne(s[36]);let a;for(a=0;a<t.length;a+=1){const u=Ce(s,t,a);i[a]?(i[a].p(u,r),d(i[a],1)):(i[a]=Me(u),i[a].c(),d(i[a],1),i[a].m(e.parentNode,e))}for(D(),a=t.length;a<i.length;a+=1)o(a);P()}},i(s){if(!n){for(let r=0;r<t.length;r+=1)d(i[r]);n=!0}},o(s){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)b(i[r]);n=!1},d(s){s&&y(e),Ee(i,s)}}}function pl(l){let e,n,t,i,o,s,r,a,u,_=l[5]&&l[0]!==null&&l[0].length>0&&je(l),h=l[0]!==null&&pe(l);return o=new gl({props:{pending_message:l[2]}}),{c(){_&&_.c(),e=q(),n=L("div"),t=L("div"),h&&h.c(),i=q(),E(o.$$.fragment),f(t,"class","message-wrap svelte-1pjfiar"),j(t,"bubble-gap",l[15]==="bubble"),f(n,"class",s=ce(l[15]==="bubble"?"bubble-wrap":"panel-wrap")+" svelte-1pjfiar"),f(n,"role","log"),f(n,"aria-label","chatbot conversation"),f(n,"aria-live","polite")},m(g,z){_&&_.m(g,z),p(g,e,z),p(g,n,z),M(n,t),h&&h.m(t,null),M(t,i),N(o,t,null),l[33](n),r=!0,a||(u=Pe(We.call(null,t)),a=!0)},p(g,z){g[5]&&g[0]!==null&&g[0].length>0?_?(_.p(g,z),z[0]&33&&d(_,1)):(_=je(g),_.c(),d(_,1),_.m(e.parentNode,e)):_&&(D(),b(_,1,1,()=>{_=null}),P()),g[0]!==null?h?(h.p(g,z),z[0]&1&&d(h,1)):(h=pe(g),h.c(),d(h,1),h.m(t,i)):h&&(D(),b(h,1,1,()=>{h=null}),P());const T={};z[0]&4&&(T.pending_message=g[2]),o.$set(T),(!r||z[0]&32768)&&j(t,"bubble-gap",g[15]==="bubble"),(!r||z[0]&32768&&s!==(s=ce(g[15]==="bubble"?"bubble-wrap":"panel-wrap")+" svelte-1pjfiar"))&&f(n,"class",s)},i(g){r||(d(_),d(h),d(o.$$.fragment,g),r=!0)},o(g){b(_),b(h),b(o.$$.fragment,g),r=!1},d(g){g&&(y(e),y(n)),_&&_.d(g),h&&h.d(),A(o),l[33](null),a=!1,u()}}}function yl(l,e,n){let{value:t}=e,i=null,{latex_delimiters:o}=e,{pending_message:s=!1}=e,{selectable:r=!1}=e,{likeable:a=!1}=e,{show_share_button:u=!1}=e,{rtl:_=!1}=e,{show_copy_button:h=!1}=e,{avatar_images:g=[null,null]}=e,{sanitize_html:z=!0}=e,{bubble_full_width:T=!0}=e,{render_markdown:B=!0}=e,{line_breaks:I=!0}=e,{root:R}=e,{root_url:H}=e,{layout:G="bubble"}=e,C,F;const K=Ve();Ue(()=>{F=C&&C.offsetHeight+C.scrollTop>C.scrollHeight-100});const Q=()=>{F&&C.scrollTo(0,C.scrollHeight)};Ze(()=>{F&&(Q(),C.querySelectorAll("img").forEach(m=>{m.addEventListener("load",()=>{Q()})}))});function k(m,V,U){K("select",{index:[m,V],value:U})}function v(m,V,U,ue){K("like",{index:[m,V],value:U,liked:ue})}function w(m){Y.call(this,l,m)}function W(m){Y.call(this,l,m)}function le(m){Y.call(this,l,m)}function te(m){Y.call(this,l,m)}function ae(m){Y.call(this,l,m)}function se(m){Y.call(this,l,m)}function re(m){Y.call(this,l,m)}function oe(m){Y.call(this,l,m)}const fe=(m,V,U)=>k(m,V,U),c=(m,V,U,ue)=>{ue.key==="Enter"&&k(m,V,U)},ee=(m,V,U)=>v(m,V,U,!0),Ne=(m,V,U)=>v(m,V,U,!1);function Ae(m){qe[m?"unshift":"push"](()=>{C=m,n(16,C)})}return l.$$set=m=>{"value"in m&&n(0,t=m.value),"latex_delimiters"in m&&n(1,o=m.latex_delimiters),"pending_message"in m&&n(2,s=m.pending_message),"selectable"in m&&n(3,r=m.selectable),"likeable"in m&&n(4,a=m.likeable),"show_share_button"in m&&n(5,u=m.show_share_button),"rtl"in m&&n(6,_=m.rtl),"show_copy_button"in m&&n(7,h=m.show_copy_button),"avatar_images"in m&&n(8,g=m.avatar_images),"sanitize_html"in m&&n(9,z=m.sanitize_html),"bubble_full_width"in m&&n(10,T=m.bubble_full_width),"render_markdown"in m&&n(11,B=m.render_markdown),"line_breaks"in m&&n(12,I=m.line_breaks),"root"in m&&n(13,R=m.root),"root_url"in m&&n(14,H=m.root_url),"layout"in m&&n(15,G=m.layout)},l.$$.update=()=>{l.$$.dirty[0]&1048577&&t!==i&&(n(20,i=t),K("change"))},[t,o,s,r,a,u,_,h,g,z,T,B,I,R,H,G,C,Q,k,v,i,w,W,le,te,ae,se,re,oe,fe,c,ee,Ne,Ae]}class zl extends X{constructor(e){super(),x(this,e,yl,pl,$,{value:0,latex_delimiters:1,pending_message:2,selectable:3,likeable:4,show_share_button:5,rtl:6,show_copy_button:7,avatar_images:8,sanitize_html:9,bubble_full_width:10,render_markdown:11,line_breaks:12,root:13,root_url:14,layout:15},null,[-1,-1])}}function Se(l){let e,n;const t=[l[23],{show_progress:l[23].show_progress==="hidden"?"hidden":"minimal"}];let i={};for(let o=0;o<t.length;o+=1)i=Re(i,t[o]);return e=new Ge({props:i}),{c(){E(e.$$.fragment)},m(o,s){N(e,o,s),n=!0},p(o,s){const r=s[0]&8388608?Ke(t,[Qe(o[23]),{show_progress:o[23].show_progress==="hidden"?"hidden":"minimal"}]):{};e.$set(r)},i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){b(e.$$.fragment,o),n=!1},d(o){A(e,o)}}}function Te(l){let e,n;return e=new el({props:{show_label:l[7],Icon:tl,float:!1,label:l[6]||"Chatbot"}}),{c(){E(e.$$.fragment)},m(t,i){N(e,t,i),n=!0},p(t,i){const o={};i[0]&128&&(o.show_label=t[7]),i[0]&64&&(o.label=t[6]||"Chatbot"),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function Bl(l){let e,n,t,i,o,s=l[23]&&Se(l),r=l[7]&&Te(l);return i=new zl({props:{selectable:l[10],likeable:l[11],show_share_button:l[12],value:l[25],latex_delimiters:l[20],render_markdown:l[18],pending_message:l[23]?.status==="pending",rtl:l[13],show_copy_button:l[14],avatar_images:l[22],sanitize_html:l[15],bubble_full_width:l[16],line_breaks:l[19],layout:l[17],root_url:l[9],root:l[8]}}),i.$on("change",l[26]),i.$on("select",l[27]),i.$on("like",l[28]),i.$on("share",l[29]),i.$on("error",l[30]),{c(){s&&s.c(),e=q(),n=L("div"),r&&r.c(),t=q(),E(i.$$.fragment),f(n,"class","wrapper svelte-nab2ao")},m(a,u){s&&s.m(a,u),p(a,e,u),p(a,n,u),r&&r.m(n,null),M(n,t),N(i,n,null),o=!0},p(a,u){a[23]?s?(s.p(a,u),u[0]&8388608&&d(s,1)):(s=Se(a),s.c(),d(s,1),s.m(e.parentNode,e)):s&&(D(),b(s,1,1,()=>{s=null}),P()),a[7]?r?(r.p(a,u),u[0]&128&&d(r,1)):(r=Te(a),r.c(),d(r,1),r.m(n,t)):r&&(D(),b(r,1,1,()=>{r=null}),P());const _={};u[0]&1024&&(_.selectable=a[10]),u[0]&2048&&(_.likeable=a[11]),u[0]&4096&&(_.show_share_button=a[12]),u[0]&33554432&&(_.value=a[25]),u[0]&1048576&&(_.latex_delimiters=a[20]),u[0]&262144&&(_.render_markdown=a[18]),u[0]&8388608&&(_.pending_message=a[23]?.status==="pending"),u[0]&8192&&(_.rtl=a[13]),u[0]&16384&&(_.show_copy_button=a[14]),u[0]&4194304&&(_.avatar_images=a[22]),u[0]&32768&&(_.sanitize_html=a[15]),u[0]&65536&&(_.bubble_full_width=a[16]),u[0]&524288&&(_.line_breaks=a[19]),u[0]&131072&&(_.layout=a[17]),u[0]&512&&(_.root_url=a[9]),u[0]&256&&(_.root=a[8]),i.$set(_)},i(a){o||(d(s),d(r),d(i.$$.fragment,a),o=!0)},o(a){b(s),b(r),b(i.$$.fragment,a),o=!1},d(a){a&&(y(e),y(n)),s&&s.d(a),r&&r.d(),A(i)}}}function Hl(l){let e,n;return e=new Ye({props:{elem_id:l[0],elem_classes:l[1],visible:l[2],padding:!1,scale:l[4],min_width:l[5],height:l[24],allow_overflow:!1,$$slots:{default:[Bl]},$$scope:{ctx:l}}}),{c(){E(e.$$.fragment)},m(t,i){N(e,t,i),n=!0},p(t,i){const o={};i[0]&1&&(o.elem_id=t[0]),i[0]&2&&(o.elem_classes=t[1]),i[0]&4&&(o.visible=t[2]),i[0]&16&&(o.scale=t[4]),i[0]&32&&(o.min_width=t[5]),i[0]&16777216&&(o.height=t[24]),i[0]&50331592|i[1]&2&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function Ml(l,e,n){let{elem_id:t=""}=e,{elem_classes:i=[]}=e,{visible:o=!0}=e,{value:s=[]}=e,{scale:r=null}=e,{min_width:a=void 0}=e,{label:u}=e,{show_label:_=!0}=e,{root:h}=e,{root_url:g}=e,{selectable:z=!1}=e,{likeable:T=!1}=e,{show_share_button:B=!1}=e,{rtl:I=!1}=e,{show_copy_button:R=!1}=e,{sanitize_html:H=!0}=e,{bubble_full_width:G=!0}=e,{layout:C="bubble"}=e,{render_markdown:F=!0}=e,{line_breaks:K=!0}=e,{latex_delimiters:Q}=e,{gradio:k}=e,{avatar_images:v=[null,null]}=e,w;const W=c=>c.replace('src="/file',`src="${h}file`);let{loading_status:le=void 0}=e,{height:te=400}=e;const ae=()=>k.dispatch("change",s),se=c=>k.dispatch("select",c.detail),re=c=>k.dispatch("like",c.detail),oe=c=>k.dispatch("share",c.detail),fe=c=>k.dispatch("error",c.detail);return l.$$set=c=>{"elem_id"in c&&n(0,t=c.elem_id),"elem_classes"in c&&n(1,i=c.elem_classes),"visible"in c&&n(2,o=c.visible),"value"in c&&n(3,s=c.value),"scale"in c&&n(4,r=c.scale),"min_width"in c&&n(5,a=c.min_width),"label"in c&&n(6,u=c.label),"show_label"in c&&n(7,_=c.show_label),"root"in c&&n(8,h=c.root),"root_url"in c&&n(9,g=c.root_url),"selectable"in c&&n(10,z=c.selectable),"likeable"in c&&n(11,T=c.likeable),"show_share_button"in c&&n(12,B=c.show_share_button),"rtl"in c&&n(13,I=c.rtl),"show_copy_button"in c&&n(14,R=c.show_copy_button),"sanitize_html"in c&&n(15,H=c.sanitize_html),"bubble_full_width"in c&&n(16,G=c.bubble_full_width),"layout"in c&&n(17,C=c.layout),"render_markdown"in c&&n(18,F=c.render_markdown),"line_breaks"in c&&n(19,K=c.line_breaks),"latex_delimiters"in c&&n(20,Q=c.latex_delimiters),"gradio"in c&&n(21,k=c.gradio),"avatar_images"in c&&n(22,v=c.avatar_images),"loading_status"in c&&n(23,le=c.loading_status),"height"in c&&n(24,te=c.height)},l.$$.update=()=>{l.$$.dirty[0]&776&&n(25,w=s?s.map(([c,ee])=>[typeof c=="string"?W(c):be(c,h,g),typeof ee=="string"?W(ee):be(ee,h,g)]):[])},[t,i,o,s,r,a,u,_,h,g,z,T,B,I,R,H,G,C,F,K,Q,k,v,le,te,w,ae,se,re,oe,fe]}class Ll extends X{constructor(e){super(),x(this,e,Ml,Hl,$,{elem_id:0,elem_classes:1,visible:2,value:3,scale:4,min_width:5,label:6,show_label:7,root:8,root_url:9,selectable:10,likeable:11,show_share_button:12,rtl:13,show_copy_button:14,sanitize_html:15,bubble_full_width:16,layout:17,render_markdown:18,line_breaks:19,latex_delimiters:20,gradio:21,avatar_images:22,loading_status:23,height:24},null,[-1,-1])}}const Ul=Ll;export{Ul as default};
//# sourceMappingURL=index-95a925e4.js.map
