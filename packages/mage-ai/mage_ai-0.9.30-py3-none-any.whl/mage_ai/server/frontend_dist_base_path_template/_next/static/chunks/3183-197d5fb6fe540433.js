"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3183],{13183:function(n,e,t){t.d(e,{Z:function(){return bn}});var r,i=t(82394),o=t(21831),l=t(82684),c=t(32013),d=t(98777),u=t(85854),s=t(65701),a=t(1254),v=t(97618),p=t(55485),f=t(70652);!function(n){n.CHECKBOX="checkbox",n.DROPDOWN_MENU="dropdown_menu",n.SWITCH="switch",n.TEXT_FIELD="text_field"}(r||(r={}));var h,m=[r.CHECKBOX,r.DROPDOWN_MENU,r.SWITCH,r.TEXT_FIELD];!function(n){n.DATE="date",n.DATETIME="datetime",n.DICTIONARY="dictionary",n.FLOAT="float",n.INTEGER="integer",n.LIST="list",n.STRING="string"}(h||(h={}));var j=[h.DATE,h.DATETIME,h.DICTIONARY,h.FLOAT,h.INTEGER,h.LIST,h.STRING],x=t(44085),g=t(38276),b=t(30160),Z=t(35576),y=t(17488),I=t(69650),P=t(70515),w=t(28598);function O(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function k(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?O(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var C=function(n){var e=n.interaction||{inputs:{},layout:[],variables:{}},t=e.inputs,i=e.layout,o=e.variables,c=(0,l.useMemo)((function(){var n=[];return null===i||void 0===i||i.forEach((function(e,i){var c=[];null===e||void 0===e||e.forEach((function(n,e){var i,d=n.variable,u=(n.width,(null===o||void 0===o?void 0:o[d])||{uuid:d}),s=u.description,a=u.input,v=u.name,h=u.required,m=(null===t||void 0===t?void 0:t[a])||{options:[],style:null,type:null},j=m.options,O=m.style,C=m.type,E="".concat(d,"-").concat(C),D={required:h},S=[];if(r.CHECKBOX===C)S.push((0,w.jsx)(p.ZP,{alignItems:"center",children:null===j||void 0===j?void 0:j.map((function(n){var e=n.label,t=n.value;return(0,w.jsx)(g.Z,{mr:P.cd,children:(0,w.jsx)(f.Z,k(k({},D),{},{label:e}))},String(t||e))}))},"".concat(E,"-").concat(C)));else if(r.TEXT_FIELD===C)S.push((0,w.jsx)(p.ZP,{flexDirection:"column",children:null!==O&&void 0!==O&&O.multiline?(0,l.createElement)(Z.Z,k(k({},D),{},{key:"".concat(E,"-").concat(C)})):(0,l.createElement)(y.Z,k(k({},D),{},{key:"".concat(E,"-").concat(C)}))},"".concat(E,"-").concat(C)));else if(r.DROPDOWN_MENU===C)S.push((0,l.createElement)(x.Z,k(k({},D),{},{key:"".concat(E,"-").concat(C)}),(0,w.jsx)("option",{value:""}),null===j||void 0===j?void 0:j.map((function(n){var e=n.label,t=n.value;return(0,w.jsx)("option",{value:String(t||e),children:String(e||t)},String(t||e))}))));else if(r.SWITCH===C){var T;c.push((0,w.jsx)(g.Z,{mt:e>=1?P.cd:0,children:(0,w.jsxs)(p.ZP,{alignItems:"center",fullWidth:!0,children:[(0,l.createElement)(I.Z,k(k({},D),{},{compact:!0,key:"".concat(E,"-").concat(C)})),v&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.Z,{ml:P.cd}),(0,w.jsxs)(p.ZP,{flexDirection:"column",fullWidth:!0,children:[(0,w.jsx)(b.ZP,{bold:!0,large:!0,success:!0,children:v}),s&&(null===s||void 0===s||null===(T=s.split("\n"))||void 0===T?void 0:T.map((function(n){return(0,w.jsx)(b.ZP,{default:!0,children:n},n)})))]})]})]})},E))}(null===S||void 0===S?void 0:S.length)>=1&&c.push((0,w.jsxs)(g.Z,{mt:e>=1?P.cd:0,children:[v&&(0,w.jsxs)(g.Z,{mb:1,children:[(0,w.jsx)(b.ZP,{bold:!0,large:!0,success:!0,children:v}),s&&(null===s||void 0===s||null===(i=s.split("\n"))||void 0===i?void 0:i.map((function(n){return(0,w.jsx)(b.ZP,{default:!0,children:n},n)})))]}),S]},E))})),n.push((0,w.jsx)(g.Z,{mt:i>=1?P.Mq:0,children:c},"row-".concat(i)))})),n}),[t,i,o]);return(0,w.jsx)(w.Fragment,{children:c})},E=t(72473),D=t(38626),S=t(44897),T=t(42631),_=t(55283),M=(P.iI,D.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1ry80xj-0"})([""," border-radius:","px;position:relative;border-style:solid;border-width:1px;overflow:hidden;",""],_.Kf,T.n_,(function(n){return"\n    background-color: ".concat((n.theme.background||S.Z.background).panel,";\n  ")}))),R=D.default.div.withConfig({displayName:"indexstyle__HeadlineStyle",componentId:"sc-1ry80xj-1"})(["",""],(function(n){return"\n    background-color: ".concat((n.theme.background||S.Z.background).chartBlock,";\n  ")})),N=D.default.div.withConfig({displayName:"indexstyle__DottedLineStyle",componentId:"sc-1ry80xj-2"})(["",""],(function(n){return"\n    border: 1px dashed ".concat((n.theme.borders||S.Z.borders).light,";\n  ")})),A=D.default.div.withConfig({displayName:"indexstyle__LayoutItemStyle",componentId:"sc-1ry80xj-3"})(["",""],(function(n){return!n.disableDrag&&"\n    &:hover {\n      cursor: move;\n    }\n  "}));var B=function(n){var e=n.columnLayoutSettings,t=n.drag,r=n.drop,o=n.input,l=n.variable,c=n.width,d=null===l||void 0===l?void 0:l.input,u=null===e||void 0===e?void 0:e.variable;return(0,w.jsx)(A,{disableDrag:!t,ref:r,style:{width:c},children:(0,w.jsx)(M,{ref:t,style:{marginLeft:P.iI,marginRight:P.iI},children:(0,w.jsxs)(g.Z,{p:P.cd,children:[!!t&&(0,w.jsx)(g.Z,{mb:1,children:(0,w.jsx)(E.o0,{default:!0,size:2*P.iI})}),(0,w.jsx)(C,{interaction:{inputs:(0,i.Z)({},d,o),layout:[[{variable:u,width:1}]],variables:(0,i.Z)({},u,l)}})]})})})},L=t(75582),q=t(26304),F=t(10975),H=t(14567),W=["columnIndex","columnsInRow","onDrop","rowIndex"];function Y(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function V(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var X=function(n){var e=n.columnIndex,t=(n.columnsInRow,n.onDrop),r=n.rowIndex,i=(0,q.Z)(n,W),o=(0,F.c)((function(){return{collect:function(n){return{isDragging:!!n.isDragging()}},item:{columnIndex:e,rowIndex:r},type:"InteractionLayoutItem"}}),[e,r]),l=(0,L.Z)(o,2),c=(l[0],l[1]),d=(0,H.L)((function(){return{accept:"InteractionLayoutItem",drop:function(n){return null===t||void 0===t?void 0:t(n)}}}),[t]),u=(0,L.Z)(d,2)[1];return(0,w.jsx)(B,V(V({},i),{},{drag:c,drop:u}))};var U=function(n){var e=n.children,t=n.onDrop,r=n.width,i=(0,H.L)((function(){return{accept:"InteractionLayoutItem",drop:function(n){return null===t||void 0===t?void 0:t(n)}}}),[t]),o=(0,L.Z)(i,2)[1];return(0,w.jsx)("div",{ref:o,style:{width:r},children:(0,w.jsxs)(g.Z,{p:P.cd,children:[e,(0,w.jsx)(N,{})]})})},G=t(86735),K=t(19183);var J=function(n){var e=n.containerRef,t=n.interaction,r=n.updateLayout,i=(0,K.i)(),c=(0,l.useState)(null),d=c[0],u=c[1];(0,l.useEffect)((function(){var n;null!==e&&void 0!==e&&e.current&&u(null===e||void 0===e||null===(n=e.current)||void 0===n?void 0:n.getBoundingClientRect())}),[e,i]);var f=(0,l.useMemo)((function(){return{inputs:null===t||void 0===t?void 0:t.inputs,layout:null===t||void 0===t?void 0:t.layout,variables:null===t||void 0===t?void 0:t.variables}}),[t]),h=f.inputs,m=f.layout,j=f.variables,x=(0,l.useCallback)((function(n,e,t,i,l){var c=(0,o.Z)(m||[]),d=c[n]||[],u=d[e];if(null!==l&&void 0!==l&&l.newRow){var s,a=(0,G.oM)(d,e);return c[n]=a,-1===t?c.unshift([u]):t>=(null===(s=c)||void 0===s?void 0:s.length)?c.push([u]):c=(0,G.VS)([u],t,c),0===(null===a||void 0===a?void 0:a.length)&&(c=(0,G.oM)(c,t<n?n+1:n)),void(null===r||void 0===r||r(c))}if(n===t&&e!==i){var v=(0,G.oM)(d,e);c[n]=(0,G.Hk)(u,i>e?i:i-1,v)}else{var p=(0,G.oM)(d,e);c[n]=p;var f=(0,G.Hk)(u,i,c[t]);c[t]=f,0===(null===p||void 0===p?void 0:p.length)&&(c=(0,G.oM)(c,n))}n===t&&e===i||null===r||void 0===r||r(c)}),[m,r]),b=(0,l.useMemo)((function(){return(null===m||void 0===m?void 0:m.length)||0}),[m]),Z=(0,l.useMemo)((function(){var n=[];return null===m||void 0===m||m.forEach((function(e,t){var i=(null===e||void 0===e?void 0:e.length)||0,o=[],l=(0,G.Sm)(null===e||void 0===e?void 0:e.map((function(n){return n.width||0}))),c=(null===e||void 0===e?void 0:e.length)||0,u=null===d||void 0===d?void 0:d.width;null===e||void 0===e||e.forEach((function(n,e){var d=n||{variable:null,width:0},s=d.variable,a=d.max_width_percentage,p=d.width,f=null===j||void 0===j?void 0:j[s],m=null===h||void 0===h?void 0:h[null===f||void 0===f?void 0:f.input],g="undefined"!==typeof a&&null!==a?a>=0?a/100:a:null,b=p/l,Z=g&&b>g?g:b,y=r?X:B,I=Math.floor(Z*u)-(r?Math.round(24/i):Math.round(50/i));o.push((0,w.jsx)(v.Z,{flexBasis:"".concat(Math.floor(100*Z),"%"),children:(0,w.jsx)(y,{columnIndex:e,columnLayoutSettings:n,columnsInRow:c,disableDrag:!!r,first:0===e,input:m,onDrop:function(n){var r=n.columnIndex,i=n.rowIndex;x(i,r,t,e)},rowIndex:t,variable:f,width:I})},"row-".concat(t,"-column-").concat(e,"-").concat(s)))})),0===t&&r&&n.push((0,w.jsx)(U,{onDrop:function(n){var e=n.columnIndex,r=n.rowIndex;x(r,e,t-1,0,{newRow:!0})}},"layout-divider-".concat(t,"-top"))),n.push((0,w.jsx)(p.ZP,{children:o},"row-".concat(t))),r?n.push((0,w.jsx)(U,{onDrop:function(n){var e=n.columnIndex,r=n.rowIndex;x(r,e,t+1,0,{newRow:!0})}},"layout-divider-".concat(t,"-bottom"))):t<b-1&&n.push((0,w.jsx)(g.Z,{py:2},"layout-divider-".concat(t,"-bottom")))})),n}),[d,h,m,x,b,r,j]);return r?(0,w.jsx)(s.W,{backend:a.PD,children:Z}):(0,w.jsx)(w.Fragment,{children:Z})},z=t(71180),Q=t(15338),$=t(81728),nn=t(3314);function en(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function tn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?en(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):en(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var rn=function(n){var e,t,s,a,h=n.children,O=n.interaction,k=n.removeBlockInteraction,D=n.updateInteraction,S=(0,l.useRef)(null),T=(0,l.useRef)(null),_=(0,l.useRef)(null),N=(0,l.useRef)(null),A=(0,l.useRef)(null),B=(0,l.useState)(!1),q=B[0],F=B[1],H=(0,l.useState)(!1),W=H[0],Y=H[1],V=(0,l.useState)(null),X=V[0],U=V[1],K=(0,l.useState)(null),en=K[0],rn=K[1],on=(0,l.useState)(null),ln=on[0],cn=on[1],dn=(0,l.useState)(null),un=dn[0],sn=dn[1],an=(0,l.useState)(null),vn=an[0],pn=an[1],fn=(0,l.useState)({}),hn=fn[0],mn=fn[1],jn=O||{variables:null,uuid:null},xn=jn.inputs,gn=jn.layout,bn=jn.uuid,Zn=jn.variables,yn=(0,l.useCallback)((function(n){return D(tn(tn({},O),n))}),[O,D]),In=(0,l.useCallback)((function(n,e){var t=tn({},xn);return e?t[n]=tn(tn({},null===t||void 0===t?void 0:t[n]),e):delete t[n],yn({inputs:t})}),[xn,yn]),Pn=(0,l.useCallback)((function(n,e){var t=tn({},Zn);return e?t[n]=tn(tn({},null===t||void 0===t?void 0:t[n]),e):delete t[n],yn({variables:t})}),[yn,Zn]),wn=(0,l.useMemo)((function(){return Object.entries(xn||{}).map((function(n,e){var t=(0,L.Z)(n,2),i=t[0],o=t[1]||{options:[],style:null,type:null},l=o.options,c=o.style,d=o.type;return(0,w.jsx)(g.Z,{mt:e>=1?P.cd:0,children:(0,w.jsxs)(M,{ref:X===i?T:null,children:[(0,w.jsx)(R,{children:(0,w.jsx)(g.Z,{p:P.cd,children:(0,w.jsxs)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,w.jsx)(u.Z,{bold:!0,level:5,children:i}),(0,w.jsx)(g.Z,{mr:P.cd}),(0,w.jsx)(z.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return In(i,null)},children:(0,w.jsx)(E.x8,{default:!0})})]})})}),(0,w.jsx)(Q.Z,{muted:!0}),(0,w.jsx)(g.Z,{p:P.cd,children:(0,w.jsxs)(p.ZP,{fullWidth:!0,children:[(0,w.jsxs)(v.Z,{flex:1,flexDirection:"column",children:[(0,w.jsx)(g.Z,{mb:1,children:(0,w.jsx)(b.ZP,{bold:!0,default:!0,children:"Type"})}),(0,w.jsx)(x.Z,{onChange:function(n){return In(i,{type:n.target.value})},placeholder:"Choose a type of input",value:d,children:m.map((function(n){return(0,w.jsx)("option",{value:n,children:(0,$.vg)(n)},n)}))})]}),(0,w.jsx)(g.Z,{mr:P.Mq}),(0,w.jsxs)(v.Z,{flex:1,flexDirection:"column",children:[r.TEXT_FIELD===d&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.Z,{mb:1,children:(0,w.jsxs)(b.ZP,{bold:!0,default:!0,children:["Style ",(0,$.J3)(d)]})}),(0,w.jsx)(f.Z,{checked:null===c||void 0===c?void 0:c.multiline,label:"Allow writing multiple lines",onClick:function(){return In(i,{style:tn(tn({},c),{},{multiline:!(null!==c&&void 0!==c&&c.multiline)})})}})]}),[r.CHECKBOX,r.DROPDOWN_MENU].includes(d)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.Z,{mb:1,children:(0,w.jsxs)(b.ZP,{bold:!0,default:!0,children:["Options for ",(0,$.J3)(d)]})}),null===l||void 0===l?void 0:l.map((function(n,e){var t=n.label,r=n.value;return(0,w.jsx)(g.Z,{mt:e>=1?1:0,children:(0,w.jsxs)(p.ZP,{alignItems:"center",flexDirection:"row",children:[(0,w.jsx)(z.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,onClick:function(){return In(i,{options:(0,G.oM)(l,e)})},children:(0,w.jsx)(E.x8,{})}),(0,w.jsx)(g.Z,{mr:P.cd}),(0,w.jsx)(b.ZP,{default:!0,children:"Label"}),(0,w.jsx)(g.Z,{mr:1}),(0,w.jsx)(y.Z,{compact:!0,onChange:function(n){var t;return In(i,{options:null===(t=l||[])||void 0===t?void 0:t.map((function(t,r){return e===r?tn(tn({},t),{},{label:n.target.value}):t}))})},value:t||""}),(0,w.jsx)(g.Z,{mr:P.cd}),(0,w.jsx)(b.ZP,{default:!0,children:"Value"}),(0,w.jsx)(g.Z,{mr:1}),(0,w.jsx)(y.Z,{compact:!0,onChange:function(n){var t;return In(i,{options:null===(t=l||[])||void 0===t?void 0:t.map((function(t,r){return e===r?tn(tn({},t),{},{value:n.target.value}):t}))})},value:r||""})]})},"".concat(i,"-option-").concat(e))})),(0,w.jsx)(g.Z,{mt:1,children:(0,w.jsx)(z.Z,{beforeIcon:(0,w.jsx)(E.mm,{}),compact:!0,onClick:function(){return In(i,{options:(l||[]).concat({label:"",value:""})})},secondary:!0,children:"Add option"})})]})]})]})})]})},"".concat(i,"-").concat(e))}))}),[xn,X,T,In]),On=(0,l.useMemo)((function(){return Object.entries(Zn||{}).map((function(n,e){var t,r=(0,L.Z)(n,2),o=r[0],l=r[1],c=l||{description:"",name:"",required:!1,types:[]},d=c.description,s=c.input,a=c.name,h=c.required,m=c.types,O=null===xn||void 0===xn?void 0:xn[s];return(0,w.jsx)(g.Z,{mt:e>=1?P.cd:0,children:(0,w.jsxs)(M,{ref:en===o?_:null,children:[(0,w.jsx)(R,{children:(0,w.jsx)(g.Z,{p:P.cd,children:(0,w.jsxs)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,w.jsxs)(p.ZP,{alignItems:"center",flexDirection:"row",children:[(0,w.jsx)(u.Z,{bold:!0,level:5,children:o}),(0,w.jsx)(g.Z,{mr:P.cd}),(0,w.jsxs)(p.ZP,{alignItems:"center",children:[(0,w.jsx)(I.Z,{checked:h,compact:!0,onCheck:function(n){return Pn(o,{required:n(h)})}}),(0,w.jsx)(g.Z,{mr:1}),(0,w.jsx)(b.ZP,{muted:!h,success:h,children:"Required"})]})]}),(0,w.jsx)(g.Z,{mr:P.cd}),(0,w.jsx)(z.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return Pn(o,null)},children:(0,w.jsx)(E.x8,{default:!0})})]})})}),(0,w.jsx)(Q.Z,{muted:!0}),(0,w.jsxs)(g.Z,{p:P.cd,children:[(0,w.jsxs)(p.ZP,{fullWidth:!0,children:[(0,w.jsxs)(v.Z,{flex:1,flexDirection:"column",children:[(0,w.jsx)(g.Z,{mb:1,children:(0,w.jsx)(b.ZP,{bold:!0,default:!0,children:"Label"})}),(0,w.jsx)(y.Z,{onChange:function(n){return Pn(o,{name:n.target.value})},value:a}),(0,w.jsxs)(g.Z,{mt:P.Mq,children:[(0,w.jsx)(g.Z,{mb:1,children:(0,w.jsx)(b.ZP,{bold:!0,default:!0,children:"Valid data types"})}),(0,w.jsx)(p.ZP,{alignItems:"center",flexWrap:"wrap",children:j.map((function(n){var e=null===m||void 0===m?void 0:m.includes(n);return(0,w.jsx)(g.Z,{mr:P.cd,children:(0,w.jsx)(f.Z,{checked:e,label:(0,$.vg)(n),onClick:function(){return Pn(o,{types:e?null===m||void 0===m?void 0:m.filter((function(e){return e!==n})):(m||[]).concat(n)})}})},n)}))})]})]}),(0,w.jsx)(g.Z,{mr:P.Mq}),(0,w.jsxs)(v.Z,{flex:1,flexDirection:"column",children:[(0,w.jsx)(g.Z,{mb:1,children:(0,w.jsx)(b.ZP,{bold:!0,default:!0,children:"Description"})}),(0,w.jsx)(Z.Z,{onChange:function(n){return Pn(o,{description:n.target.value})},rows:Math.max(3,null===d||void 0===d||null===(t=d.split("\n"))||void 0===t?void 0:t.length),value:d})]})]}),(0,w.jsxs)(g.Z,{mt:P.Mq,children:[(0,w.jsx)(p.ZP,{alignContent:"center",flexDirection:"row",justifyContent:"space-between",children:(0,w.jsxs)(p.ZP,{flexDirection:"column",children:[(0,w.jsx)(b.ZP,{bold:!0,default:!0,children:"Input"}),(0,w.jsx)(b.ZP,{muted:!0,children:"Associate an existing input to this variable or create a new input and then associate it to this variable."})]})}),(0,w.jsx)(g.Z,{mt:1,children:(0,w.jsxs)(x.Z,{monospace:!0,onChange:function(n){var e=n.target.value;"+ Add a new input"===e?(Y(!0),cn(o),setTimeout((function(){var n;return null===N||void 0===N||null===(n=N.current)||void 0===n?void 0:n.focus()}),1)):Pn(o,{input:e})},placeholder:"Select an existing input",value:s,children:[(0,w.jsx)("option",{value:"+ Add a new input",children:"+ Add a new input"}),Object.keys(xn||{}).map((function(n){return(0,w.jsx)("option",{value:n,children:n},n)}))]})})]})]}),s&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Q.Z,{muted:!0}),(0,w.jsxs)(g.Z,{p:P.cd,children:[(0,w.jsx)(g.Z,{mb:P.cd,children:(0,w.jsxs)(u.Z,{default:!0,level:5,children:["Preview of ",s]})}),!(null!==O&&void 0!==O&&O.type)&&(0,w.jsxs)(b.ZP,{muted:!0,children:["Select an input style for ",s," before seeing a preview."]}),(null===O||void 0===O?void 0:O.type)&&(0,w.jsx)(C,{interaction:{inputs:(0,i.Z)({},s,null===xn||void 0===xn?void 0:xn[s]),layout:[[{variable:o,width:1}]],variables:(0,i.Z)({},o,l)}})]})]})]})},"".concat(o,"-").concat(e))}))}),[xn,en,_,cn,Pn,Zn]),kn=(0,l.useMemo)((function(){return!(null===Zn||void 0===Zn||!Zn[vn])}),[vn,Zn]),Cn=(0,l.useMemo)((function(){return!(null===xn||void 0===xn||!xn[un])}),[xn,un]),En=(0,l.useMemo)((function(){return(0,w.jsx)(J,{containerRef:S,interaction:O,updateLayout:function(n){return yn({layout:n})}})}),[S,O,yn]),Dn=(0,l.useMemo)((function(){return(0,w.jsxs)(p.ZP,{alignItems:"center",children:[!q&&(0,w.jsx)(z.Z,{beforeIcon:(0,w.jsx)(E.mm,{}),compact:!0,onClick:function(n){(0,nn.j)(n),F(!0),setTimeout((function(){var n;return null===A||void 0===A||null===(n=A.current)||void 0===n?void 0:n.focus()}),1)},secondary:!0,small:!0,children:"Add new variable"}),q&&(0,w.jsxs)(w.Fragment,{children:[kn&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(b.ZP,{danger:!0,small:!0,children:"Variable already exists"}),(0,w.jsx)(g.Z,{mr:1})]}),(0,w.jsx)(y.Z,{compact:!0,meta:{touched:!!kn,error:String(kn)},monospace:!0,onChange:function(n){(0,nn.j)(n),pn(n.target.value)},onClick:function(n){return(0,nn.j)(n)},ref:A,small:!0,value:vn||""}),(0,w.jsx)(g.Z,{mr:1}),(0,w.jsx)(z.Z,{disabled:kn,compact:!0,onClick:function(n){if((0,nn.j)(n),!kn){var e=(0,o.Z)(gn||[]);e.push([{width:1,variable:vn}]),yn(tn(tn({},O),{},{layout:e,variables:tn(tn({},Zn),{},(0,i.Z)({},vn,{}))})),F(!1),rn(vn),pn(null),mn({0:!0}),setTimeout((function(){var n;null===_||void 0===_||null===(n=_.current)||void 0===n||n.scrollIntoView(),mn({})}),d.e+100)}},primary:!0,small:!0,children:"Create variable"}),(0,w.jsx)(g.Z,{mr:1}),(0,w.jsx)(z.Z,{compact:!0,onClick:function(n){(0,nn.j)(n),F(!1),pn(null)},secondary:!0,small:!0,children:"Cancel"})]})]})}),[q,gn,vn,_,A,F,rn,pn,mn,yn,kn,Zn]),Sn=(0,l.useMemo)((function(){return(0,w.jsxs)(p.ZP,{alignItems:"center",children:[!W&&(0,w.jsx)(z.Z,{beforeIcon:(0,w.jsx)(E.mm,{}),compact:!0,onClick:function(n){(0,nn.j)(n),Y(!0),setTimeout((function(){var n;return null===N||void 0===N||null===(n=N.current)||void 0===n?void 0:n.focus()}),1)},secondary:!0,small:!0,children:"Add new input"}),W&&(0,w.jsxs)(w.Fragment,{children:[Cn&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(b.ZP,{danger:!0,small:!0,children:"Input already exists"}),(0,w.jsx)(g.Z,{mr:1})]}),(0,w.jsx)(y.Z,{compact:!0,meta:{touched:!!Cn,error:String(Cn)},monospace:!0,onClick:function(n){return(0,nn.j)(n)},onChange:function(n){(0,nn.j)(n),sn(n.target.value)},ref:N,small:!0,value:un||""}),(0,w.jsx)(g.Z,{mr:1}),(0,w.jsx)(z.Z,{disabled:Cn,compact:!0,onClick:function(n){(0,nn.j)(n),Cn||(ln?yn(tn(tn({},O),{},{inputs:tn(tn({},xn),{},(0,i.Z)({},un,{})),variables:tn(tn({},Zn),{},(0,i.Z)({},ln,tn(tn({},null===Zn||void 0===Zn?void 0:Zn[ln]),{},{input:un})))})):In(un,{}),Y(!1),U(un),cn(null),sn(null),mn({1:!0}),setTimeout((function(){var n;null===T||void 0===T||null===(n=T.current)||void 0===n||n.scrollIntoView(),mn({})}),d.e+100))},primary:!0,small:!0,children:"Create input"}),(0,w.jsx)(g.Z,{mr:1}),(0,w.jsx)(z.Z,{compact:!0,onClick:function(n){(0,nn.j)(n),Y(!1),sn(null)},secondary:!0,small:!0,children:"Cancel"})]})]})}),[Cn,xn,O,W,ln,un,T,N,Y,U,cn,sn,mn,In,Zn]);return(0,w.jsxs)(M,{ref:S,children:[(0,w.jsx)(R,{children:(0,w.jsx)(g.Z,{p:P.cd,children:(0,w.jsxs)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,w.jsx)(b.ZP,{default:!0,large:!0,monospace:!0,children:bn}),k&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.Z,{mr:P.cd}),(0,w.jsx)(z.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return k()},children:(0,w.jsx)(E.x8,{default:!0})})]})]})})}),(0,w.jsx)(Q.Z,{muted:!0}),h,(0,w.jsxs)(c.Z,{noBorder:!0,visibleMapping:{0:!0,1:!0,2:!0},visibleMappingForced:hn,children:[(0,w.jsx)(d.Z,{noBorderRadius:!0,noPaddingContent:!0,onClick:function(){mn({})},titleXPadding:P.cd*P.iI,titleYPadding:1.5*P.iI,title:(0,w.jsxs)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,w.jsx)(g.Z,{mr:P.cd,py:1,children:(0,w.jsx)(u.Z,{level:4,children:"Variables"})}),(null===(e=Object.keys(Zn||{}))||void 0===e?void 0:e.length)>=1&&Dn]}),children:(0,w.jsxs)(g.Z,{p:P.cd,children:[On,!(null!==(t=Object.keys(Zn||{}))&&void 0!==t&&t.length)&&Dn]})}),(0,w.jsx)(d.Z,{noBorderRadius:!0,noPaddingContent:!0,onClick:function(){mn({})},titleXPadding:P.cd*P.iI,titleYPadding:1.5*P.iI,title:(0,w.jsxs)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,w.jsx)(g.Z,{mr:P.cd,py:1,children:(0,w.jsx)(u.Z,{level:4,children:"Inputs"})}),(null===(s=Object.keys(xn||{}))||void 0===s?void 0:s.length)>=1&&Sn]}),children:(0,w.jsxs)(g.Z,{p:P.cd,children:[wn,!(null!==(a=Object.keys(xn||{}))&&void 0!==a&&a.length)&&Sn]})}),(0,w.jsxs)(d.Z,{noBorderRadius:!0,noPaddingContent:!0,onClick:function(){mn({})},titleXPadding:P.cd*P.iI,titleYPadding:1.5*P.iI,title:(0,w.jsx)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,w.jsx)(g.Z,{mr:P.cd,py:1,children:(0,w.jsx)(u.Z,{level:4,children:"Interaction layout"})})}),children:[(0,w.jsx)(g.Z,{p:1,children:En}),!(null!==gn&&void 0!==gn&&gn.length)&&(0,w.jsx)(g.Z,{px:P.cd,pb:P.cd,children:(0,w.jsx)(b.ZP,{muted:!0,children:"Add at least 1 variable and associate an input to it and see a preview."})})]})]})]})};function on(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function ln(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?on(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):on(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var cn=function(n){var e,t=n.blockInteraction,r=n.children,o=n.containerRef,c=n.interaction,d=n.isEditing,s=n.removeBlockInteraction,a=n.setInteractionsMapping,v=(0,l.useMemo)((function(){return t||{description:null,name:null}}),[t]),p=v.description,f=v.name,h=(0,l.useCallback)((function(n){return a((function(e){return ln(ln({},e),{},(0,i.Z)({},null===n||void 0===n?void 0:n.uuid,ln(ln({},c),n)))}))}),[c,a]);return(0,w.jsxs)("div",{children:[d&&(0,w.jsx)(rn,{interaction:c,removeBlockInteraction:s,updateInteraction:h,children:r}),!d&&(0,w.jsxs)(M,{children:[f&&(0,w.jsxs)(g.Z,{mb:P.cd,pt:P.cd,px:P.cd,children:[(0,w.jsx)(u.Z,{level:5,children:f}),p&&(null===p||void 0===p||null===(e=p.split("\n"))||void 0===e?void 0:e.map((function(n){return(0,w.jsx)(b.ZP,{default:!0,children:n},n)})))]}),(0,w.jsx)(g.Z,{pb:P.Mq,px:1,children:(0,w.jsx)(J,{containerRef:o,interaction:c})})]})]})},dn=t(44425),un=t(47041),sn=t(91437),an=(P.iI,D.default.div.withConfig({displayName:"indexstyle__AfterFooterStyle",componentId:"sc-1qjqori-0"})(["",""],(function(n){return"\n    background-color: ".concat((n.theme.background||S.Z.background).panel,";\n  ")})),D.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1qjqori-1"})([""," border-style:solid;border-width:1px;position:relative;"," "," "," "," "," "," ",""],_.Kf,(function(n){return!n.noBorderRadiusTop&&"\n    border-top-left-radius: ".concat(T.n_,"px;\n    border-top-right-radius: ").concat(T.n_,"px;\n  ")}),(function(n){return n.noBorderRadiusTop&&"\n    border-top: none !important;\n  "}),(function(n){return!n.noBorderRadiusBottom&&"\n    border-bottom-left-radius: ".concat(T.n_,"px;\n    border-bottom-right-radius: ").concat(T.n_,"px;\n  ")}),(function(n){return n.noBorderRadiusBottom&&"\n    border-bottom: none !important;\n  "}),(function(n){return!n.noBackground&&"\n    background-color: ".concat((n.theme.background||S.Z.background).panel,";\n  ")}),(function(n){return!n.borderColor&&"\n    border-color: ".concat((n.theme.borders||S.Z.borders).light,";\n  ")}),(function(n){return n.borderColor&&"\n    border-color: ".concat(n.borderColor,";\n  ")}))),vn=(D.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-1qjqori-2"})(["padding:","px;",""],P.cd*P.iI,(function(n){return"\n    border-bottom: 1px solid ".concat((n.theme.borders||S.Z.borders).light,";\n  ")})),D.default.div.withConfig({displayName:"indexstyle__NavigationStyle",componentId:"sc-1qjqori-3"})([""," "," ",""],(0,sn.eR)(),(function(n){return!n.selected&&"\n    &:hover {\n      background-color: ".concat((n.theme.interactive||S.Z.interactive).rowHoverBackground,";\n    }\n  ")}),(function(n){return n.selected&&"\n    background-color: ".concat((n.theme.background||S.Z.background).codeTextarea,";\n  ")})),D.default.div.withConfig({displayName:"indexstyle__StreamGridGroupStyle",componentId:"sc-1qjqori-4"})(["position:absolute;"]),D.default.div.withConfig({displayName:"indexstyle__StreamGridGroupInnerStyle",componentId:"sc-1qjqori-5"})([""," overflow:auto;position:fixed;",""],un.w5,(function(n){return n.borderRight&&"\n    border-right: 1px solid ".concat((n.theme.borders||S.Z.borders).light,";\n  ")})),D.default.div.withConfig({displayName:"indexstyle__StreamGridStyle",componentId:"sc-1qjqori-6"})(["border-radius:","px;padding:","px;margin:","px;"," "," "," "," ",""],T.n_,P.cd*P.iI,1*P.iI,(function(n){return!n.warning&&"\n    &:hover {\n      cursor: pointer;\n    }\n  "}),(function(n){return!n.selected&&!n.warning&&"\n    border: 1px solid ".concat((n.theme.borders||S.Z.borders).light,";\n  ")}),(function(n){return n.warning&&!n.selected&&"\n    border: 1px solid ".concat((n.theme.accent||S.Z.accent).warningTransparent,";\n  ")}),(function(n){return n.warning&&n.selected&&"\n    border: 1px solid ".concat((n.theme.accent||S.Z.accent).warning,";\n  ")}),(function(n){return n.selected&&!n.warning&&"\n    background-color: ".concat((n.theme.background||S.Z.background).panel,";\n    border: 1px solid ").concat((n.theme.borders||S.Z.borders).contrast,";\n  ")})),D.default.div.withConfig({displayName:"indexstyle__BackgroundStyle",componentId:"sc-1qjqori-7"})(["",""],(function(n){return"\n    background-color: ".concat((n.theme.background||S.Z.background).panel,";\n  ")})),D.default.div.withConfig({displayName:"indexstyle__ButtonContainerStyle",componentId:"sc-1qjqori-8"})(["bottom:0;position:fixed;z-index:1;width:100%;",""],(function(n){return"\n    background-color: ".concat((n.theme.background||S.Z.background).panel,";\n    border-left: 1px solid ").concat((n.theme.borders||S.Z.borders).light,";\n    border-top: 1px solid ").concat((n.theme.borders||S.Z.borders).light,";\n  ")}))),pn=t(19452),fn=t(30229);function hn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function mn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?hn(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):hn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var jn=function(n){var e,t,r,i,o=n.index,l=n.permission,c=n.setPermissions,d=n.updatePermission;return(0,w.jsx)(an,{children:(0,w.jsx)(g.Z,{p:P.cd,children:(0,w.jsxs)(p.ZP,{alignItems:"flex-start",flexDirection:"row",children:[(0,w.jsx)(z.Z,{iconOnly:!0,onClick:function(){return c((function(n){return(0,G.oM)(n,o)}))},children:(0,w.jsx)(E.x8,{})}),(0,w.jsx)(g.Z,{mr:P.cd}),(0,w.jsxs)(p.ZP,{flexDirection:"column",children:[(0,w.jsxs)(p.ZP,{alignItems:"center",flexDirection:"row",children:[(0,w.jsx)(u.Z,{level:5,children:"Triggers"}),(0,w.jsx)(g.Z,{mr:P.cd}),(0,w.jsx)(p.ZP,{alignItems:"center",children:(0,w.jsx)(z.Z,{beforeIcon:(0,w.jsx)(E.mm,{}),compact:!0,onClick:function(n){(0,nn.j)(n),d(mn(mn({},l),{},{triggers:((null===l||void 0===l?void 0:l.triggers)||[]).concat({schedule_interval:"",schedule_type:"",uuid:""})}))},secondary:!0,small:!0,children:"Add trigger"})})]}),(null===l||void 0===l||null===(e=l.triggers)||void 0===e?void 0:e.length)>=1&&(0,w.jsx)(g.Z,{mt:P.cd,children:null===l||void 0===l||null===(t=l.triggers)||void 0===t?void 0:t.map((function(n,e){var t=n.schedule_interval,r=n.schedule_type,i=n.uuid;return(0,w.jsx)(g.Z,{mt:e>=1?1:0,children:(0,w.jsxs)(p.ZP,{alignItems:"center",children:[(0,w.jsx)(z.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,onClick:function(n){(0,nn.j)(n);var t=(0,G.oM)((null===l||void 0===l?void 0:l.triggers)||[],e);d(mn(mn({},l),{},{triggers:t}))},children:(0,w.jsx)(E.x8,{})}),(0,w.jsx)(g.Z,{mr:1}),(0,w.jsx)(x.Z,{compact:!0,onChange:function(n){var t,r=n.target.value,i=mn({},l),o=mn({},null===i||void 0===i||null===(t=i.triggers)||void 0===t?void 0:t[e]);o.schedule_type=r,i.triggers[e]=o,d(i)},placeholder:"Type",small:!0,value:r,children:Object.entries(fn.Z4).map((function(n){var e=(0,L.Z)(n,2),t=e[0],r=e[1];return(0,w.jsx)("option",{value:t,children:(0,$.kC)(r())},t)}))}),(0,w.jsx)(g.Z,{mr:1}),(0,w.jsx)(x.Z,{compact:!0,monospace:!0,onChange:function(n){var t,r=n.target.value,i=mn({},l),o=mn({},null===i||void 0===i||null===(t=i.triggers)||void 0===t?void 0:t[e]);o.schedule_interval=r,i.triggers[e]=o,d(i)},placeholder:"Interval",small:!0,value:t,children:fn.Wb.map((function(n){return(0,w.jsx)("option",{value:n,children:n},n)}))})]})},"permission-trigger-".concat(o,"-").concat(e,"-").concat(i))}))})]}),(0,w.jsx)(g.Z,{mr:P.Mq}),(0,w.jsxs)(p.ZP,{flexDirection:"column",children:[(0,w.jsxs)(p.ZP,{alignItems:"center",flexDirection:"row",children:[(0,w.jsx)(u.Z,{level:5,children:"Roles"}),(0,w.jsx)(g.Z,{mr:P.cd}),(0,w.jsx)(p.ZP,{alignItems:"center",children:(0,w.jsx)(z.Z,{beforeIcon:(0,w.jsx)(E.mm,{}),compact:!0,onClick:function(n){(0,nn.j)(n),d(mn(mn({},l),{},{roles:((null===l||void 0===l?void 0:l.roles)||[]).concat({role:"",uuid:""})}))},secondary:!0,small:!0,children:"Add role"})})]}),(null===l||void 0===l||null===(r=l.roles)||void 0===r?void 0:r.length)>=1&&(0,w.jsx)(g.Z,{mt:P.cd,children:null===l||void 0===l||null===(i=l.roles)||void 0===i?void 0:i.map((function(n,e){var t=n.role,r=n.uuid;return(0,w.jsx)(g.Z,{mt:e>=1?1:0,children:(0,w.jsxs)(p.ZP,{alignItems:"center",children:[(0,w.jsx)(z.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,onClick:function(n){(0,nn.j)(n);var t=(0,G.oM)((null===l||void 0===l?void 0:l.roles)||[],e);d(mn(mn({},l),{},{roles:t}))},children:(0,w.jsx)(E.x8,{})}),(0,w.jsx)(g.Z,{mr:1}),(0,w.jsx)(x.Z,{compact:!0,monospace:!0,onChange:function(n){var t,r=n.target.value,i=mn({},l),o=mn({},null===i||void 0===i||null===(t=i.roles)||void 0===t?void 0:t[e]);o.role=r,i.roles[e]=o,d(i)},placeholder:"Role",small:!0,value:t,children:pn.Z3.map((function(n){return(0,w.jsx)("option",{value:n,children:n},n)}))})]})},"permission-role-".concat(o,"-").concat(e,"-").concat(r))}))})]})]})})})};function xn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function gn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?xn(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var bn=function(n){var e=n.createInteraction,t=n.interactions,r=n.isLoadingCreateInteraction,s=n.isLoadingUpdatePipelineInteraction,a=n.pipeline,f=n.pipelineInteraction,h=n.refAfterFooter,m=n.selectedBlock,j=n.setSelectedBlock,x=n.updatePipelineInteraction,I=(0,l.useRef)(null),O=(0,l.useRef)(null),k=(0,l.useRef)(null),C=(0,l.useState)(null),D=C[0],S=C[1],T=(0,l.useState)(!1),_=T[0],M=T[1],R=(0,l.useState)(null),N=(R[0],R[1]),A=(0,l.useState)(null),B=A[0],L=A[1],q=(0,l.useState)(null),F=q[0],H=q[1],W=(0,l.useState)(null),Y=W[0],V=W[1],X=(0,l.useState)(null),U=X[0],K=X[1],J=(0,l.useCallback)((function(n,e,t,r){return H((function(l){var c=(0,o.Z)((null===l||void 0===l?void 0:l[n])||[]);return null!==r&&void 0!==r&&r.remove?c=(0,G.oM)(c,e):c[e]=gn(gn({},c[e]),t),gn(gn({},l),{},(0,i.Z)({},n,c))}))}),[H]),$=(0,l.useCallback)((function(n){K(Number(new Date)),V(n)}),[K,V]),en=(0,l.useMemo)((function(){return null===Y||void 0===Y?void 0:Y.map((function(n,e){var t=n.roles,r=n.triggers;return{roles:null===t||void 0===t?void 0:t.map((function(n,t){return{role:"string"===typeof n?n:null===n||void 0===n?void 0:n.role,uuid:"".concat(e,"-").concat(U,"-").concat(t)}})),triggers:null===r||void 0===r?void 0:r.map((function(n,t){return gn(gn({},n),{},{uuid:"".concat(e,"-").concat(U,"-").concat(t)})})),uuid:"".concat(e,"-").concat(U)}}))}),[U,Y]),tn=(0,l.useCallback)((function(){return x(gn(gn({},f),{},{blocks:F,interactions:B,permissions:null===en||void 0===en?void 0:en.map((function(n){var e=n.roles,t=n.triggers;return{roles:null===e||void 0===e?void 0:e.map((function(n){return"string"===typeof n?n:null===n||void 0===n?void 0:n.role})),triggers:null===t||void 0===t?void 0:t.map((function(n){return{schedule_interval:n.schedule_interval,schedule_type:n.schedule_type}}))}}))}))}),[F,B,en,f,x]),rn=(0,l.useMemo)((function(){return(null===a||void 0===a?void 0:a.blocks)||[]}),[a]),on=(0,l.useMemo)((function(){return null===rn||void 0===rn?void 0:rn.reduce((function(n,e,t){return gn(gn({},n),{},(0,i.Z)({},String(t),!0))}),{})}),[rn]);(0,l.useEffect)((function(){!B&&(null===t||void 0===t?void 0:t.length)>=1&&L((0,G.HK)(t||[],(function(n){return n.uuid})))}),[t,B,L]),(0,l.useEffect)((function(){!F&&null!==f&&void 0!==f&&f.blocks&&H(null===f||void 0===f?void 0:f.blocks)}),[F,f,H]),(0,l.useEffect)((function(){!en&&null!==f&&void 0!==f&&f.permissions&&$(null===f||void 0===f?void 0:f.permissions)}),[en,f,$]);var ln=(0,l.useMemo)((function(){var n=[],e=(null===rn||void 0===rn?void 0:rn.length)||0;return null===rn||void 0===rn||rn.map((function(t,r){var i=(t||{uuid:null}).uuid,o=(null===F||void 0===F?void 0:F[i])||[],l=(null===o||void 0===o?void 0:o.length)>=1,c=(0,w.jsxs)(z.Z,{beforeIcon:l?(0,w.jsx)(E.I8,{}):(0,w.jsx)(E.mm,{}),compact:!0,onClick:function(n){(0,nn.j)(n),j(t)},primary:!l,secondary:l,small:!0,children:[l&&"Edit interactions",!l&&"Add interactions"]});n.push((0,w.jsx)(d.Z,{noBorderRadius:!0,noPaddingContent:!0,titleXPadding:P.cd*P.iI,titleYPadding:1.5*P.iI,title:(0,w.jsxs)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,w.jsx)(g.Z,{mr:P.cd,py:1,children:(0,w.jsx)(b.ZP,{large:!0,monospace:!0,children:i})}),l&&(0,w.jsx)(p.ZP,{alignItems:"center",children:c})]}),children:(0,w.jsx)(an,{noBackground:!0,noBorderRadiusBottom:r<e-1,noBorderRadiusTop:!0,children:(0,w.jsxs)(g.Z,{p:P.cd,children:[!l&&c,null===o||void 0===o?void 0:o.map((function(n,e){return(0,w.jsx)(g.Z,{mt:e>=1?P.HN:0,children:(0,w.jsx)(cn,{blockInteraction:n,containerRef:I,interaction:null===B||void 0===B?void 0:B[null===n||void 0===n?void 0:n.uuid],setInteractionsMapping:L})},"".concat(null===n||void 0===n?void 0:n.uuid,"-").concat(e))}))]})})},i))})),n}),[rn,I,B,H,L,j]),un=(0,l.useMemo)((function(){return(null===rn||void 0===rn?void 0:rn.length)>=1&&(0,w.jsx)(c.Z,{noBorder:!0,visibleMapping:on,children:ln})}),[rn,ln,on]),sn=(0,l.useMemo)((function(){return(null===F||void 0===F?void 0:F[null===m||void 0===m?void 0:m.uuid])||[]}),[F,m]);return(0,w.jsxs)(g.Z,{p:P.cd,style:{position:"relative"},children:[(0,w.jsxs)(g.Z,{pb:P.cd,ref:I,children:[!m&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.Z,{mb:P.cd,children:(0,w.jsx)(u.Z,{children:"Blocks with interactions"})}),un,(0,w.jsxs)(g.Z,{mb:P.cd,mt:P.HN,children:[(0,w.jsxs)(p.ZP,{alignItems:"center",children:[(0,w.jsx)(u.Z,{children:"Permissions"}),(0,w.jsx)(g.Z,{mr:P.cd}),(0,w.jsx)(p.ZP,{alignItems:"center",children:(0,w.jsx)(z.Z,{beforeIcon:(0,w.jsx)(E.mm,{}),compact:!0,onClick:function(){return $((function(n){return n.concat([{roles:[],triggers:[]}])}))},secondary:!0,small:!0,children:"Add permission"})})]}),(0,w.jsx)(g.Z,{mt:1,children:(0,w.jsx)(b.ZP,{default:!0,children:"Add permissions to allow specific user roles the ability to trigger this pipeline using the interactions for this pipeline."})})]}),null===en||void 0===en?void 0:en.map((function(n,e){return(0,w.jsx)(g.Z,{mt:e>=1?P.cd:0,children:(0,w.jsx)(jn,{index:e,permission:n,setPermissions:$,updatePermission:function(n){var t=(0,o.Z)(en);t[e]=n,$(t)}})},"permission-".concat(e))}))]}),m&&(0,w.jsxs)(g.Z,{mb:P.HN,children:[(0,w.jsxs)(p.ZP,{alignItems:"center",children:[(0,w.jsx)(g.Z,{mr:P.cd,py:1,children:(0,w.jsx)(u.Z,{children:"Interactions for block"})}),(0,w.jsxs)(p.ZP,{alignItems:"center",children:[!_&&(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(z.Z,{beforeIcon:(0,w.jsx)(E.mm,{}),compact:!0,onClick:function(n){(0,nn.j)(n),M(!0),setTimeout((function(){var n;return null===O||void 0===O||null===(n=O.current)||void 0===n?void 0:n.focus()}),1)},primary:!0,small:!0,children:"Create new set of interactions"})}),_&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(y.Z,{compact:!0,monospace:!0,onChange:function(n){(0,nn.j)(n),S(n.target.value)},onClick:function(n){return(0,nn.j)(n)},ref:O,small:!0,value:D||""}),(0,w.jsx)(g.Z,{mr:1}),(0,w.jsx)(z.Z,{compact:!0,loading:r,onClick:function(n){(0,nn.j)(n),e({block_uuid:null===m||void 0===m?void 0:m.uuid,inputs:{},layout:[],uuid:"".concat(D,".").concat(dn.t6.YAML),variables:{}}).then((function(n){var e=n.data.interaction,t=null===e||void 0===e?void 0:e.uuid;J(null===m||void 0===m?void 0:m.uuid,(null===sn||void 0===sn?void 0:sn.length)||0,{uuid:t}),L((function(n){return gn(gn({},n),{},(0,i.Z)({},t,e))})),setTimeout((function(){var n;null===k||void 0===k||null===(n=k.current)||void 0===n||n.scrollIntoView()}),d.e+100)})),M(!1),N(D),S(null)},primary:!0,small:!0,children:"Save interaction"}),(0,w.jsx)(g.Z,{mr:1}),(0,w.jsx)(z.Z,{compact:!0,onClick:function(n){(0,nn.j)(n),M(!1),S(null)},secondary:!0,small:!0,children:"Cancel"})]})]})]}),(0,w.jsx)(g.Z,{mt:1,children:(0,w.jsx)(b.ZP,{default:!0,children:"A block can have multiple sets of interactions associated with it."})})]}),null===sn||void 0===sn?void 0:sn.map((function(n,e){var t,r=n||{description:null,name:null},i=r.description,o=r.name,l=null===m||void 0===m?void 0:m.uuid,c=null===n||void 0===n?void 0:n.uuid,d=null===B||void 0===B?void 0:B[c];return(0,w.jsxs)("div",{children:[e>=1&&(0,w.jsx)(g.Z,{my:P.HN,children:(0,w.jsx)(Q.Z,{light:!0})}),(0,w.jsx)(cn,{blockInteraction:n,containerRef:I,interaction:d,isEditing:!0,removeBlockInteraction:function(){return J(l,e,n,{remove:!0})},setInteractionsMapping:L,children:(0,w.jsxs)(g.Z,{p:P.cd,children:[(0,w.jsxs)(p.ZP,{alignItems:"flex-start",children:[(0,w.jsxs)(g.Z,{mb:1,style:{width:20*P.iI},children:[(0,w.jsx)(b.ZP,{bold:!0,large:!0,children:"Label"}),(0,w.jsxs)(b.ZP,{muted:!0,children:["Add a label for this",(0,w.jsx)("br",{}),"set of interactions."]})]}),(0,w.jsx)(g.Z,{mr:P.cd}),(0,w.jsx)(v.Z,{flex:1,children:(0,w.jsx)(y.Z,{fullWidth:!0,onChange:function(n){return J(l,e,{name:n.target.value})},value:o||""})})]}),(0,w.jsx)(g.Z,{mb:P.cd}),(0,w.jsxs)(p.ZP,{alignItems:"flex-start",children:[(0,w.jsxs)(g.Z,{mb:1,style:{width:20*P.iI},children:[(0,w.jsx)(b.ZP,{bold:!0,large:!0,children:"Description"}),(0,w.jsxs)(b.ZP,{muted:!0,children:["Describe how these",(0,w.jsx)("br",{}),"interactions are used."]})]}),(0,w.jsx)(g.Z,{mr:P.cd}),(0,w.jsx)(v.Z,{flex:1,children:(0,w.jsx)(Z.Z,{fullWidth:!0,onChange:function(n){return J(l,e,{description:n.target.value})},rows:Math.max(3,Math.min(12,null===i||void 0===i||null===(t=i.split("\n"))||void 0===t?void 0:t.length)),value:i||""})})]})]})}),(0,w.jsx)("div",{ref:e===(null===sn||void 0===sn?void 0:sn.length)-1?k:null})]},"".concat(null===n||void 0===n?void 0:n.uuid,"-").concat(e))}))]}),(0,w.jsx)(vn,{ref:h,children:(0,w.jsx)(g.Z,{p:P.cd,children:(0,w.jsx)(z.Z,{loading:s,onClick:function(){return tn()},primary:!0,children:"Save interactions for all blocks"})})})]})}},30229:function(n,e,t){t.d(e,{TR:function(){return p},U5:function(){return d},Wb:function(){return v},Xm:function(){return o},Z4:function(){return u},fq:function(){return c},gm:function(){return s},kJ:function(){return a}});var r,i,o,l=t(82394);!function(n){n.API="api",n.EVENT="event",n.TIME="time"}(o||(o={}));var c,d,u=(r={},(0,l.Z)(r,o.API,(function(){return"API"})),(0,l.Z)(r,o.EVENT,(function(){return"event"})),(0,l.Z)(r,o.TIME,(function(){return"schedule"})),r);!function(n){n.ACTIVE="active",n.INACTIVE="inactive"}(c||(c={})),function(n){n.ONCE="@once",n.HOURLY="@hourly",n.DAILY="@daily",n.WEEKLY="@weekly",n.MONTHLY="@monthly",n.ALWAYS_ON="@always_on"}(d||(d={}));var s,a,v=[d.ONCE,d.HOURLY,d.DAILY,d.WEEKLY,d.MONTHLY];!function(n){n.INTERVAL="frequency[]",n.STATUS="status[]",n.TAG="tag[]",n.TYPE="type[]"}(s||(s={})),function(n){n.CREATED_AT="created_at",n.NAME="name",n.PIPELINE="pipeline_uuid",n.STATUS="status",n.TYPE="schedule_type"}(a||(a={}));var p=(i={},(0,l.Z)(i,a.CREATED_AT,"Created at"),(0,l.Z)(i,a.NAME,"Name"),(0,l.Z)(i,a.PIPELINE,"Pipeline"),(0,l.Z)(i,a.STATUS,"Active"),(0,l.Z)(i,a.TYPE,"Type"),i)}}]);