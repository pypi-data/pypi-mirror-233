(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5240],{60523:function(e,n,t){"use strict";var i=t(21831),r=t(82394),u=t(82684),l=t(38626),o=t(34376),d=t(54750),c=t(71180),s=t(90299),a=t(44898),p=t(55485),f=t(88328),h=t(38276),m=t(4190),v=t(48381),j=t(5755),b=t(30160),x=t(35686),g=t(72473),y=t(84649),Z=t(32929),w=t(15610),O=t(19183),P=t(28598);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n,t=e.contained,r=e.defaultLinkUUID,k=e.defaultTab,_=e.objectType,I=e.onClickCustomTemplate,T=e.pipelineUUID,M=e.showAddingNewTemplates,S=e.showBreadcrumbs,A=e.tabs,U=(0,o.useRouter)(),E=(0,u.useContext)(l.ThemeContext),N=(0,O.i)(),D=N.height,R=N.width,B=(0,u.useMemo)((function(){return A||Z.dP}),[A]),q=(0,u.useState)(M||!1),F=q[0],z=q[1],H=(0,u.useState)(r?Z.qy.find((function(e){return e.uuid===r})):Z.qy[0]),W=H[0],L=H[1],G=(0,u.useState)(k?B.find((function(e){return e.uuid===(null===k||void 0===k?void 0:k.uuid)})):B[0]),X=G[0],Y=G[1],V=(0,u.useState)(null),J=V[0],K=V[1],Q=x.ZP.custom_templates.list({object_type:a.Z},{},{pauseFetch:Z.n9.uuid!==(null===X||void 0===X?void 0:X.uuid)}),$=Q.data,ee=Q.mutate,ne=(0,u.useMemo)((function(){var e=(null===$||void 0===$?void 0:$.custom_templates)||[];return null!==W&&void 0!==W&&W.filterTemplates?null===W||void 0===W?void 0:W.filterTemplates(e):e}),[$,W]),te=x.ZP.custom_templates.list({object_type:a.R},{},{pauseFetch:Z.A2.uuid!==(null===X||void 0===X?void 0:X.uuid)}),ie=te.data,re=te.mutate,ue=(0,u.useMemo)((function(){var e=(null===ie||void 0===ie?void 0:ie.custom_templates)||[];return null!==W&&void 0!==W&&W.filterTemplates?null===W||void 0===W?void 0:W.filterTemplates(e):e}),[ie,W]),le=(0,u.useMemo)((function(){return Z.qy.map((function(e){var n=e.Icon,t=e.label,i=e.selectedBackgroundColor,r=e.selectedIconProps,u=e.uuid,l=(null===W||void 0===W?void 0:W.uuid)===u,o=C({size:y.ZG},l&&r?r:{});return(0,P.jsx)(y.wj,{onClick:function(){return L(e)},selected:l,children:(0,P.jsxs)(p.ZP,{alignItems:"center",children:[(0,P.jsx)(y.ze,{backgroundColor:l&&i?i(E):null,children:n?(0,P.jsx)(n,C({},o)):(0,P.jsx)(g.pd,C({},o))}),(0,P.jsx)(b.ZP,{bold:!0,large:!0,children:t?t():u})]})},u)}))}),[W,E]),oe=(0,u.useMemo)((function(){return Z.hS.map((function(e){var n=e.Icon,t=e.label,i=e.selectedBackgroundColor,r=e.selectedIconProps,u=e.uuid,l=(null===W||void 0===W?void 0:W.uuid)===u,o=C({size:y.ZG},l&&r?r:{});return(0,P.jsx)(y.wj,{onClick:function(){return L(e)},selected:l,children:(0,P.jsxs)(p.ZP,{alignItems:"center",children:[(0,P.jsx)(y.ze,{backgroundColor:l&&i?i(E):null,children:n?(0,P.jsx)(n,C({},o)):(0,P.jsx)(g.pd,C({},o))}),(0,P.jsx)(b.ZP,{bold:!0,large:!0,children:t?t():u})]})},u)}))}),[W,E]),de=(0,u.useMemo)((function(){return null===ne||void 0===ne?void 0:ne.map((function(e){var n=e.description,t=e.name,r=e.tags,u=e.template_uuid,l=e.user,o=[];return null!==r&&void 0!==r&&r.length?o.push.apply(o,(0,i.Z)(r)):null!==l&&void 0!==l&&l.username&&o.push(null===l||void 0===l?void 0:l.username),(0,P.jsxs)(y.UE,{onClick:function(){I?I(e):U.push("/templates/[...slug]","/templates/".concat(encodeURIComponent(u)))},children:[(0,P.jsx)(y.Tj,{children:(0,P.jsx)(b.ZP,{bold:!0,monospace:!0,textOverflow:!0,children:t||u})}),(0,P.jsx)(y.SL,{children:(0,P.jsx)(b.ZP,{default:!!n,italic:!n,muted:!n,textOverflowLines:2,children:n||"No description"})}),(0,P.jsx)(y.EN,{children:(null===o||void 0===o?void 0:o.length)>=1&&(0,P.jsx)(v.Z,{tags:null===o||void 0===o?void 0:o.map((function(e){return{uuid:e}}))})})]},u)}))}),[ne,I,U]),ce=(0,u.useMemo)((function(){return null===ue||void 0===ue?void 0:ue.map((function(e){var n=e.description,t=e.name,r=e.tags,u=e.template_uuid,l=e.user,o=[];return null!==r&&void 0!==r&&r.length?o.push.apply(o,(0,i.Z)(r)):null!==l&&void 0!==l&&l.username&&o.push(null===l||void 0===l?void 0:l.username),(0,P.jsxs)(y.UE,{onClick:function(){I?I(e):U.push("/templates/[...slug]","/templates/".concat(encodeURIComponent(u),"?object_type=").concat(a.R))},children:[(0,P.jsx)(y.Tj,{children:(0,P.jsx)(b.ZP,{bold:!0,monospace:!0,textOverflow:!0,children:t||u})}),(0,P.jsx)(y.SL,{children:(0,P.jsx)(b.ZP,{default:!!n,italic:!n,muted:!n,textOverflowLines:2,children:n||"No description"})}),(0,P.jsx)(y.EN,{children:(null===o||void 0===o?void 0:o.length)>=1&&(0,P.jsx)(v.Z,{tags:null===o||void 0===o?void 0:o.map((function(e){return{uuid:e}}))})})]},u)}))}),[ue,I,U]),se=(0,u.useMemo)((function(){if(!S)return null;var e=[];return F?e.push.apply(e,[{label:function(){return"Templates"},onClick:function(){z(!1)}},{bold:!0,label:function(){return"New custom template"}}]):e.push({label:function(){return"Templates"}}),(0,P.jsx)(y.FX,{children:(0,P.jsx)(d.Z,{breadcrumbs:e})})}),[F,S]),ae=(0,u.useMemo)((function(){return S?36:0}),[S]),pe=(0,u.useMemo)((function(){return D-ae}),[D,ae]);if(F)return n=a.R===_&&T?(0,P.jsx)(f.Z,{onMutateSuccess:re,pipelineUUID:T,templateAttributes:W&&(null===W||void 0===W?void 0:W.uuid)!==(null===Z.qy||void 0===Z.qy?void 0:Z.qy[0].uuid)?{pipeline_type:null===W||void 0===W?void 0:W.uuid}:null,templateUUID:null===J||void 0===J?void 0:J.template_uuid}):(0,P.jsx)(j.Z,{contained:t,heightOffset:ae,onCreateCustomTemplate:t?function(e){K(e)}:null,onMutateSuccess:ee,templateAttributes:W&&(null===W||void 0===W?void 0:W.uuid)!==(null===Z.qy||void 0===Z.qy?void 0:Z.qy[0].uuid)?{block_type:null===W||void 0===W?void 0:W.uuid}:null,templateUUID:null===J||void 0===J?void 0:J.template_uuid}),t?(0,P.jsxs)(P.Fragment,{children:[S&&se,(0,P.jsx)(y.Rd,{height:pe,width:R,children:n})]}):n;var fe=(0,P.jsxs)(y.Nk,{children:[(0,P.jsxs)(y.bC,{height:t?pe:null,children:[(0,P.jsx)(y.Yf,{children:(0,P.jsx)(s.Z,{noPadding:!0,onClickTab:function(e){t?Y(e):(0,w.u7)({object_type:Z.A2.uuid===e.uuid?a.R:a.Z})},selectedTabUUID:null===X||void 0===X?void 0:X.uuid,tabs:B})}),(0,P.jsxs)(y.wl,{contained:t,heightOffset:ae,children:[Z.n9.uuid===(null===X||void 0===X?void 0:X.uuid)&&le,Z.A2.uuid===(null===X||void 0===X?void 0:X.uuid)&&oe]})]}),(0,P.jsxs)(y.w5,{children:[Z.n9.uuid===(null===X||void 0===X?void 0:X.uuid)&&(0,P.jsx)(y.HS,{children:(0,P.jsx)(c.Z,{beforeIcon:(0,P.jsx)(g.mm,{size:y.ZG}),onClick:function(){z(!0)},primary:!0,children:"New block template"})}),Z.n9.uuid===(null===X||void 0===X?void 0:X.uuid)&&(0,P.jsxs)(P.Fragment,{children:[!$&&(0,P.jsx)(h.Z,{p:2,children:(0,P.jsx)(m.Z,{inverted:!0})}),$&&!(null!==de&&void 0!==de&&de.length)&&(0,P.jsxs)(h.Z,{p:2,children:[(0,P.jsx)(b.ZP,{children:"There are currently no templates matching your search."}),(0,P.jsx)("br",{}),(0,P.jsx)(b.ZP,{children:"Add a new template by clicking the button above."})]}),(null===de||void 0===de?void 0:de.length)>=1&&(0,P.jsx)(y.n8,{children:de})]}),Z.A2.uuid===(null===X||void 0===X?void 0:X.uuid)&&(0,P.jsxs)(P.Fragment,{children:[!ie&&(0,P.jsx)(h.Z,{p:2,children:(0,P.jsx)(m.Z,{inverted:!0})}),ie&&!(null!==ce&&void 0!==ce&&ce.length)&&(0,P.jsxs)(h.Z,{p:2,children:[(0,P.jsx)(b.ZP,{children:"There are currently no templates matching your search."}),(0,P.jsx)("br",{}),(0,P.jsx)(b.ZP,{children:'Add a new template by right-clicking a pipeline row from the Pipelines page and selecting "Create template".'})]}),(null===ce||void 0===ce?void 0:ce.length)>=1&&(0,P.jsx)(y.n8,{children:ce})]})]})]});return t?(0,P.jsxs)(P.Fragment,{children:[S&&se,(0,P.jsx)(y.Rd,{height:pe,width:R,children:fe})]}):fe}},94629:function(e,n,t){"use strict";t.d(n,{Z:function(){return P}});var i=t(82394),r=t(21831),u=t(82684),l=t(50724),o=t(82555),d=t(97618),c=t(70613),s=t(59696),a=t(68899),p=t(28598);function f(e,n){var t=e.children;return(0,p.jsx)(a.HS,{ref:n,children:t})}var h=u.forwardRef(f),m=t(62547),v=t(82571),j=t(35686),b=t(98464),x=t(46684),g=t(70515),y=t(53808),Z=t(19183);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var P=function(e){var n,t=e.addProjectBreadcrumbToCustomBreadcrumbs,i=e.after,f=e.afterHidden,w=e.afterWidth,P=e.afterWidthOverride,k=e.before,C=e.beforeWidth,_=e.breadcrumbs,I=e.children,T=e.errors,M=e.headerMenuItems,S=e.headerOffset,A=e.mainContainerHeader,U=e.navigationItems,E=e.setErrors,N=e.subheaderChildren,D=e.title,R=e.uuid,B=(0,Z.i)().width,q="dashboard_after_width_".concat(R),F="dashboard_before_width_".concat(R),z=(0,u.useRef)(null),H=(0,u.useState)(P?w:(0,y.U2)(q,w)),W=H[0],L=H[1],G=(0,u.useState)(!1),X=G[0],Y=G[1],V=(0,u.useState)(k?Math.max((0,y.U2)(F,C),13*g.iI):null),J=V[0],K=V[1],Q=(0,u.useState)(!1),$=Q[0],ee=Q[1],ne=(0,u.useState)(null)[1],te=j.ZP.projects.list({},{revalidateOnFocus:!1}).data,ie=null===te||void 0===te?void 0:te.projects,re={label:function(){var e;return null===ie||void 0===ie||null===(e=ie[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},ue=[];_?(t&&ue.push(re),ue.push.apply(ue,(0,r.Z)(_))):(null===ie||void 0===ie?void 0:ie.length)>=1&&ue.push.apply(ue,[re,{bold:!0,label:function(){return D}}]),(0,u.useEffect)((function(){null===z||void 0===z||!z.current||X||$||null===ne||void 0===ne||ne(z.current.getBoundingClientRect().width)}),[X,W,$,J,z,ne,B]),(0,u.useEffect)((function(){X||(0,y.t8)(q,W)}),[f,X,W,q]),(0,u.useEffect)((function(){$||(0,y.t8)(F,J)}),[$,J,F]);var le=(0,b.Z)(w);return(0,u.useEffect)((function(){P&&le!==w&&L(w)}),[P,w,le]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.Z,{title:D}),(0,p.jsx)(s.Z,{breadcrumbs:ue,menuItems:M,project:null===ie||void 0===ie?void 0:ie[0],version:null===ie||void 0===ie||null===(n=ie[0])||void 0===n?void 0:n.version}),(0,p.jsxs)(a.Nk,{children:[0!==(null===U||void 0===U?void 0:U.length)&&(0,p.jsx)(a.lm,{showMore:!0,children:(0,p.jsx)(v.Z,{navigationItems:U,showMore:!0})}),(0,p.jsx)(d.Z,{flex:1,flexDirection:"column",children:(0,p.jsxs)(m.Z,{after:i,afterHeightOffset:x.Mz,afterHidden:f,afterMousedownActive:X,afterWidth:W,before:k,beforeHeightOffset:x.Mz,beforeMousedownActive:$,beforeWidth:a.k1+(k?J:0),headerOffset:S,hideAfterCompletely:!0,leftOffset:k?a.k1:null,mainContainerHeader:A,mainContainerRef:z,setAfterMousedownActive:Y,setAfterWidth:L,setBeforeMousedownActive:ee,setBeforeWidth:K,children:[N&&(0,p.jsx)(h,{children:N}),I]})})]}),T&&(0,p.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===E||void 0===E?void 0:E(null)},children:(0,p.jsx)(o.Z,O(O({},T),{},{onClose:function(){return null===E||void 0===E?void 0:E(null)}}))})]})}},48381:function(e,n,t){"use strict";var i=t(82684),r=t(31882),u=t(55485),l=t(30160),o=t(86735),d=t(28598);n.Z=function(e){var n=e.onClickTag,t=e.tags,c=void 0===t?[]:t,s=(0,i.useMemo)((function(){return(null===c||void 0===c?void 0:c.length)||0}),[c]),a=(0,i.useMemo)((function(){return(0,o.YC)(c||[],"uuid")}),[c]);return(0,d.jsx)(u.ZP,{alignItems:"center",flexWrap:"wrap",children:null===a||void 0===a?void 0:a.reduce((function(e,t){return e.push((0,d.jsx)("div",{style:{marginBottom:2,marginRight:s>=2?4:0,marginTop:2},children:(0,d.jsx)(r.Z,{onClick:n?function(){return n(t)}:null,small:!0,children:(0,d.jsx)(l.ZP,{children:t.uuid})})},"tag-".concat(t.uuid))),e}),[])})}},31882:function(e,n,t){"use strict";var i=t(38626),r=t(71180),u=t(55485),l=t(30160),o=t(44897),d=t(72473),c=t(70515),s=t(61896),a=t(28598),p=i.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," "," "," "," ",""],(function(e){return!e.primary&&"\n    background-color: ".concat((e.theme.background||o.Z.background).tag,";\n  ")}),(function(e){return e.primary&&"\n    background-color: ".concat((e.theme.chart||o.Z.chart).primary,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((c.iI+s.Al)/2,"px;\n    height: ").concat(1.5*c.iI+s.Al,"px;\n    padding: ").concat(c.iI/1.5,"px ").concat(1.25*c.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((c.iI/2+s.Al)/2,"px;\n    height: ").concat(s.Al+c.iI/2+2,"px;\n    padding: ").concat(c.iI/4,"px ").concat(c.iI,"px;\n  ")}),(function(e){return e.xsmall&&"\n    border-radius: ".concat((c.iI/1+s.Al)/1,"px;\n    height: ").concat(20,"px;\n    padding: 4px 6px;\n  ")}),(function(e){return e.border&&"\n    border: 1px solid ".concat((e.theme.content||o.Z.content).muted,";\n  ")}));n.Z=function(e){var n=e.border,t=e.children,i=e.disabled,o=e.label,s=e.monospace,f=e.onClick,h=e.primary,m=e.small,v=e.xsmall;return(0,a.jsx)(p,{border:n,primary:h,small:m,xsmall:v,children:(0,a.jsx)(r.Z,{basic:!0,disabled:i,noBackground:!0,noPadding:!0,onClick:f,transparent:!0,children:(0,a.jsxs)(u.ZP,{alignItems:"center",children:[t,o&&(0,a.jsx)(l.ZP,{monospace:s,small:m,xsmall:v,children:o}),!i&&f&&(0,a.jsx)("div",{style:{marginLeft:2}}),!i&&f&&(0,a.jsx)(d.x8,{default:h,muted:!h,size:m?c.iI:1.25*c.iI})]})})})}},60820:function(e,n,t){"use strict";t.r(n);var i=t(77837),r=t(38860),u=t.n(r),l=t(82684),o=t(60523),d=t(94629),c=t(93808),s=t(32929),a=t(44898),p=t(69419),f=t(28598);function h(){var e=(0,l.useState)(!1),n=e[0],t=e[1],i=(0,l.useState)(null),r=i[0],u=i[1],c=(0,l.useState)(null),h=c[0],m=c[1],v=(0,p.iV)();(0,l.useEffect)((function(){var e=v.new,n=v.object_type,i=v.pipeline_uuid;n&&u(n),i&&m(i),t(!!e)}),[v]);var j=(0,l.useMemo)((function(){var e=[n?"New":"Browse"];return r&&e.push(r),h&&e.push(h),e}),[n,r,h]),b=(0,l.useMemo)((function(){return a.R===r}),[r]);return(0,f.jsx)(d.Z,{addProjectBreadcrumbToCustomBreadcrumbs:n,breadcrumbs:n?[{label:function(){return"Templates"},linkProps:{href:b?"/templates?object_type=".concat(a.R):"/templates"}},{bold:!0,label:function(){return"New"}}]:null,title:"Templates",uuid:"Templates/index",children:(0,f.jsx)(o.Z,{defaultTab:b?s.A2:null,objectType:r,pipelineUUID:h,showAddingNewTemplates:n},j.join("_"))})}h.getInitialProps=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),n.default=(0,c.Z)(h)},87710:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/templates",function(){return t(60820)}])}},function(e){e.O(0,[844,2083,8129,8789,2369,4913,341,6648,8013,600,9696,8264,7858,5499,4839,632,5810,3859,2407,9264,9774,2888,179],(function(){return n=87710,e(e.s=n);var n}));var n=e.O();_N_E=n}]);