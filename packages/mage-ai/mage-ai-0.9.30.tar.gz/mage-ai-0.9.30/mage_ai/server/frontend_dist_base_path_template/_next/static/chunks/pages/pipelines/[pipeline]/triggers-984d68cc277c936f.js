(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4249],{8916:function(e,n,t){"use strict";t.d(n,{FS:function(){return l},JZ:function(){return s},e7:function(){return d},wx:function(){return a}});var r=t(75582),i=t(82394),o=t(30229);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e){return"string"===typeof e?e:JSON.stringify(e)}function a(e,n){var t,r;return null===e||void 0===e||null===(t=e.find((function(e){var t=e.block;return n(t)})))||void 0===t||null===(r=t.variables)||void 0===r?void 0:r.map((function(e){var n=e.value;return u(u({},e),{},{value:l(n)})}))}function s(e,n){return n===o.Xm.TIME?e.push({uuid:"execution_date",value:"<run datetime>"}):n===o.Xm.EVENT&&e.push({uuid:"event",value:"<trigger event>"}),e}function d(e){return e?Object.entries(e).reduce((function(e,n){var t=(0,r.Z)(n,2),o=t[0],c=t[1],l=c;try{l=JSON.parse(c)}catch(a){}return u(u({},e),{},(0,i.Z)({},o,l))}),{}):e}},16488:function(e,n,t){"use strict";t.d(n,{IJ:function(){return g},M8:function(){return w},Vx:function(){return O},XM:function(){return P},_U:function(){return h},eI:function(){return j},gU:function(){return y},lO:function(){return I},ri:function(){return b},tL:function(){return x},vJ:function(){return Z},xH:function(){return m}});var r,i=t(82394),o=t(92083),c=t.n(o),u=t(3917),l=t(4383),a=t(30229),s=t(42122),d=t(86735);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var h=function(e){return!!e&&!Object.values(a.U5).includes(e)};function g(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t=n.block_uuid,r=n.completed_at,o=n.started_at,u=n.status,l=null;o&&r&&(l=c()(r).valueOf()-c()(o).valueOf());return f(f({},e),{},(0,i.Z)({},t,{runtime:l,status:u}))}),{})}var v,b=function(e){var n=[{description:function(){return"This pipeline will run continuously on an interval or just once."},label:function(){return"Schedule"},uuid:a.Xm.TIME},{description:function(){return"This pipeline will run when a specific event occurs."},label:function(){return"Event"},uuid:a.Xm.EVENT},{description:function(){return"Run this pipeline when you make an API call."},label:function(){return"API"},uuid:a.Xm.API}];return e?n.slice(0,1):n};function m(e){var n=(0,s.gR)(e,[a.gm.INTERVAL,a.gm.TYPE]),t=e[a.gm.INTERVAL];t&&(n["schedule_interval[]"]=encodeURIComponent(t));var r=e[a.gm.TYPE];return r&&(n["schedule_type[]"]=r),n}function j(e){if(!e)return null;var n=new Date(c()(e).valueOf()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(t)}function O(e){return"string"!==typeof e?e:j(e.split("+")[0]).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(v||(v={}));var x=(r={},(0,i.Z)(r,v.DAY,86400),(0,i.Z)(r,v.HOUR,3600),(0,i.Z)(r,v.MINUTE,60),(0,i.Z)(r,v.SECOND,1),r);function y(e){var n=v.SECOND,t=e;return e%86400===0?(t/=86400,n=v.DAY):e%3600===0?(t/=3600,n=v.HOUR):e%60===0&&(t/=60,n=v.MINUTE),{time:t,unit:n}}function Z(e,n){return e*x[n]}function P(e,n,t){var r="".concat(e.toISOString().split("T")[0]," ").concat(null===n||void 0===n?void 0:n.hour,":").concat(null===n||void 0===n?void 0:n.minute);if(null!==t&&void 0!==t&&t.includeSeconds&&(r=r.concat(":00")),null!==t&&void 0!==t&&t.localTimezone){var i=c()(e);i.set("hour",+(null===n||void 0===n?void 0:n.hour)||0),i.set("minute",+(null===n||void 0===n?void 0:n.minute)||0),i.set("second",0),r=i.format(u.lE),null!==t&&void 0!==t&&t.convertToUtc&&(r=(0,u.d$)(r,{includeSeconds:null===t||void 0===t?void 0:t.includeSeconds,utcFormat:!0}))}return r}function w(e){var n,t="";return t="".concat(window.origin,"/api/pipeline_schedules/").concat(null===e||void 0===e?void 0:e.id,"/pipeline_runs"),null!==e&&void 0!==e&&e.token&&(t="".concat(t,"/").concat(e.token)),(n=window.location.port)&&(t=t.replace(n,l.QT)),t}function k(e,n,t){return e.match(/[*,-/]/)?{additionalOffset:0,cronValue:e}:function(e,n,t){var r=t.indexOf(e),i=0;if(n<0)for(var o=0;o>n;o--)0===r?(r=t.length-1,i-=1):r-=1;else if(n>0)for(var c=0;c<n;c++)r===t.length-1?(r=0,i+=1):r+=1;return{additionalOffset:i,cronValue:String(t[r]||e)}}(+e,n,t)}var C=(0,d.m5)(60),_=(0,d.m5)(24),S=(0,u.Cs)();function I(e,n){if(!e)return e;var t=c()().local().format("Z"),r=t.split(":"),i="-"===t[0],o=3===r[0].length?Number(r[0].slice(1)):Number(r[0]),u=Number(r[1]);(i&&!n||!i&&n)&&(o=-o,u=-u);var l=e.split(" "),a=l[0],s=l[1],d=l[2],p=k(a,u,C),f=k(s,o+p.additionalOffset,_);if(l[0]=p.cronValue,l[1]=f.cronValue,0!==(null===f||void 0===f?void 0:f.additionalOffset)){var h=k(d,f.additionalOffset,S);l[2]=h.cronValue}return l.join(" ")}},81066:function(e,n,t){"use strict";t.d(n,{B:function(){return p}});var r=t(82394),i=t(46732),o=t(93369),c=t(72473),u=t(8059),l=t(70515),a=t(28598);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p={bold:!0,greyBorder:!0,paddingBottom:9,paddingTop:9};n.Z=function(e){var n=e.addButtonMenuOpen,t=e.addButtonMenuRef,r=e.isLoading,s=e.label,f=e.menuItems,h=e.onClick,g=e.onClickCallback;return(0,a.jsx)(i.Z,{disableKeyboardShortcuts:!0,items:f,onClickCallback:g,onClickOutside:g,open:n,parentRef:t,roundedStyle:!0,topOffset:1,uuid:"Table/Toolbar/NewItemMenu",children:(0,a.jsx)(o.ZP,d(d({},p),{},{background:u.eW,beforeElement:(0,a.jsx)(c.mm,{size:2.5*l.iI}),loading:r,onClick:function(e){e.preventDefault(),null===h||void 0===h||h()},uuid:"shared/AddButton/index",children:s}))})}},55072:function(e,n,t){"use strict";t.d(n,{Et:function(){return p},Q:function(){return d}});t(82684);var r=t(71180),i=t(55485),o=t(38276),c=t(31748),u=t(72473),l=t(79633),a=t(70515),s=t(28598),d=30,p=9;n.ZP=function(e){var n=e.page,t=e.maxPages,d=e.onUpdate,p=e.totalPages,f=[],h=t;if(h>p)f=Array.from({length:p},(function(e,n){return n}));else{var g=Math.floor(h/2),v=n-g;n+g>=p?(v=p-h+2,h-=2):n-g<=0?(v=0,h-=2):(h-=4,v=n-Math.floor(h/2)),f=Array.from({length:h},(function(e,n){return n+v}))}return(0,s.jsx)(s.Fragment,{children:p>0&&(0,s.jsxs)(i.ZP,{alignItems:"center",children:[(0,s.jsx)(r.Z,{disabled:0===n,onClick:function(){return d(n-1)},children:(0,s.jsx)(u.Hd,{size:1.5*a.iI,stroke:c.Av})}),!f.includes(0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{borderLess:!0,noBackground:!0,onClick:function(){return d(0)},children:1})},0),!f.includes(1)&&(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0)]}),f.map((function(e){return(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{backgroundColor:e===n&&l.a$,borderLess:!0,noBackground:!0,notClickable:e===n,onClick:function(){e!==n&&d(e)},children:e+1})},e)})),!f.includes(p-1)&&(0,s.jsxs)(s.Fragment,{children:[!f.includes(p-2)&&(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0),(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{borderLess:!0,noBackground:!0,onClick:function(){return d(p-1)},children:p})},p-1)]}),(0,s.jsx)(o.Z,{ml:1}),(0,s.jsx)(r.Z,{disabled:n===p-1,onClick:function(){return d(n+1)},children:(0,s.jsx)(u.Kw,{size:1.5*a.iI,stroke:c.Av})})]})})}},83784:function(e,n,t){"use strict";t.d(n,{C:function(){return r}});var r="global"},46732:function(e,n,t){"use strict";var r=t(82394),i=t(26304),o=(t(82684),t(50724)),c=t(70374),u=t(28598),l=["children","items","open","onClickCallback","onClickOutside","parentRef","uuid","zIndex"];function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.children,t=e.items,r=e.open,a=e.onClickCallback,d=e.onClickOutside,p=e.parentRef,f=e.uuid,h=e.zIndex,g=(0,i.Z)(e,l),v=(0,u.jsxs)("div",{style:{position:"relative",zIndex:(d?3:2)+(h||0)},children:[(0,u.jsx)("div",{ref:p,children:n}),(0,u.jsx)(c.Z,s(s({},g),{},{items:t,onClickCallback:a,open:r,parentRef:p,uuid:f}))]});return d?(0,u.jsx)(o.Z,{onClickOutside:d,open:!0,children:v}):v}},65956:function(e,n,t){"use strict";var r=t(38626),i=t(55485),o=t(38276),c=t(30160),u=t(44897),l=t(42631),a=t(47041),s=t(70515),d=t(28598),p=(0,r.css)(["padding:","px;padding-bottom:","px;padding-top:","px;"],2*s.iI,1.5*s.iI,1.5*s.iI),f=r.default.div.withConfig({displayName:"Panel__PanelStyle",componentId:"sc-1ct8cgl-0"})(["border-radius:","px;overflow:hidden;"," "," "," "," "," "," "," "," "," "," "," ",""],l.n_,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "}),(function(e){return!e.borderless&&"\n    border: 1px solid ".concat((e.theme.interactive||u.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.success&&"\n    background-color: ".concat((e.theme.background||u.Z.background).successLight,";\n  ")}),(function(e){return e.success&&!e.borderless&&"\n    border: 1px solid ".concat((e.theme.background||u.Z.background).success,";\n  ")}),(function(e){return!e.dark&&!e.success&&"\n    background-color: ".concat((e.theme.background||u.Z.background).panel,";\n  ")}),(function(e){return e.dark&&"\n    background-color: ".concat((e.theme.background||u.Z.background).content,";\n  ")}),(function(e){return!e.fullHeight&&"\n    height: fit-content;\n  "}),(function(e){return e.maxHeight&&"\n    max-height: ".concat(e.maxHeight,";\n  ")}),(function(e){return e.maxWidth&&"\n    max-width: ".concat(e.maxWidth,"px;\n  ")}),(function(e){return e.minWidth&&"\n    min-width: ".concat(e.minWidth,"px;\n\n    @media (max-width: ").concat(e.minWidth,"px) {\n      min-width: 0;\n    }\n  ")}),(function(e){return e.borderless&&"\n    border: none;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),h=r.default.div.withConfig({displayName:"Panel__HeaderStyle",componentId:"sc-1ct8cgl-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;"," "," "," ",""],l.n_,l.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||u.Z.background).chartBlock,";\n    border-bottom: 1px solid ").concat((e.theme.interactive||u.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),p,(function(e){return e.headerPaddingVertical&&"\n    padding-bottom: ".concat(e.headerPaddingVertical,"px;\n    padding-top: ").concat(e.headerPaddingVertical,"px;\n  ")})),g=r.default.div.withConfig({displayName:"Panel__ContentStyle",componentId:"sc-1ct8cgl-2"})(["overflow-y:auto;padding:","px;height:100%;"," "," "," "," ",""],1.75*s.iI,a.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return e.maxHeight&&"\n    max-height: calc(".concat(e.maxHeight," - ").concat(15*s.iI,"px);\n  ")}),(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),v=r.default.div.withConfig({displayName:"Panel__FooterStyle",componentId:"sc-1ct8cgl-3"})(["border-style:",";border-top-width:","px;padding:","px;"],l.M8,l.YF,1.75*s.iI);n.Z=function(e){var n=e.borderless,t=e.children,r=e.containerRef,u=e.contentContainerRef,l=e.dark,a=e.footer,s=e.fullHeight,p=void 0===s||s,b=e.fullWidth,m=void 0===b||b,j=e.header,O=e.headerHeight,x=e.headerIcon,y=e.headerPaddingVertical,Z=e.headerTitle,P=e.maxHeight,w=e.maxWidth,k=e.minWidth,C=e.noPadding,_=e.overflowVisible,S=e.subtitle,I=e.success;return(0,d.jsxs)(f,{borderless:n,dark:l,fullHeight:p,fullWidth:m,maxHeight:P,maxWidth:w,minWidth:k,overflowVisible:_,ref:r,success:I,children:[(j||Z)&&(0,d.jsxs)(h,{headerPaddingVertical:y,height:O,children:[j&&j,Z&&(0,d.jsx)(i.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,d.jsxs)(i.ZP,{alignItems:"center",children:[x&&x,(0,d.jsx)(o.Z,{ml:x?1:0,children:(0,d.jsx)(c.ZP,{bold:!0,default:!0,children:Z})})]})})]}),(0,d.jsxs)(g,{maxHeight:P,noPadding:C,overflowVisible:_,ref:u,children:[S&&(0,d.jsx)(o.Z,{mb:2,children:(0,d.jsx)(c.ZP,{default:!0,children:S})}),t]}),a&&(0,d.jsx)(v,{children:a})]})}},72191:function(e,n,t){"use strict";t.d(n,{_k:function(){return o},bL:function(){return i},l2:function(){return c}});var r=t(70515),i=(r.iI,2*r.iI),o=2.5*r.iI,c=3*r.iI},23706:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return fe}});var r=t(77837),i=t(75582),o=t(82394),c=t(38860),u=t.n(c),l=t(12691),a=t.n(l),s=t(82684),d=t(69864),p=t(34376),f=t(17586),h=t(15338),g=t(48670),v=t(55072),b=t(75457),m=t(30229),j=t(93808),O=t(82359),x=t(71180),y=t(55485),Z=t(85854),P=t(65956),w=t(38276),k=t(75499),C=t(30160),_=t(35576),S=t(17488),I=t(69650),E=t(44897),D=t(38626),T=t(42631),N=t(70515),M=D.default.div.withConfig({displayName:"indexstyle__ToggleStyle",componentId:"sc-f9kt7n-0"})(["padding:","px ","px;border-radius:","px;",""],1.5*N.iI,2*N.iI,T.n_,(function(e){return"\n    border: 1px solid ".concat((e.theme||E.Z).borders.light,";\n    background-color: ").concat((e.theme||E.Z).background.popup,";\n  ")})),V=t(81728),R=t(8916),H=t(28598);function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var L="".concat(N.iI,"px ").concat(3*N.iI,"px");var U=function(e){var n=e.initialPipelineSchedulePayload,t=e.onCancel,r=e.onSuccess,c=e.variables,u=(0,s.useState)(!1),l=u[0],a=u[1],d=(0,s.useState)({}),p=d[0],f=d[1],h=(0,s.useState)(c||{}),g=h[0],v=h[1],b=(0,s.useMemo)((function(){return B(B({},n),{},{name:(0,V.Y6)(),variables:l?(0,R.e7)(g):null})}),[n,l,g]),m=function(e,n){var t={borderless:!0,key:"variable_uuid_input_".concat(e),monospace:!0,onChange:function(n){n.preventDefault(),v((function(t){return B(B({},t),{},(0,o.Z)({},e,n.target.value))}))},paddingHorizontal:0,placeholder:"Variable value",value:n};return p[e]?(0,H.jsx)(_.Z,B(B({},t),{},{rows:1,value:n})):(0,H.jsx)(S.Z,B({},t))};return(0,s.useEffect)((function(){var e=Object.entries(g).reduce((function(e,n){var t=(0,i.Z)(n,2),r=t[0],c=t[1],u=(0,V.Pb)(c)&&"object"===typeof JSON.parse(c)&&!Array.isArray(JSON.parse(c))&&null!==JSON.parse(c);return B(B({},e),{},(0,o.Z)({},r,u))}),{});f(e)}),[]),(0,H.jsxs)(P.Z,{footer:(0,H.jsxs)(y.ZP,{alignItems:"center",fullWidth:!0,justifyContent:"flex-end",children:[(0,H.jsx)(x.Z,{onClick:function(){r({pipeline_schedule:b}),t()},padding:L,primaryAlternate:!0,children:"Run now"}),(0,H.jsx)(w.Z,{mr:1}),(0,H.jsx)(x.Z,{borderColor:E.Z.background.page,onClick:t,padding:L,secondary:!0,children:"Cancel"})]}),header:(0,H.jsx)(Z.Z,{level:5,children:"Run pipeline now"}),maxHeight:"90vh",minWidth:85*N.iI,subtitle:"Creates a new trigger and immediately runs the current pipeline once.",children:[(0,H.jsx)(M,{children:(0,H.jsxs)(y.ZP,{alignItems:"center",children:[(0,H.jsx)(w.Z,{mr:2,children:(0,H.jsx)(I.Z,{checked:l,onCheck:a})}),(0,H.jsx)(C.ZP,{bold:!0,large:!0,children:"Overwrite runtime variables"})]})}),l&&g&&Object.entries(g).length>0&&(0,H.jsx)(w.Z,{mt:2,children:(0,H.jsx)(k.Z,{columnFlex:[null,1],columns:[{uuid:"Variable"},{uuid:"Value"}],rows:Object.entries(g).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[(0,H.jsx)(C.ZP,{default:!0,monospace:!0,children:t},"variable_".concat(t)),m(t,r)]}))})})]})},F=t(47041),W=D.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1xgfh62-0"})(["border-bottom:1px solid ",";padding:","px;"],E.Z.borders.medium,N.tr),Y=D.default.div.withConfig({displayName:"indexstyle__CardsStyle",componentId:"sc-1xgfh62-1"})([""," height:80px;display:flex;overflow-x:scroll;"],F.w5),X=D.default.div.withConfig({displayName:"indexstyle__VariableCardStyle",componentId:"sc-1xgfh62-2"})(["background-color:",";border-radius:","px;flex-shrink:0;margin-right:","px;padding:","px;"],E.Z.background.output,T.n_,N.iI,N.tr),J=t(79633);var Q=function(e){var n=e.hasOverride,t=e.scheduleType,r=e.variables,o=e.variablesOverride,c=[];return Object.entries(r).forEach((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1],u=null===o||void 0===o?void 0:o[t];c.push({uuid:t,value:(0,R.FS)(u||r)})})),(0,R.JZ)(c,t),(0,H.jsxs)(W,{children:[(0,H.jsx)(w.Z,{mb:2,children:(0,H.jsxs)(C.ZP,{bold:!0,large:!0,monospace:!0,muted:!0,children:["Runtime variables",n&&" (override)"]})}),(0,H.jsx)(Y,{noScrollbarTrackBackground:!0,children:r&&c.map((function(e){var n=e.uuid,t=e.value;return(0,H.jsxs)(X,{children:[(0,H.jsx)(C.ZP,{monospace:!0,small:!0,children:n}),(0,H.jsx)(C.ZP,{color:J.Or,monospace:!0,small:!0,children:(0,R.FS)(t)})]})}))})]})},z=t(4190),q=t(85544),G=t(31743),K=t(35686),$=t(83784),ee=t(28795),ne=t(3917),te=t(69419),re=t(16488),ie=t(86735),oe=t(42122),ce=t(50178),ue=t(72619),le=t(70320),ae=t(89538);function se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function de(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?se(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function pe(e){var n=e.pipeline,t=(0,p.useRouter)(),r=(0,ce.Ct)(),c=n.uuid,u=(0,s.useState)(null),l=u[0],j=u[1],x=K.ZP.projects.list().data,y=(0,s.useMemo)((function(){var e;return null===x||void 0===x||null===(e=x.projects)||void 0===e?void 0:e[0]}),[x]),Z=((0,s.useMemo)((function(){var e;return(0,le.h)(null===y||void 0===y||null===(e=y.features)||void 0===e?void 0:e[O.d.LOCAL_TIMEZONE])}),[null===y||void 0===y?void 0:y.features]),K.ZP.variables.pipelines.list(c,{global_only:!0},{revalidateOnFocus:!1}).data),P=null===Z||void 0===Z?void 0:Z.variables,k=(0,te.iV)(),_=(0,te.DQ)(k,[m.gm.INTERVAL,m.gm.STATUS,m.gm.TAG,m.gm.TYPE]),S=(0,re.xH)(_),I=null!==k&&void 0!==k&&k.page?k.page:0,E=K.ZP.pipeline_schedules.pipelines.list(c,de(de({},S),{},{_limit:v.Q,_offset:(null!==k&&void 0!==k&&k.page?k.page:0)*v.Q}),{refreshInterval:7500}),D=E.data,T=E.mutate,M=(0,s.useMemo)((function(){return(null===D||void 0===D?void 0:D.pipeline_schedules)||[]}),[D]),A=function(e){return(0,d.Db)(K.ZP.pipeline_schedules.pipelines.useCreate(c),{onSuccess:function(n){return(0,ue.wD)(n,{callback:function(n){var t=n.pipeline_schedule.id;null===e||void 0===e||e(t)},onErrorCallback:function(e,n){return j({errors:n,response:e})}})}})},B=A((function(e){return t.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(null===n||void 0===n?void 0:n.uuid,"/triggers/").concat(e,"/edit"))})),L=(0,i.Z)(B,2),F=L[0],W=L[1].isLoading,Y=A(T),X=(0,i.Z)(Y,2),J=X[0],se=X[1].isLoading,pe=(0,s.useMemo)((function(){var e;return null===(e=(0,R.wx)(P,(function(e){return e.uuid===$.C})))||void 0===e?void 0:e.reduce((function(e,n){var t=n.uuid,r=n.value;return de(de({},e),{},(0,o.Z)({},t,r))}),{})}),[P]),fe=(0,V.Y6)(),he=(0,s.useMemo)((function(){return{name:fe,schedule_interval:m.U5.ONCE,schedule_type:m.Xm.TIME,start_time:(0,ne.d$)((new Date).toISOString(),{dayAgo:!0,utcFormat:!0}),status:m.fq.ACTIVE}}),[fe]),ge=(0,ae.dd)((function(){return(0,H.jsx)(U,{initialPipelineSchedulePayload:he,onCancel:me,onSuccess:J,variables:pe})}),{},[P,pe],{background:!0,uuid:"run_pipeline_now_popup"}),ve=(0,i.Z)(ge,2),be=ve[0],me=ve[1],je=(0,s.useState)(),Oe=je[0],xe=je[1],ye=(0,s.useMemo)((function(){var e=null===Oe||void 0===Oe?void 0:Oe.variables,n=!(0,oe.Qr)(e),t=n?null===Oe||void 0===Oe?void 0:Oe.variables:(0,oe.Qr)(pe)?null:pe;return function(i){var o=i.height-(t?151:80);return(0,H.jsxs)(H.Fragment,{children:[t&&(0,H.jsx)(Q,{hasOverride:n,scheduleType:null===Oe||void 0===Oe?void 0:Oe.schedule_type,variables:pe,variablesOverride:e}),!t&&(0,H.jsxs)(w.Z,{p:N.cd,children:[(0,H.jsx)(C.ZP,{children:"This pipeline has no runtime variables."}),!r&&(0,H.jsxs)(w.Z,{mt:1,children:[(0,H.jsx)(a(),{as:"/pipelines/".concat(c,"/edit?sideview=variables"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,H.jsx)(g.Z,{primary:!0,children:"Click here"})})," ",(0,H.jsx)(C.ZP,{inline:!0,children:"to add variables to this pipeline."})]})]}),(0,H.jsx)(f.Z,de(de({},i),{},{height:o,noStatus:!0}))]})}}),[r,c,null===Oe||void 0===Oe?void 0:Oe.schedule_type,null===Oe||void 0===Oe?void 0:Oe.variables,pe]),Ze=(0,s.useMemo)((function(){var e;return(null===D||void 0===D||null===(e=D.metadata)||void 0===e?void 0:e.count)||[]}),[D]),Pe=K.ZP.pipeline_triggers.pipelines.list(c).data,we=(0,s.useMemo)((function(){return(0,ie.HK)((null===Pe||void 0===Pe?void 0:Pe.pipeline_triggers)||[],(function(e){return e.name}))}),[Pe]),ke=K.ZP.tags.list().data,Ce=(0,s.useMemo)((function(){return(0,ie.YC)((null===ke||void 0===ke?void 0:ke.tags)||[],(function(e){return e.uuid}))}),[ke]),_e=(0,s.useMemo)((function(){return(0,H.jsx)(q.Z,{addButtonProps:{isLoading:W,label:"New trigger",onClick:function(){return F({pipeline_schedule:{name:(0,V.Y6)()}})}},filterOptions:{frequency:Object.values(m.U5),status:Object.values(m.fq),tag:Ce.map((function(e){return e.uuid})),type:Object.values(m.Xm)},filterValueLabelMapping:{tag:Ce.reduce((function(e,n){var t=n.uuid;return de(de({},e),{},(0,o.Z)({},t,t))}),{}),type:m.Z4},onClickFilterDefaults:function(){t.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(c,"/triggers"))},query:_,secondaryButtonProps:{disabled:r,isLoading:se,label:"Run @once",onClick:(0,oe.Qr)(pe)?function(){return J({pipeline_schedule:he})}:be,tooltip:"Creates an @once trigger and runs pipeline immediately"},showDivider:!0})}),[F,J,W,se,r,he,c,_,t,be,Ce,pe]);return(0,H.jsxs)(b.Z,{breadcrumbs:[{label:function(){return"Triggers"}}],buildSidekick:ye,errors:l,pageName:ee.M.TRIGGERS,pipeline:n,setErrors:j,subheader:_e,title:function(e){var n=e.name;return"".concat(n," triggers")},uuid:"".concat(ee.M.TRIGGERS,"_").concat(c),children:[(0,H.jsx)(h.Z,{light:!0}),D?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(G.Z,{fetchPipelineSchedules:T,pipeline:n,pipelineSchedules:M,pipelineTriggersByName:we,selectedSchedule:Oe,setErrors:j,setSelectedSchedule:xe}),(0,H.jsx)(w.Z,{p:2,children:(0,H.jsx)(v.ZP,{maxPages:9,onUpdate:function(e){var n=Number(e),r=de(de({},k),{},{page:n>=0?n:0});t.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(c,"/triggers?").concat((0,te.uM)(r)))},page:Number(I),totalPages:Math.ceil(Ze/v.Q)})})]}):(0,H.jsx)(w.Z,{m:2,children:(0,H.jsx)(z.Z,{inverted:!0})})]})}pe.getInitialProps=function(){var e=(0,r.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:t}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var fe=(0,j.Z)(pe)},40183:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/triggers",function(){return t(23706)}])}},function(e){e.O(0,[844,2083,8129,8013,600,9696,8264,7858,5499,4839,5457,632,1743,3951,9774,2888,179],(function(){return n=40183,e(e.s=n);var n}));var n=e.O();_N_E=n}]);