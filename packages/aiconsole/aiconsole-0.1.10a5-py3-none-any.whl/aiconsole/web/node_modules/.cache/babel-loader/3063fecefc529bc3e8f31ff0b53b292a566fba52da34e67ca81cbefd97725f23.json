{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useDebouncedValue } from '@mantine/hooks';\nimport { create } from 'zustand';\nexport const usePromptStore = create(set => ({\n  strategy: 'Strat1',\n  mode: \"QUALITY\",\n  manuals: [{\n    name: \"Linkedin\",\n    usage: \"Usage\",\n    content: \"Content\"\n  }],\n  messages: [],\n  setMessages: newMessages => set(state => ({\n    messages: newMessages\n  })),\n  removeMessage: index => set(state => ({\n    messages: state.messages.filter((_, i) => i !== index)\n  })),\n  promptHistory: [''],\n  promptIndex: 0,\n  historyUp: () => set(state => ({\n    promptIndex: Math.min(state.promptHistory.length - 1, state.promptIndex + 1)\n  })),\n  historyDown: () => set(state => ({\n    promptIndex: Math.max(0, state.promptIndex - 1)\n  })),\n  editPrompt: prompt => set(state => ({\n    promptHistory: [...state.promptHistory.slice(0, state.promptIndex), prompt, ...state.promptHistory.slice(state.promptIndex + 1, state.promptHistory.length)]\n  })),\n  newPrompt: () => set(state => ({\n    promptHistory: ['', ...state.promptHistory],\n    promptIndex: 0\n  }))\n}));\nexport function usePrompt() {\n  _s();\n  return usePromptStore(state => state.promptHistory[state.promptIndex]);\n}\n_s(usePrompt, \"Qk/FDLVJNL1huXi0C7D+I67GGE4=\", false, function () {\n  return [usePromptStore];\n});\nexport function useDebouncedPrompt() {\n  _s2();\n  const prompt = usePromptStore(state => state.promptHistory[state.promptIndex]).trim();\n  const [debouncedPrompt] = useDebouncedValue(prompt, 150, {\n    leading: true\n  });\n  return debouncedPrompt;\n}\n_s2(useDebouncedPrompt, \"X4qn8ZpkGMRvkHk5aWvkWtvJexM=\", false, function () {\n  return [usePromptStore, useDebouncedValue];\n});","map":{"version":3,"names":["useDebouncedValue","create","usePromptStore","set","strategy","mode","manuals","name","usage","content","messages","setMessages","newMessages","state","removeMessage","index","filter","_","i","promptHistory","promptIndex","historyUp","Math","min","length","historyDown","max","editPrompt","prompt","slice","newPrompt","usePrompt","_s","useDebouncedPrompt","_s2","trim","debouncedPrompt","leading"],"sources":["/Users/maciel/Projects/aiconsole/web/src/workspace/prompt_store.ts"],"sourcesContent":["import { useDebouncedValue } from '@mantine/hooks';\nimport { create } from 'zustand';\n\ntype GPTMessage = {\n  role: string;\n  content: string;\n};\n\ntype Manual = {\n  name: string;\n  usage: string;\n  content: string;\n}\n\ntype GPTMode = \"QUALITY\" | \"FAST\"\n\ntype PromptStore = {\n  strategy: string;\n  mode: GPTMode;\n  manuals: Manual[];\n  messages: GPTMessage[];\n  setMessages: (newMessages: GPTMessage[]) => void;\n  removeMessage: (index: number) => void;\n\n  promptHistory: string[];\n  promptIndex: number;\n\n  historyUp: () => void;\n  historyDown: () => void;\n  newPrompt: () => void;\n  editPrompt: (prompt: string) => void;\n};\n\nexport const usePromptStore = create<PromptStore>((set) => ({\n  strategy: 'Strat1',\n  mode: \"QUALITY\",\n  manuals: [\n    {\n      name: \"Linkedin\",\n      usage: \"Usage\",\n      content: \"Content\",\n    }\n  ],\n  messages: [],\n  setMessages: (newMessages: GPTMessage[]) =>\n    set((state) => ({\n      messages: newMessages\n    })),\n  removeMessage: (index: number) => \n    set((state) => ({\n      messages: state.messages.filter((_, i) => i !== index)\n    })),\n  promptHistory: [''],\n  promptIndex: 0,\n  historyUp: () => set((state) => ({ promptIndex: Math.min(state.promptHistory.length - 1, state.promptIndex + 1) })),\n  historyDown: () => set((state) => ({ promptIndex: Math.max(0, state.promptIndex - 1) })),\n  editPrompt: (prompt) =>\n    set((state) => ({\n      promptHistory: [...state.promptHistory.slice(0, state.promptIndex),  prompt, ...state.promptHistory.slice(state.promptIndex + 1, state.promptHistory.length)],\n    })),\n  newPrompt: () =>\n    set((state) => ({\n      promptHistory: ['', ...state.promptHistory],\n      promptIndex: 0,\n    })),\n}));\n\nexport function usePrompt() {\n  return usePromptStore((state) => state.promptHistory[state.promptIndex]);\n}\n\nexport function useDebouncedPrompt() {\n  const prompt = usePromptStore((state) => state.promptHistory[state.promptIndex]).trim();\n  const [debouncedPrompt] = useDebouncedValue(prompt, 150, { leading: true });\n\n  return debouncedPrompt;\n}\n"],"mappings":";;AAAA,SAASA,iBAAiB,QAAQ,gBAAgB;AAClD,SAASC,MAAM,QAAQ,SAAS;AAgChC,OAAO,MAAMC,cAAc,GAAGD,MAAM,CAAeE,GAAG,KAAM;EAC1DC,QAAQ,EAAE,QAAQ;EAClBC,IAAI,EAAE,SAAS;EACfC,OAAO,EAAE,CACP;IACEC,IAAI,EAAE,UAAU;IAChBC,KAAK,EAAE,OAAO;IACdC,OAAO,EAAE;EACX,CAAC,CACF;EACDC,QAAQ,EAAE,EAAE;EACZC,WAAW,EAAGC,WAAyB,IACrCT,GAAG,CAAEU,KAAK,KAAM;IACdH,QAAQ,EAAEE;EACZ,CAAC,CAAC,CAAC;EACLE,aAAa,EAAGC,KAAa,IAC3BZ,GAAG,CAAEU,KAAK,KAAM;IACdH,QAAQ,EAAEG,KAAK,CAACH,QAAQ,CAACM,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,KAAKH,KAAK;EACvD,CAAC,CAAC,CAAC;EACLI,aAAa,EAAE,CAAC,EAAE,CAAC;EACnBC,WAAW,EAAE,CAAC;EACdC,SAAS,EAAEA,CAAA,KAAMlB,GAAG,CAAEU,KAAK,KAAM;IAAEO,WAAW,EAAEE,IAAI,CAACC,GAAG,CAACV,KAAK,CAACM,aAAa,CAACK,MAAM,GAAG,CAAC,EAAEX,KAAK,CAACO,WAAW,GAAG,CAAC;EAAE,CAAC,CAAC,CAAC;EACnHK,WAAW,EAAEA,CAAA,KAAMtB,GAAG,CAAEU,KAAK,KAAM;IAAEO,WAAW,EAAEE,IAAI,CAACI,GAAG,CAAC,CAAC,EAAEb,KAAK,CAACO,WAAW,GAAG,CAAC;EAAE,CAAC,CAAC,CAAC;EACxFO,UAAU,EAAGC,MAAM,IACjBzB,GAAG,CAAEU,KAAK,KAAM;IACdM,aAAa,EAAE,CAAC,GAAGN,KAAK,CAACM,aAAa,CAACU,KAAK,CAAC,CAAC,EAAEhB,KAAK,CAACO,WAAW,CAAC,EAAGQ,MAAM,EAAE,GAAGf,KAAK,CAACM,aAAa,CAACU,KAAK,CAAChB,KAAK,CAACO,WAAW,GAAG,CAAC,EAAEP,KAAK,CAACM,aAAa,CAACK,MAAM,CAAC;EAC9J,CAAC,CAAC,CAAC;EACLM,SAAS,EAAEA,CAAA,KACT3B,GAAG,CAAEU,KAAK,KAAM;IACdM,aAAa,EAAE,CAAC,EAAE,EAAE,GAAGN,KAAK,CAACM,aAAa,CAAC;IAC3CC,WAAW,EAAE;EACf,CAAC,CAAC;AACN,CAAC,CAAC,CAAC;AAEH,OAAO,SAASW,SAASA,CAAA,EAAG;EAAAC,EAAA;EAC1B,OAAO9B,cAAc,CAAEW,KAAK,IAAKA,KAAK,CAACM,aAAa,CAACN,KAAK,CAACO,WAAW,CAAC,CAAC;AAC1E;AAACY,EAAA,CAFeD,SAAS;EAAA,QAChB7B,cAAc;AAAA;AAGvB,OAAO,SAAS+B,kBAAkBA,CAAA,EAAG;EAAAC,GAAA;EACnC,MAAMN,MAAM,GAAG1B,cAAc,CAAEW,KAAK,IAAKA,KAAK,CAACM,aAAa,CAACN,KAAK,CAACO,WAAW,CAAC,CAAC,CAACe,IAAI,CAAC,CAAC;EACvF,MAAM,CAACC,eAAe,CAAC,GAAGpC,iBAAiB,CAAC4B,MAAM,EAAE,GAAG,EAAE;IAAES,OAAO,EAAE;EAAK,CAAC,CAAC;EAE3E,OAAOD,eAAe;AACxB;AAACF,GAAA,CALeD,kBAAkB;EAAA,QACjB/B,cAAc,EACHF,iBAAiB;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}