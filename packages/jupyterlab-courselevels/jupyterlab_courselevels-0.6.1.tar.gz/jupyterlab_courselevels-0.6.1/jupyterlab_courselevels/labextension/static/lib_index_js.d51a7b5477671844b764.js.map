{"version":3,"file":"lib_index_js.d51a7b5477671844b764.js","mappings":"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","sources":["webpack://jupyterlab-courselevels/./src/admonitions.ts","webpack://jupyterlab-courselevels/./src/index.ts"],"sourcesContent":["/* eslint-disable prettier/prettier */\n\nimport { Notebook, NotebookActions, } from '@jupyterlab/notebook'\n\nconst FENCE = '````'\n\n/* works on the active cell */\nexport const toggle_admonition = (notebook: Notebook, admonition: string): void => {\n\n  const activeCell = notebook?.activeCell\n  if (activeCell === undefined) { return }\n  const model = activeCell?.model\n  if (model === undefined) { return }\n\n  NotebookActions.changeCellType(notebook, 'markdown')\n\n  let cell_source = model.sharedModel.getSource()\n  // remove trailing newlines\n  while (cell_source.endsWith('\\n')) {\n    cell_source = cell_source.slice(0, -1)\n  }\n  // does it start with an admonition?\n  const turning_off = cell_source.startsWith(FENCE)\n\n  console.debug('admonition: turning_off', turning_off)\n\n  // a function that removes any initial white line, and any trailing white line\n  // a line is considered white if it is empty or only contains whitespace\n  const tidy = (dirty: string): string => {\n    const lines = dirty.split('\\n')\n    while (lines.length !=0 && lines[0].match(/^\\s*$/)) {\n      lines.shift()\n    }\n    while (lines.length !=0 && lines[lines.length - 1].match(/^\\s*$/)) {\n      lines.pop()\n    }\n    return lines.join('\\n')\n  }\n\n  let new_source: string\n  if (turning_off) {\n    new_source = tidy(\n        cell_source\n        .replace(RegExp(`^${FENCE} *{[a-zA-Z]+}`), '')\n        .replace(RegExp(`\\n${FENCE}$`), '')\n    )\n  } else {\n    new_source = `${FENCE}{${admonition}}\\n${tidy(cell_source)}\\n${FENCE}`\n  }\n\n  model.sharedModel.setSource(new_source)\n}\n","/*\n * for attaching keybindings later on, see\n * https://towardsdatascience.com/how-to-customize-jupyterlab-keyboard-shortcuts-72321f73753d\n */\n\n/* eslint-disable prettier/prettier */\n\nimport { JupyterFrontEnd, JupyterFrontEndPlugin, } from '@jupyterlab/application'\nimport { ICommandPalette } from '@jupyterlab/apputils'\nimport { INotebookTracker, NotebookPanel, INotebookModel } from '@jupyterlab/notebook'\nimport { Cell } from '@jupyterlab/cells'\n\nimport { IDisposable, DisposableDelegate } from '@lumino/disposable'\nimport { DocumentRegistry } from '@jupyterlab/docregistry'\nimport { ToolbarButton } from '@jupyterlab/apputils'\n\nimport { md_has, md_insert, md_remove, md_toggle } from 'jupyterlab-celltagsclasses'\nimport { Scope, apply_on_cells } from 'jupyterlab-celltagsclasses'\n\nimport { toggle_admonition } from './admonitions'\n\n\n\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: 'jupyterlab-courselevels:plugin',\n  autoStart: true,\n  requires: [ICommandPalette, INotebookTracker],\n  activate: (app: JupyterFrontEnd, palette: ICommandPalette, notebookTracker: INotebookTracker) => {\n    console.log('extension jupyterlab-courselevels is activating')\n    // https://lumino.readthedocs.io/en/1.x/api/commands/interfaces/commandregistry.ikeybindingoptions.html\n    // The supported modifiers are: Accel, Alt, Cmd, Ctrl, and Shift. The Accel\n    // modifier is translated to Cmd on Mac and Ctrl on all other platforms. The\n    // Cmd modifier is ignored on non-Mac platforms.\n    // Alt is option on mac\n\n    const cell_toggle_level = (cell: Cell, level: string): void => {\n      switch (level) {\n        case 'basic':\n          if (md_has(cell, 'tags', 'level_basic')) {\n            md_remove(cell, 'tags', 'level_basic')\n          } else {\n            md_insert(cell, 'tags', 'level_basic')\n            md_remove(cell, 'tags', 'level_intermediate')\n            md_remove(cell, 'tags', 'level_advanced')\n          }\n          break\n        case 'intermediate':\n          if (md_has(cell, 'tags', 'level_intermediate')) {\n            md_remove(cell, 'tags', 'level_intermediate')\n          } else {\n            md_remove(cell, 'tags', 'level_basic')\n            md_insert(cell, 'tags', 'level_intermediate')\n            md_remove(cell, 'tags', 'level_advanced')\n          }\n          break\n        case 'advanced':\n          if (md_has(cell, 'tags', 'level_advanced')) {\n            md_remove(cell, 'tags', 'level_advanced')\n          } else {\n            md_remove(cell, 'tags', 'level_basic')\n            md_remove(cell, 'tags', 'level_intermediate')\n            md_insert(cell, 'tags', 'level_advanced')\n          }\n          break\n        default:\n          md_remove(cell, 'tags', 'level_basic')\n          md_remove(cell, 'tags', 'level_intermediate')\n          md_remove(cell, 'tags', 'level_advanced')\n      }\n    }\n\n    const toggle_level = (level: string) => {\n      apply_on_cells(notebookTracker, Scope.Active, (cell: Cell) => {\n        cell_toggle_level(cell, level)\n      })\n    }\n\n    let command\n\n    for (const [level, key] of [\n      ['basic', 'Ctrl X'],\n      ['intermediate', 'Ctrl Y'],\n      ['advanced', 'Ctrl Z'],\n    ]) {\n      command = `courselevels:toggle-level-${level}`\n      app.commands.addCommand(command, {\n        label: `toggle ${level} level`,\n        execute: () => toggle_level(level)\n      })\n      palette.addItem({ command, category: 'CourseLevels' })\n      app.commands.addKeyBinding({ command, keys: ['Ctrl \\\\', key], selector: '.jp-Notebook' })\n    }\n\n\n    const toggle_frame = () => {\n      apply_on_cells(notebookTracker, Scope.Active, (cell: Cell) => {\n        md_toggle(cell, 'tags', 'framed_cell')\n      })\n    }\n\n    command = 'courselevels:toggle-frame'\n    app.commands.addCommand(command, {\n      label: 'toggle frame',\n      execute: () => toggle_frame()\n    })\n    palette.addItem({ command, category: 'CourseLevels' })\n    app.commands.addKeyBinding({ command, keys: ['Ctrl \\\\', 'Ctrl M'], selector: '.jp-Notebook' })\n\n\n\n    const toggle_licence = () => {\n      apply_on_cells(notebookTracker, Scope.Active, (cell: Cell) => {\n        md_toggle(cell, 'tags', 'licence')\n      })\n    }\n\n    command = 'courselevels:toggle-licence'\n    app.commands.addCommand(command, {\n      label: 'toggle licence',\n      execute: () => toggle_licence()\n    })\n    palette.addItem({ command, category: 'CourseLevels' })\n    app.commands.addKeyBinding({ command, keys: ['Ctrl \\\\', 'Ctrl L'], selector: '.jp-Notebook' })\n\n    // the buttons in the toolbar\n\n    const find_spacer = (panel: NotebookPanel): number => {\n      let index = 0\n      for (const child of panel.toolbar.children()) {\n        if (child.node.classList.contains('jp-Toolbar-spacer')) {\n          return index\n        } else {\n          index += 1\n        }\n      }\n      return 0\n    }\n\n    class BasicButton implements DocumentRegistry.IWidgetExtension<NotebookPanel, INotebookModel> {\n      createNew(panel: NotebookPanel, context: DocumentRegistry.IContext<INotebookModel>): IDisposable {\n        const button = new ToolbarButton({\n          className: 'courselevels-button',\n          iconClass: 'far fa-hand-pointer',\n          onClick: () => toggle_level('basic'),\n          tooltip: 'Toggle basic level',\n        })\n        // compute where to insert it\n        const index = find_spacer(panel)\n        panel.toolbar.insertItem(index, 'basicLevel', button)\n        return new DisposableDelegate(() => {\n          button.dispose()\n        })\n      }\n    }\n    app.docRegistry.addWidgetExtension('Notebook', new BasicButton())\n\n    class IntermediateButton implements DocumentRegistry.IWidgetExtension<NotebookPanel, INotebookModel> {\n      createNew(panel: NotebookPanel, context: DocumentRegistry.IContext<INotebookModel>): IDisposable {\n        const button = new ToolbarButton({\n          className: 'courselevels-button',\n          iconClass: 'far fa-hand-peace',\n          onClick: () => toggle_level('intermediate'),\n          tooltip: 'Toggle intermediate level',\n        })\n        // compute where to insert it\n        const index = find_spacer(panel)\n        panel.toolbar.insertItem(index, 'intermediateLevel', button)\n        return new DisposableDelegate(() => {\n          button.dispose()\n        })\n      }\n    }\n    app.docRegistry.addWidgetExtension('Notebook', new IntermediateButton())\n\n    class AdvancedButton implements DocumentRegistry.IWidgetExtension<NotebookPanel, INotebookModel> {\n      createNew(panel: NotebookPanel, context: DocumentRegistry.IContext<INotebookModel>): IDisposable {\n        const button = new ToolbarButton({\n          className: 'courselevels-button',\n          iconClass: 'far fa-hand-spock',\n          onClick: () => toggle_level('advanced'),\n          tooltip: 'Toggle advanced level',\n        })\n        // compute where to insert it\n        const index = find_spacer(panel)\n        panel.toolbar.insertItem(index, 'advancedLevel', button)\n        return new DisposableDelegate(() => {\n          button.dispose()\n        })\n      }\n    }\n    app.docRegistry.addWidgetExtension('Notebook', new AdvancedButton())\n\n    class FrameButton implements DocumentRegistry.IWidgetExtension<NotebookPanel, INotebookModel> {\n      createNew(panel: NotebookPanel, context: DocumentRegistry.IContext<INotebookModel>): IDisposable {\n        const button = new ToolbarButton({\n          className: 'courselevels-button',\n          iconClass: 'fas fa-crop-alt',\n          onClick: () => toggle_frame(),\n          tooltip: 'Toggle frame around cell',\n        })\n        // compute where to insert it\n        const index = find_spacer(panel)\n        panel.toolbar.insertItem(index, 'frameLevel', button)\n        return new DisposableDelegate(() => {\n          button.dispose()\n        })\n      }\n    }\n    app.docRegistry.addWidgetExtension('Notebook', new FrameButton())\n\n    // admonitions\n    for (const [name, key] of [\n      ['admonition', 'Ctrl A'],\n      ['tip', 'Ctrl T'],\n      ['note', 'Ctrl N'],\n      ['attention', null],\n      ['caution', null],\n      ['danger', null],\n      ['error', null],\n      ['hint', null],\n      ['important', null],\n      ['seealso', null],\n      ['warning', null],\n    ]) {\n      // need to cast because name is typed as string | null ?!?\n      const admonition = name as string\n      command = 'courselevels:toggle-admonition'\n      let label = 'toggle admonition'\n      if (admonition !== 'admonition') {\n        command += `-${admonition}`\n        label += ` ${admonition}`\n      }\n      app.commands.addCommand(command, {\n        label,\n        execute: () => {\n          const notebook = notebookTracker.currentWidget?.content\n          if (notebook === undefined) { return }\n          toggle_admonition(notebook, admonition)\n        }\n      })\n      palette.addItem({ command, category: 'CourseLevels' })\n      if (key !== null) {\n        app.commands.addKeyBinding({ command, keys: ['Ctrl \\\\', key], selector: '.jp-Notebook' })\n      }\n    }\n  }\n\n}\n\nexport default plugin\n"],"names":[],"sourceRoot":""}