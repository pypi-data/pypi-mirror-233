/*! For license information please see 1096.0530805fd3f6c7e47fdc.js.LICENSE.txt */
"use strict";(self.webpackChunkatoti_jupyterlab=self.webpackChunkatoti_jupyterlab||[]).push([[1096,2903,488,992,2322,7170],{7170:(e,r,t)=>{t.r(r),t.d(r,{canOpenDrillthroughOnSelection:()=>b,getDrillthroughWidgetFilters:()=>x,pluginMenuItemOpenDrillthrough:()=>N});var n=t(52903),l=t(74508),o=t(66029),a=t(61745),i=t(99802),s=t(15502),u=t(16942),c=t(32467),m=t(29446),d=t(24515),h=t(40920),f=t(53133),g=t(74129),p=t(75206),y=t(96500);function b(e){return void 0!==e&&!(e.axes&&e.axes.length>0)&&void 0!==e.cells&&1===e.cells.length&&void 0!==e.cells[0].value}var v=t(2629),_=t(99518),C=t(27083);function S(e,r){const{dimensionName:t,hierarchyName:n}=e;return r.some((e=>(0,C.I)(e,{dimensionName:t,hierarchyName:n})))}function x({sourceWidgetFilters:e,tuple:r,cube:t}){return[...(e||[]).filter((e=>!S(e,r))),...r.map((({dimensionName:e,hierarchyName:r,namePath:t})=>({type:"members",dimensionName:e,hierarchyName:r,members:[t]})))]}const N={key:"open-drillthrough",useMenuItem:e=>{const{selection:r,widgetState:t}=e,{cube:C,serverKey:N}=(0,y.useCube)(t),{formatMessage:O}=(0,a.useIntl)(),D=(0,m.T)(),k=(0,o.useMemo)((()=>{if(b(r))return r.cells[0].tuple.filter((e=>"Measures"===e.dimensionName||!(0,s.isTotal)((0,f._)(e,C),e)))}),[C,r]),F=(0,o.useMemo)((()=>{if(k){const e=k.filter((e=>"Measures"!==e.dimensionName));return O({id:"aui.plugins.menu-item.open-drillthrough.openDrillthrough"},{member:e.length>0?(0,s.getTupleCaption)(e,{cube:C,separator:", ",hasOnlyCaptionForLeafLevels:!0}):void 0})}}),[O,k,C]),[j]=(0,u.y)("drillthrough.defaultSelectedColumns"),[M]=(0,c.o)(N,C.name),W=(0,o.useMemo)((()=>{const e=(0,p.K)(M??[]);return(0,l.flatten)(["numeric","regular","date"].map((r=>e[r])))}),[M]),E=(0,o.useCallback)((async()=>{if(D&&F&&k&&(0,i.F)(e)){const r=(0,d.A)(e.dashboardState.pagesOrder),n=e.dashboardState.pagesOrder.indexOf(D),o=e.dashboardState.pages[D];if(void 0===t.query.mdx)return;const a=function({name:e,sourceWidget:r,sourceWidgetPage:t,tuple:n,drillthroughColumns:o,defaultSelectedColumns:a,cube:i}){const s=x({sourceWidgetFilters:r.filters,tuple:n,cube:i}),u=(0,l.map)(o,"name"),c=a[i.name]?(0,l.intersection)(u,a[i.name]):u,m={mdx:(0,v.r)((0,y.getDefaultMdxDrillthrough)(i.name),{drillthroughColumnUniqueNames:c})},d=(t.filters||[]).filter((e=>!S(e,n)));return{name:e,content:{0:{..._.o.initialState,query:m,serverKey:r.serverKey,initialCubeName:i.name,filters:s}},layout:{direction:"column",children:[{leafKey:"0",size:1}]},filters:d}}({name:F,sourceWidget:t,sourceWidgetPage:o,tuple:k,drillthroughColumns:W,defaultSelectedColumns:j,cube:C}),i=(0,h.W)(e.dashboardState,{page:a,key:r,index:n+1});e.onDashboardChange(i),e.onActivePageChange(r)}}),[D,C,F,e,k,t,j,W]);if((0,i.F)(e)&&k&&t.query.mdx)return{icon:(0,n.tZ)(g.IconDrillthrough,{}),label:F,onClick:E}},translations:{"en-US":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {on {member}}\n          }"},"fr-FR":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {sur {member}}\n          }"}}}},52903:(e,r,t)=>{t.d(r,{BX:()=>i,HY:()=>o,tZ:()=>a});var n=t(52322),l=t(4318),o=(t(66029),t(59205),t(73463),t(49168),t(82668),n.Fragment);function a(e,r,t){return l.h.call(r,"css")?n.jsx(l.E,(0,l.c)(e,r),t):n.jsx(e,r,t)}function i(e,r,t){return l.h.call(r,"css")?n.jsxs(l.E,(0,l.c)(e,r),t):n.jsxs(e,r,t)}},11837:(e,r,t)=>{var n=t(66029),l=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,r,t){var n,o={},u=null,c=null;for(n in void 0!==t&&(u=""+t),void 0!==r.key&&(u=""+r.key),void 0!==r.ref&&(c=r.ref),r)a.call(r,n)&&!s.hasOwnProperty(n)&&(o[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===o[n]&&(o[n]=r[n]);return{$$typeof:l,type:e,key:u,ref:c,props:o,_owner:i.current}}r.Fragment=o,r.jsx=u,r.jsxs=u},52322:(e,r,t)=>{e.exports=t(11837)}}]);