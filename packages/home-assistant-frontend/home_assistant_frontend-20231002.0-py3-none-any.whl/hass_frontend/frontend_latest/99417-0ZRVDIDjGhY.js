export const id=99417;export const ids=[99417];export const modules={2179:(a,t,e)=>{e.d(t,{FZ:()=>o,I0:()=>s,ZE:()=>i,Zk:()=>n});const s=a=>`/api/backup/download/${a}`,i=a=>a.callWS({type:"backup/info"}),o=(a,t)=>a.callWS({type:"backup/remove",slug:t}),n=a=>a.callWS({type:"backup/generate"})},60538:(a,t,e)=>{e.d(t,{jc:()=>o});var s=e(63864),i=e(41682);const o=async a=>{if((0,s.I)(a.config.version,2021,2,4)){return(await a.callWS({type:"supervisor/api",endpoint:"/"+((0,s.I)(a.config.version,2021,9)?"backups":"snapshots"),method:"get"}))[(0,s.I)(a.config.version,2021,9)?"backups":"snapshots"]}return(0,i.rY)(await a.callApi("GET","hassio/"+((0,s.I)(a.config.version,2021,9)?"backups":"snapshots"))).snapshots}},99417:(a,t,e)=>{e.a(a,(async(a,s)=>{try{e.r(t);var i=e(17463),o=e(34541),n=e(47838),r=e(68144),c=e(79932),h=e(60228),l=e(7323),d=e(5435),u=e(68307),p=(e(22098),e(10983),e(35197),e(2179)),f=e(83270),k=e(45355),g=e(60538),b=e(35460),m=e(82494),v=(e(60010),e(11654)),y=(e(88165),e(29311)),w=a([d]);d=(w.then?(await w)():w)[0];const _="M16.56,5.44L15.11,6.89C16.84,7.94 18,9.83 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12C6,9.83 7.16,7.94 8.88,6.88L7.44,5.44C5.36,6.88 4,9.28 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12C20,9.28 18.64,6.88 16.56,5.44M13,3H11V13H13";(0,i.Z)([(0,c.Mo)("ha-config-system-navigation")],(function(a,t){class e extends t{constructor(...t){super(...t),a(this)}}return{F:e,d:[{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,c.Cb)({type:Boolean,reflect:!0})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,c.Cb)({type:Boolean})],key:"isWide",value:void 0},{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"cloudStatus",value:void 0},{kind:"field",decorators:[(0,c.Cb)({type:Boolean})],key:"showAdvanced",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_latestBackupDate",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_boardName",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_storageInfo",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_externalAccess",value:()=>!1},{kind:"method",key:"render",value:function(){const a=y.configSections.general.filter((a=>(0,h.j)(this.hass,a))).map((a=>{let t="";switch(a.translationKey){case"backup":t=this._latestBackupDate?this.hass.localize("ui.panel.config.backup.description","relative_time",(0,d.G)(new Date(this._latestBackupDate),this.hass.locale)):this.hass.localize("ui.panel.config.backup.description_no_backup");break;case"network":t=this.hass.localize("ui.panel.config.network.description","state",this._externalAccess?this.hass.localize("ui.panel.config.network.enabled"):this.hass.localize("ui.panel.config.network.disabled"));break;case"storage":t=this._storageInfo?this.hass.localize("ui.panel.config.storage.description","percent_used",`${Math.round(this._storageInfo.used/this._storageInfo.total*100)}${(0,u.K)(this.hass.locale)}%`,"free_space",`${this._storageInfo.free} GB`):"";break;case"hardware":t=this._boardName||this.hass.localize("ui.panel.config.hardware.description");break;default:t=this.hass.localize(`ui.panel.config.${a.translationKey}.description`)}return{...a,name:a.translationKey?this.hass.localize(`ui.panel.config.${a.translationKey}.caption`):a.name,description:t}}));return r.dy` <hass-subpage .hass="${this.hass}" back-path="/config" .header="${this.hass.localize("ui.panel.config.dashboard.system.main")}"> <ha-icon-button slot="toolbar-icon" .path="${_}" .label="${this.hass.localize("ui.panel.config.system_dashboard.restart_homeassistant")}" @click="${this._showRestartDialog}"></ha-icon-button> <ha-config-section .narrow="${this.narrow}" .isWide="${this.isWide}" full-width> <ha-card outlined> <ha-navigation-list .hass="${this.hass}" .narrow="${this.narrow}" .pages="${a}" hasSecondary .label="${this.hass.localize("ui.panel.config.dashboard.system.main")}"></ha-navigation-list> </ha-card> </ha-config-section> </hass-subpage> `}},{kind:"method",key:"firstUpdated",value:function(a){(0,o.Z)((0,n.Z)(e.prototype),"firstUpdated",this).call(this,a),this._fetchNetworkStatus();const t=(0,l.p)(this.hass,"hassio");this._fetchBackupInfo(t),this._fetchHardwareInfo(t),t&&this._fetchStorageInfo()}},{kind:"method",key:"_fetchBackupInfo",value:async function(a){const t=a?await(0,g.jc)(this.hass):(0,l.p)(this.hass,"backup")?await(0,p.ZE)(this.hass).then((a=>a.backups)):[];t.length>0&&(this._latestBackupDate=t.reduce(((a,t)=>a.date>t.date?a:t)).date)}},{kind:"method",key:"_fetchHardwareInfo",value:async function(a){if((0,l.p)(this.hass,"hardware")){var t;const a=await this.hass.callWS({type:"hardware/info"});this._boardName=null==a||null===(t=a.hardware.find((a=>null!==a.board)))||void 0===t?void 0:t.name}else if(a){const a=await(0,b.AP)(this.hass);a.board&&(this._boardName=k.d[a.board])}}},{kind:"method",key:"_fetchStorageInfo",value:async function(){const a=await(0,b.Sj)(this.hass);this._storageInfo={used:a.disk_used,free:a.disk_free,total:a.disk_total}}},{kind:"method",key:"_fetchNetworkStatus",value:async function(){if((0,l.p)(this.hass,"cloud")){if((await(0,f.LI)(this.hass)).logged_in)return void(this._externalAccess=!0)}this._externalAccess=null!==this.hass.config.external_url}},{kind:"method",key:"_showRestartDialog",value:async function(){(0,m.s)(this)}},{kind:"get",static:!0,key:"styles",value:function(){return[v.Qx,r.iv`:host(:not([narrow])) ha-card{margin-bottom:max(24px,env(safe-area-inset-bottom))}ha-config-section{margin:auto;margin-top:-32px;max-width:600px}ha-card{overflow:hidden;margin-bottom:24px;margin-bottom:max(24px,env(safe-area-inset-bottom))}ha-card a{text-decoration:none;color:var(--primary-text-color)}.title{font-size:16px;padding:16px;padding-bottom:0}.restart-section{display:flex;align-items:center;flex-direction:column;justify-content:center;margin-bottom:24px}@media all and (max-width:600px){ha-card{border-width:1px 0;border-radius:0;box-shadow:unset}ha-config-section{margin-top:-42px}}ha-navigation-list{--navigation-list-item-title-font-size:16px}`]}}]}}),r.oi);s()}catch(a){s(a)}}))}};
//# sourceMappingURL=99417-0ZRVDIDjGhY.js.map